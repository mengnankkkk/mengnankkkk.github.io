<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>计算机网络基础 | mengnankkのblog</title><meta name="keywords" content="net"><meta name="author" content="mengnankkzhou"><meta name="copyright" content="mengnankkzhou"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="计算机网络基础"><meta name="application-name" content="计算机网络基础"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="计算机网络基础"><meta property="og:url" content="https://blog.tokenlen.top/2025/02/23/net2/index.html"><meta property="og:site_name" content="mengnankkのblog"><meta property="og:description" content="基本概念 传输方式 网络根据传输方式可以进行分类，一般分为面向连接型和面向无连接型。  面向连接型中，在发送数据之前，需要在主机之间建立一条通信线路。 面向无连接型则不要求建立和断开连接，发送方可用于任何时候发送数据。接收端也不知道自己何时从哪里接收到数据。  分组交换 处在互联网边缘部分的机器，也"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/20250126175712180.jpg?_r_=64b66b16-e3f7-451d-55f6-c6cfda765608"><meta property="article:author" content="mengnankkzhou"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/20250126175712180.jpg?_r_=64b66b16-e3f7-451d-55f6-c6cfda765608"><meta name="description" content="基本概念 传输方式 网络根据传输方式可以进行分类，一般分为面向连接型和面向无连接型。  面向连接型中，在发送数据之前，需要在主机之间建立一条通信线路。 面向无连接型则不要求建立和断开连接，发送方可用于任何时候发送数据。接收端也不知道自己何时从哪里接收到数据。  分组交换 处在互联网边缘部分的机器，也"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://blog.tokenlen.top/2025/02/23/net2/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走啊，那种事情不要啊","backTitle":"♪(^∇^*)欢迎回家！！！！"},
  LA51: undefined,
  greetingBox: {"enable":"ture","default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://comment.tokenlen.top/',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"\tbd9428de12b54b96b2f1b4e69aeee81f","mailMd5":"F37442226DA71492"},
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: mengnankkzhou","link":"链接: ","source":"来源: mengnankkのblog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'mengnankkのblog',
  title: '计算机网络基础',
  postAI: '',
  pageFillDescription: '基本概念, 传输方式, 分组交换, 数据在不同层的称呼, 网络层, IP地址, 子网掩码, 子网掩码的计算, 网关, 网络协议, 网络通信, ARP/RARP协议, 路由选择协议, tcp/ip, tcp的可靠性原理, TCP报文段, tcp的三次握手和三次挥手, Socket, upd, upd和tcp/ip协议的特点对比, dns, dns解析, nat, dhcp, http, 常见的http方法, http状态码, host字段, https和http的区别, 请求报文, 响应报文, ssl/tls, 工作流程, ftp, ssh, smtp, 数字签名, cookie和session基本概念传输方式网络根据传输方式可以进行分类一般分为面向连接型和面向无连接型面向连接型中在发送数据之前需要在主机之间建立一条通信线路面向无连接型则不要求建立和断开连接发送方可用于任何时候发送数据接收端也不知道自己何时从哪里接收到数据分组交换处在互联网边缘部分的机器也就是互联网终端主机它们官方一点的话术就是端系统在互联网应用中每个终端系统都可以彼此交换信息这种信息也被称为报文报文是一个超集的概念它可以包括你想要的任何东西比如文字数据电子邮件音频视频等为了从源目的地向端系统发送报文需要把长报文切分为一个个小的数据块这种数据块称为分组也就是说报文是由一个个小块的分组组成这些分组其实就是包在分组的传输过程中每个分组都要经过通信链路和分组交换机分组要在端系统之间传输需要经过一定的时间如果两个端系统之间需要传输的分组为比特链路的传输速率问比特秒那么传输时间就是秒一个端系统需要经过交换机给其他端系统发送分组当分组到达分组交换机时交换机会如何操作交换机会直接进行转发吗不是的交换机可没有这么无私你想让我帮你转发分组好首先你需要先把整个分组数据都给我我再考虑给你发送的问题这就是存储转发传输数据在不同层的称呼四层传输层数据被称作段三层网络层数据被称做包二层数据链路层时数据被称为帧一层物理层时数据被称为比特流网络层地址网络地址地址由网络号包括子网号和主机号组成网络地址的主机号为全网络地址代表着整个网络广播地址广播地址通常称为直接广播地址是为了区分受限广播地址广播地址与网络地址的主机号正好相反广播地址中主机号为全当向某个网络的广播地址发送消息时该网络内的所有主机都能收到该广播消息组播地址类地址就是组播地址类地址类地址以开头第一个字节作为网络号地址范围为类地址以开头前两个字节作为网络号地址范围是类地址以开头前三个字节作为网络号地址范围是类地址以开头地址范围是类地址作为组播地址一对多的通信类地址以开头地址范围是类地址为保留地址供以后使用注只有有网络号和主机号之分类地址和类地址没有划分网络号和主机号该地址指的是受限的广播地址受限广播地址与一般广播地址直接广播地址的区别在于受限广播地址只能用于本地网络路由器不会转发以受限广播地址为目的地址的分组一般广播地址既可在本地广播也可跨网段广播例如主机上的直接广播数据包后另外一个网段也能收到该数据报若发送受限广播数据报则不能收到注一般的广播地址直接广播地址能够通过某些路由器当然不是所有的路由器而受限的广播地址不能通过路由器常用于寻找自己的地址例如在我们的和协议中若某个未知地址的无盘机想要知道自己的地址它就以为目的地址向本地范围具体而言是被各个路由器屏蔽的范围内的服务器发送请求分组回环地址被用作回环地址回环地址表示本机的地址常用于对本机的测试用的最多的是也可以用来表示类私有地址私有地址也叫专用地址它们不会在全球使用只具有本地意义类私有地址范围是类私有地址范围是类私有地址范围是子网掩码随着互连网应用的不断扩大原先的的弊端也逐渐暴露出来即网络号占位太多而主机号位太少所以其能提供的主机地址也越来越稀缺目前除了使用在企业内部利用保留地址自行分配以外通常都对一个高类别的地址进行再划分以形成多个子网提供给不同规模的用户群使用这里主要是为了在网络分段情况下有效地利用地址通过对主机号的高位部分取作为子网号从通常的网络位界限中扩展或压缩子网掩码用来创建某类地址的更多子网但创建更多的子网时在每个子网上的可用主机地址数目会比原先减少子网掩码是标志两个地址是否同属于一个子网的也是位二进制地址其每一个为代表该位是网络位为代表主机位它和地址一样也是使用点式十进制来表示的如果两个地址在子网掩码的按位与的计算下所得结果相同即表明它们共属于同一子网中在计算子网掩码时我们要注意地址中的保留地址即地址和广播地址它们是指主机地址或网络地址全为或时的地址它们代表着本网络地址和广播地址一般是不能被计算在内的子网掩码的计算无需划分在这个无须划分子网里面是按地址的类别决定的比如类地址占个网络位所以是类地址占个网络位所以子网掩码就是类地址占个网络位所以子网掩码就是固定大小的子网通常用于根据特定的网络需求如特定数量的主机或子网来划分计算的关键是确定所需的网络位数和主机位数并根据此来计算掩码确定需要多少个子网或者每个子网需要多少主机使用的幂来推算所需的主机位数或子网位数将其与默认子网掩码结合进行扩展实例假设你有一个类地址默认子网掩码是你希望把这个地址划分为个子网需要划分为个子网那么就需要个子网位然后又是类地址个网络位所以一共是个网络位所以新的子网掩码就是前位是其余是转化为进制就是根据主机数来确定这种方法是通过需求来计算每个子网所能容纳的最大主机数从而确定子网掩码根据你想要的每个子网中的主机数反推所需的主机位数用的幂来计算能容纳的最大主机数公式减去是因为网络地址和广播地址不能用作主机地址然后确定剩下的位数就是网络位数从而确定子网掩码实例假设你想要为每个子网容纳个主机所以需要个主机位如果是类地址默认掩码是即个网络位所以那么子网掩码用二进制表示就是现在给定个主机位网络位数是转化为进制就是表示法它允许你直接指定子网掩码的位数而不是依赖于地址的类别表示法用斜杠后跟数字的形式表示子网掩码表示法是通过直接指明网络部分的位数来计算子网掩码例如表示前位是网络位后位是主机位你可以通过来指定任何地址和子网掩码而不仅仅是类类或类地址表示类地址子网掩码为表示类地址子网掩码为表示类地址子网掩码为主机和子网的地址进行计算比如一个子网有台主机那么对于这个子网需要的地址是注意加的第一个是指这个网络连接时所需的网关地址接着的两个分别是指网络地址和广播地址网关也是要占地址的小于的四次方所以主机位是位所以子网掩码是网关网关实质上是一个网络通向其他网络的地址比如有网络和网络网络的地址范围为子网掩码为网络的地址范围为子网掩码为而要实现这两个网络之间的通信则必须通过网关所以说只有设置好网关的地址协议才能实现不同网络之间的相互通信如果网络中的主机发现数据包的目的主机不在本地网络中就把数据包转发给它自己的网关再由网关转发给网络的网关网络的网关再转发给网络的某个主机网络向网络转发数据包的过程网关的地址是具有路由功能的设备的地址具有路由功能的设备有路由器启用了路由协议的服务器实质上相当于一台路由器代理服务器也相当于一台路由器网络协议核心作用标准化通信网络协议为设备之间的通信提供了统一的标准确保不同厂商不同操作系统的设备能够互联互通数据可靠传输通过错误检测数据重传等机制网络协议确保数据在传输过程中不会丢失或损坏高效路由与寻址网络协议定义了如何将数据从源设备发送到目标设备包括地址分配路由选择等安全性现代网络协议通常包含加密和认证机制保护数据免受窃听或篡改关键组成部分语法定义数据的格式和结构例如数据包的头部和尾部如何组织语义定义数据的含义例如某个字段表示源地址另一个字段表示目标地址时序定义数据发送和接收的顺序例如协议的三次握手过程网络协议的分层结构网络协议通常按照分层模型组织最常见的模型是七层模型和四层模型每一层都有特定的功能和协议网络通信网络通信是指通过计算机网络如互联网在不同设备之间传输数据的过程这些设备可以是计算机智能手机服务器等网络通信的核心目标是实现信息的快速准确和安全传输基本要素发送方发送数据的设备或应用程序接收方接收数据的设备或应用程序传输介质数据在网络中传输的物理路径如光纤电缆无线信号等协议规定数据如何传输如何被接收和处理的规则和标准在网络通信中数据通常以包的形式传输数据封装是指将原始数据按照特定的协议格式打包添加必要的控制信息如源地址目标地址校验和等解封装则是接收方将接收到的数据包还原为原始数据的过程传输过程数据分段将大块数据分割成适合传输的小块添加头部信息在每个数据段前添加协议头部信息如地址端口号等传输通过网络传输介质将数据包发送到目标设备接收与重组接收方接收数据包并根据头部信息将数据包重组为原始数据在网络通信中数据被分割成小块进行传输这些小块被称为数据包帧或报文具体名称取决于所在的网络层次数据包在网络层如协议中数据被封装成数据包包含源地址目标地址和数据内容帧在数据链路层如以太网协议中数据包被进一步封装成帧包含地址和错误检测信息报文在应用层如协议中数据以报文的形式传输包含请求或响应的具体内容网络通信的基本流程数据封装应用层生成数据报文传输层添加端口号网络层添加地址数据链路层添加地址帧物理层将数据转换为比特流数据传输数据通过物理介质如电缆光纤传输数据解封装接收设备逐层解析数据最终将数据传递给目标应用程序协议地址解析协议即是根据地址获取物理地址的一个协议把地址解析为硬件地址主机发送信息时将包含目标地址的请求广播到网络上的所有主机并接收返回消息以此确定目标的物理地址收到返回消息后将该地址和物理地址存入本机缓存中并保留一定时间下次请求时直接查询缓存以节约资源地址解析协议是建立在网络中各个主机互相信任的基础上的网络上的主机可以自主发送应答消息其他主机收到应答报文时不会检测该报文的真实性就会将其记入本机缓存由此攻击者就可以向某一主机发送伪应答报文使其发送的信息无法到达预期的主机或到达错误的主机这就构成了一个欺骗命令可用于查询本机缓存中地址和地址的对应关系添加或删除静态对应关系等逆地址解析协议即功能和协议相对其将局域网中某个主机的物理地址转换为地址工作流程主机查询缓存主机检查是否有主机的地址和地址映射如果有直接使用该映射进行通信请求广播如果缓存中没有对应的映射主机会向网络广播请求询问目标的地址请求包括主机的和地址主机接收请求网络中的所有主机接收到请求检查地址是否匹配如果匹配则继续处理请求否则丢弃请求主机发送回复主机回复请求发送自己的地址给主机主机更新缓存主机接收到主机的回复后更新缓存并使用主机的地址进行通信缓存生存期缓存的条目有生存期生存期过后主机需要重新进行过程以更新地址映射工作流程给主机发送一个本地的广播在此广播包中声明自己的地址并且请求任何收到此请求的服务器分配一个地址本地网段上的服务器收到此请求后检查其列表查找该地址对应的地址如果存在服务器就给源主机发送一个响应数据包并将此地址提供给对方主机使用如果不存在服务器对此不做任何的响应路由选择协议常见的路由选择协议有协议协议协议底层是贝尔曼福特算法它选择路由的度量标准是跳数最大跳数是跳如果大于跳它就会丢弃数据包协议开放式最短路径优先底层是迪杰斯特拉算法是链路状态路由选择协议它选择路由的度量标准是带宽延迟协议是最基本的协议国际互联网络的基础由网络层的协议和传输层的协议组成通俗而言负责发现传输的问题一有问题就发出信号要求重新传输直到所有数据安全正确地传输到目的地而是给因特网的每一台联网设备规定一个地址层接收由更低层网络接口层例如以太网设备驱动程序发来的数据包并把该数据包发送到更高层或层相反层也把从或层接收来的数据包传送到更低层数据包是不可靠的因为并没有做任何事情来确认数据包是否按顺序发送的或者有没有被破坏数据包中含有发送它的主机的地址源地址和接收它的主机的地址目的地址是面向连接的通信协议是一个传输层协议是一个双工协议这就意味着客户端和服务端可以平等地发送接收信息通过三次握手建立连接通讯完成时要通过四次挥手拆除连接这个连接就是一个通道由于是面向连接的所以只能用于端到端套接字到套接字的通讯提供的是一种可靠的数据流服务采用带重传的肯定确认技术来实现传输的可靠性还采用一种称为滑动窗口的方式进行流量控制所谓窗口实际表示接收能力用以限制发送方的发送速度面向字节流虽然应用程序与交互是一次一个大小不等的数据块但把这些数据看成一连串无结构的字节流它不保证接收方收到的数据块和发送方发送的数据块具有对应大小关系例如发送方应用程序交给发送方的个数据块接收方的可能只用收到的个数据块字节流交付给上层的应用程序的可靠性原理可靠传输有如下两个特点传输信道无差错保证传输数据正确不管发送方以多快的速度发送数据接收方总是来得及处理收到的数据首先采用三次握手来建立连接四次握手来释放连接从而保证建立的传输信道是可靠的其次采用了连续协议回退超时自动重传来保证数据传输的正确性使用滑动窗口协议来保证接方能够及时处理所接收到的数据进行流量控制最后使用慢开始拥塞避免快重传和快恢复来进行拥塞控制避免网络拥塞报文段虽面向字节流但传送的数据单元为报文段报文段首部数据两部分首部前个字符固定后面有个字节是根据需而增加的选项故首部最小长度字节端口源端口号和目地端口各占位两个字节也就是端口的范围是另外以下是系统保留的从是用户使用的端口范围一般常用的某些端口比如序号占字节连接中传送的字节流中的每个字节都按顺序编号确认号个字节是期望收到对方下一个报文段的第一个数据字节的序号收到发送的报文其序号字段是数据长度是字节表明正确收到发送的到序号为止的数据期望收到下一个数据序号是发送给的确认报文段中把确认号置为数据偏移头部有可选字段长度不固定指出报文段的数据起始处距离报文段的起始处有多远保留保留今后使用的标记为控制位由个标志位构成每个标志位表示一个控制功能其中比较重要的个紧急指针标志为表示紧急指针有效为忽略紧急指针确认序号标志为表示确认号有效为表示报文不含确认信息忽略确认号字段上面的确认号是否有效就是通过该标识控制的标志为表示带有标志的数据指示接收方在接收到该报文段以后应尽快将该报文段交给应用程序而不是在缓冲区排队重置连接标志重置因为主机崩溃或其他原因而出现错误的连接或用于拒绝非法的报文段或非法的连接同步序号同步序号用于建立连接过程在连接请求中和表示该数据段没有使用捎带的确认域而连接应答捎带一个确认即和终止标志用于释放连接为时表示发送方没有发送了窗口滑动窗口的大小用来告知发送端接受端缓存大小以此控制发送端发送数据的速率从而达到流量控制校验和奇偶校验此校验和是对整个的报文段包括头部和数据以位进行计算所得由发送端计算和存储接收端进行验证紧急指针只有控制位中的为时才有效指出本报文段中的紧急数据的字节数选项其长度可变定义其他的可选参数的三次握手和三次挥手三次握手用来建立连接确保双方都准备好进行数据传输客户端发送请求表示希望建立连接服务器回复表示同意建立连接客户端发送确认连接建立成功详细的过程第一次握手客户端将报文标志位置为随机产生一个序号值保存在首部的序列号字段里指明客户端打算连接的服务器的端口并将该数据包发送给服务器端发送完毕后客户端进入状态等待服务器端确认第二次握手服务器端收到数据包后由标志位知道客户端请求建立连接服务器端将报文标志位和都置为随机产生一个序号值并将该数据包发送给客户端以确认连接请求服务器端进入状态服务器第一次收到客户端的之后就会处于状态此时双方还没有完全建立其连接服务器会把此种状态下请求连接放在一个队列里我们把这种队列称之为半连接队列服务器发送完包如果未收到客户确认包服务器进行首次重传等待一段时间仍未收到客户确认包进行第二次重传如果重传次数超过系统规定的最大重传次数系统将该连接信息从半连接队列中删除第三次握手客户端收到确认后检查是否为是否为如果正确则将标志位置为并将该数据包发送给服务器端服务器端检查是否为是否为如果正确则连接建立成功客户端和服务器端进入状态完成三次握手随后客户端与服务器端之间可以开始传输数据了全连接队列就是三次握手已经完成了建立起的连接就会放到全连接队列里队列满了就会出现丢包其实第三次握手的时候是可以携带数据的也就是说第一次第二次握手不可以携带数据而第三次握手是可以携带数据的其中上面的和不是同一个概念小写的代表的是头部的确认号缩写是对上一个包的序号进行确认的号大写的则是我们上面说的首部的标志位用于标志的包是否对上一个包进行了确认操作如果确认了则把标志位设置成四次挥手用来关闭连接确保双方都完成数据的传输后才断开连接客户端发送请求表示数据发送完毕准备关闭连接服务器回复确认收到客户端的关闭请求服务器发送请求表示服务器也准备关闭连接客户端回复连接正式关闭挥手请求可以是端也可以是端发起的我们假设是端发起第一次挥手端发起挥手请求向端发送标志位是报文段设置序列号此时端进入状态这表示端没有数据要发送给端了第二次挥手端收到了端发送的报文段向端返回一个标志位是的报文段设为加端进入状态端告诉端我确认并同意你的关闭请求第三次挥手端向端发送标志位是的报文段请求关闭连接同时端进入状态第四次挥手端收到端发送的报文段向端发送标志位是的报文段然后端进入状态端收到端的报文段以后就关闭连接此时端等待的时间后依然没有收到回复则证明端已正常关闭那好端也可以关闭连接了报文段最大生存时间它是任何报文段被丢弃前在网络内的最长时间为什么要三次握手在只有两次握手的情形下假设想跟建立连接但是却因为中途连接请求的数据报丢失了故端不得不重新发送一遍这个时候端仅收到一个连接请求因此可以正常的建立连接但是有时候端重新发送请求不是因为数据报丢失了而是有可能数据传输过程因为网络并发量很大在某结点被阻塞了这种情形下端将先后收到次请求并持续等待两个请求向他发送数据问题就在这里端实际上只有一次请求而端却有个响应极端的情况可能由于端多次重新发送请求数据而导致端最后建立了多个响应在等待因而造成极大的资源浪费所以三次握手很有必要为什么要四次挥手试想一下假如现在你是客户端你想断开跟的所有连接该怎么做第一步你自己先停止向端发送数据并等待的回复但事情还没有完虽然你自身不往发送数据了但是因为你们之前已经建立好平等的连接了所以此时他也有主动权向你发送数据故端还得终止主动向你发送数据并等待你的确认其实说白了就是保证双方的一个合约的完整执行使用的协议文件传输协议远程登录协议简单邮件传输协议和相对用于接收邮件协议等即套接字是应用层与协议族通信的中间软件抽象层表现为一个封装了协议族的编程接口不是一种协议而是一个编程调用接口属于传输层主要解决数据如何在网络中传输对用户来说只需调用去组织数据以符合指定的协议即可通信用户数据报协议是面向无连接的通讯协议数据包括目的端口号和源端口号信息由于通讯不需要连接所以可以实现广播发送通讯时不需要接收方确认属于不可靠的传输可能会出现丢包现象实际应用中要求程序员编程验证与位于同一层但它不管数据包的顺序错误或重发因此不被应用于那些使用虚电路的面向连接的服务主要用于那些面向查询应答的服务例如相对于或这些服务需要交换的信息量较小每个报文分报头和数据区两部分报头由四个位长字节字段组成分别说明该报文的源端口目的端口报文长度以及校验值报头由个域组成其中每个域各占用个字节具体如下源端口号目标端口号数据报长度校验值运输层提供应用进程之间的逻辑通信运输层之间的通信并不是真正在两个运输层之间直接传输数据是端对端之间的应用进程传输使用协议包括简单文件传输协议简单网络管理协议域名解析协议运输层的端口号分为服务器端使用的端口号指派给熟知端口是登记端口号和客户端暂时使用的端口号和协议的特点对比的主要特点是无连接尽最大努力交付面向报文无拥塞控制支持一对一一对多多对一和多对多的交互通信首部开销小只有四个字段源端口目的端口长度和检验和是不可靠的的主要特点是面向连接每一条连接只能是一对一的提供可靠交付提供全双工通信面向字节流是域名系统的缩写该系统用于命名组织到域层次结构中的计算机和网络服务可以简单地理解为将转换为地址域名是由圆点分开一串单词或缩写组成的每一个域名都对应一个惟一的地址在上域名与地址之间是一一对应的就是进行域名解析的服务器命名用于等网络中通过用户友好的名称查找计算机和服务我们可以通过的命令来查找域名所对应的地址解析记录定义的地址是要解析的域名是记录的类型记录代表着这是一条用于解析地址的记录从这条记录可知的地址是记录用于定义域名的别名如下面这条记录定义的别名这条记录定义了是的别名用户在浏览器中输入时候通过查询会知道是的别名因此需要实际的时候会去拿的记录当你想把一个网站迁移到新域名旧域名仍然保留的时候还有当你想将自己的静态资源放到上的时候就非常有用记录记录是域名和地址的映射关系和记录类似记录则是域名和地址的映射关系记录记录是邮件记录用来描述邮件服务器的域名比如说发送一封邮件到那么如何知道哪个地址是邮件服务器呢这个时候就可以用到下面这条记录的地址可以通过查询的记录和记录获得记录记录是描述服务器网址从的存储结构上说中含有权威服务的目录也就是说记录指定哪台是回答查询的权威域名服务器当解析地址时我们看到有两个记录所以确定最终的记录在和上从设计上看和是网站提供的智能服务器可以提供负载均衡分布式等服务比如当一个北京的用户想要访问的时候看到这是一个北京的就返回一个离北京最近的机房上面代码中配置了两个记录通常不会只有一个这是为了保证高可用一个挂了另一个还能继续服务通常数字小的记录优先级更高也就是会优先于响应配置了上面的记录后如果还配置了的记录那么这个记录会被记录覆盖网络地址转换属接入广域网技术是一种将私有保留地址转化为合法地址的转换技术它被广泛应用于各种类型接入方式和各种类型的网络中原因很简单不仅完美地解决了地址不足的问题而且还能够有效地避免来自网络外部的攻击隐藏并保护网络内部的计算机动态主机设置协议是一个局域网的网络协议使用协议工作主要有两个用途给内部网络或网络服务供应商自动分配地址给用户或者内部网络管理员作为对所有计算机作中央管理的手段超文本传输协议是互联网上应用最为广泛的一种网络协议所有的文件都必须遵守这个标准常见的方法请求服务器返回指定的资源例如网页是从服务器上获取资源传送的数据量小不能大于向服务器提交数据例如表单数据向服务器提交资源传送的数据量较大一般默认为不受限制请求与请求区别请求的请求参数是添加到中可以在中可以看到请求的请求参数是添加到中在中不可见请求的有长度限制这个限制由浏览器和服务器决定和设置的例如浏览器对的最大限制为个字符如果超过这个数字提交按钮没有任何反应因为请求的参数是添加到中所以请求的的长度限制需要将请求参数长度也考虑进去而请求不用考虑请求参数的长度请求产生一个数据包请求产生个数据包在火狐浏览器中产生一个数据包这个区别点在于浏览器的请求机制先发送请求头再发送请求体因为没有请求体所以就发送一个数据包而包含请求体所以发送两次数据包但是由于火狐机制不同所以发送一个数据包请求会被浏览器主动缓存下来留下历史记录而默认不会是幂等的而不是幂等表示执行相同的操作结果也是相同的是获取数据是修改数据更新资源删除资源协议中预留给能够将连接改为管道方式的代理服务器允许客户端查看服务器的性能回显服务器收到的请求主要用于测试或诊断是对方法的补充用来对已知资源进行局部更新根据规范用于信息获取应该是安全的和幂等的所谓安全的意味着该操作用于获取信息而非修改信息换句话说请求一般不应产生副作用就是说它仅仅是获取资源信息就像数据库查询一样不会修改增加数据不会影响资源的状态幂等的意味着对同一的多个请求应该返回同样的结果状态码状态码由三位数字构成第一位定义响应的类别代表成功表示请求以接收继续处理加入了一个新的状态码客户端事先发送一个只带头域的请求如果服务器因为权限拒绝了请求就回送响应码如果服务器接收此请求就回送响应码客户端就可以继续发送带实体的完整请求了状态代码的使用允许客户端在发消息之前先用试探一下看要不要接收再决定要不要发成功表示请求已经被成功接收理解接受例如表示请求成功是最常见的成功状态码表示一切正常如果是非请求服务器返回的响应头都会有数据也是常见的成功状态码与基本相同但响应头没有数据是应用于分块下载或断电续传表示响应返回的数据并不是资源的全部而是其中的一部分也是服务器处理成功的状态重定向例如表示资源已永久移动表示永久重定向说明请求的资源已经不存在了需改用新的再次访问搜索引擎在抓取新内容的同时也将旧的网址交换为重定向之后的网址表示临时重定向说明请求的资源还在但暂时需要用另一个来访问搜索引擎会抓取新的内容而保存旧的网址和都会在响应头里使用字段指明后续要跳转的浏览器会自动重定向新的不具有跳转的含义表示资源未修改重定向已存在的缓冲文件也称缓存重定向用于缓存控制客户端发送的报文有误例如表示请求的资源不存在表示客户端请求的报文有错误缺失或错误的认证这个状态代码必须和报头域一起使用表示服务器禁止访问资源并不是客户端的请求出错表示请求的资源在服务器上不存在或未找到所以无法提供给客户端状态码表示客户端请求报文正确但是服务器处理时内部发生了错误服务器错误例如表示服务器发生错误表示客户端请求的功能还不支持通常是服务器作为网关或代理时返回的错误码表示服务器自身工作正常访问后端服务器发生了错误表示服务器当前很忙暂时无法响应服务器网关超时由作为代理或网关的服务器使用表示不能及时地从远程服务器获得应答字段在中认为每台服务器都绑定一个唯一的地址因此请求消息中的并没有传递主机名但随着虚拟主机技术的发展在一台物理服务器上可以存在多个虚拟主机并且它们共享一个地址的请求消息和响应消息都应支持头域且请求消息中如果没有头域会报告一个错误服务器应当支持头字段用于处理多个虚拟主机共享同一地址的情况在这个请求中告诉服务器该请求是针对这个主机的即便该服务器托管多个网站如它也可以正确解析请求此外服务器应该接受以绝对路径标记的资源请求允许请求中使用绝对即完整包括协议主机名和路径例如和的区别在上加入了协议通过加密保护数据的机密性和完整性防止中间人攻击更加安全对搜索引擎更友好其中默认为默认基于传输层基于应用层在浏览器显示绿色安全锁则没有请求报文请求报文由部分组成请求行请求头请求体常见的报文头属性告诉服务端客户端接收什么类型的响应表示这是请求是从哪个进来的比如想在网上购物但是不知道选择哪家电商平台你就去问度娘说哪家电商的东西便宜啊然后一堆东西弹出在你面前第一给就是某宝当你从这里进入某宝的时候这个请求报文的就是对缓存进行控制如一个请求希望响应的内容在客户端缓存一年或不被缓可以通过这个报文头设置这个属性是用来告诉服务器能接受什么编码格式包括字符编码压缩形式一般都是压缩形式例如这两种都是压缩格式指定要请求的资源所在的主机和端口告诉服务器客户端使用的操作系统浏览器版本和名称决定当前事务三次握手和四次挥手完成后是否关闭网络连接持久连接事务完成后不关闭网络连接非持久连接事务完成后关闭网络连接响应报文响应报文与请求报文一样由三个部分组成响应行响应头响应体响应输出到客户端后服务端通过该属性告诉客户端该怎么控制响应内容的缓存表示你请求资源的版本如果该资源发生啦变化那么这个属性也会跟着变在重定向中或者创建新资源时使用服务端可以设置客户端的安全套接字层和传输层安全协议是用于保障网络通信安全的加密协议是的后续版本基于发展而来目前已经取代最新版本是作用加密防止数据被窃听确保传输的机密性完整性防止数据被篡改确保数据完整性身份验证通过证书验证服务器可选客户端身份防止中间人攻击工作流程客户端客户端向服务器发送消息包含支持的版本如支持的加密算法如等一个随机数用于后续密钥生成服务器服务器响应消息包含选定的版本和加密算法服务器证书包含公钥一个随机数密钥交换及更早版本服务器的证书中包含公钥客户端使用该公钥加密一个随机密钥并发送给服务器密钥交换也可使用椭圆曲线生成共享密钥优化握手直接使用进行密钥交换减少握手步骤提高安全性证书验证客户端验证服务器证书是否合法颁发未过期等可选地服务器也可以要求客户端提供证书进行身份验证双向对称密钥生成双方根据交换的随机数和密钥交换算法生成会话密钥后续数据通信使用对称加密算法如加密提高效率安全通信双方交换消息表示握手完成之后所有通信数据都使用协商出的密钥进行加密传输使用场景安全网站访问邮件加密连接安全的消息传输如文件传输协议是一种用于在网络上传输文件的协议允许用户从一台计算机客户端向另一台计算机服务器上传或下载文件流程客户端连接到服务器的端口默认的控制连接端口服务器返回状态码表示服务已就绪客户端发送用户名命令服务器返回表示需要密码客户端发送密码命令服务器返回表示登录成功文件传输分为两个模式一个是主动模式服务器主动连接到客户端的数据端口客户端发送命令告知服务器自己的地址和数据端口服务器连接到客户端的数据端口开始传输文件另一个是被动模式客户端连接到服务器的数据端口客户端发送命令请求进入被动模式服务器返回自己的地址和数据端口客户端连接到服务器的数据端口开始传输文件自己本身是并不安全的因为传输过程中使用明文传输用户名和密码等所以出现了替代品基于的文件传输协议加密传输数据基于的加密传输数据安全外壳协议是一种用于安全远程登录和其他网络服务的加密协议通过加密通信来保护数据在传输过程中的安全性广泛应用于系统管理文件传输和远程命令执行等场景流程客户端连接到服务器的端口默认的端口服务器发送自己的公钥给客户端客户端验证服务器公钥通常通过已知的主机密钥指纹客户端和服务器协商加密算法如等客户端生成一个会话密钥用服务器的公钥加密后发送给服务器双方使用会话密钥加密后续通信简单邮件传输协议是一种用于发送电子邮件的网络协议是互联网上电子邮件传输的核心协议之一负责将邮件从发送方传递到接收方的邮件服务器发送邮件和传递邮件连接建立户端连接到服务器的端口默认的端口服务器返回状态码表示服务已就绪客户端发送或命令告知服务器自己的域名服务器返回状态码表示命令成功本身也是不安全的因为使用过程中也是使用明文传输可以使用下面的来代替将明文连接升级为加密连接使用加密数据通过身份验证机制如验证用户身份数字签名网络传输过程中需要经过很多中间节点虽然数据无法被解密但可能被篡改数字签名校验数据的完整性数字签名有两种功效能确定消息确实是由发送方签名并发出来的因为别人假冒不了发送方的签名数字签名能确定消息的完整性证明数据是否未被篡改过将一段文本先用函数生成消息摘要然后用发送者的私钥加密生成数字签名与原文文一起传送给接收者接收者只有用发送者的公钥才能解密被加密的摘要信息然后用函数对收到的原文产生一个摘要信息与上一步得到的摘要信息对比如果相同则说明收到的信息是完整的在传输过程中没有被修改否则说明信息被修改过因此数字签名能够验证信息的完整性和是基于实现的另一种记录服务端和客户端会话状态的机制是存储在服务端而会被存储在客户端的中的认证过程客户端第一次发送请求到服务端服务端根据信息创建对应的并在响应头返回客户端接收到服务端返回的后会将此信息存储在上同时会记录这个属于哪个域名当客户端再次访问服务端时请求会自动判断该域名下是否存在信息如果有则发送给服务端服务端会从中拿到再根据找到对应的如果有对应的则通过继续执行请求否则就中断和的区别安全性因为可以通过客户端修改而只能在服务端设置所以安全性比高一般会用于验证用户登录状态适用性只能存储字符串数据而可以存储任意类型数据有效期可以设置任意时间有效而一般失效时间短',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-03-06 14:22:33',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/rss2.xml" title="mengnankkのblog" type="application/rss+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407230955363.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://blog.tokenlen.top/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://img.mengnankk.top:9001/" title="图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="图床"/><span class="back-menu-item-text">图床</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="http://img.mengnankk.top:9001/" title="mengnankk图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/13/64d8c2653332e.ico" alt="mengnankk图床"/><span class="back-menu-item-text">mengnankk图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">mengnankkのblog</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 生活</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/Message/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 其他</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://home.tokenlen.top/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> home</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://status.mengnankk.asia/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 站点检测</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://home.tokenlen.top/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 心里话</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://imgbed.mengnankk.asia/202407021650088.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgbed.mengnankk.asia/202407021650088.jpg"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/BF/" style="font-size: 1.05rem;">BF<sup>1</sup></a><a href="/tags/BigData/" style="font-size: 1.05rem;">BigData<sup>1</sup></a><a href="/tags/C/" style="font-size: 1.05rem;">C<sup>4</sup></a><a href="/tags/CE/" style="font-size: 1.05rem;">CE<sup>1</sup></a><a href="/tags/CSRF/" style="font-size: 1.05rem;">CSRF<sup>1</sup></a><a href="/tags/English/" style="font-size: 1.05rem;">English<sup>7</sup></a><a href="/tags/FI/" style="font-size: 1.05rem;">FI<sup>1</sup></a><a href="/tags/Hadoop/" style="font-size: 1.05rem;">Hadoop<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>12</sup></a><a href="/tags/XSS/" style="font-size: 1.05rem;">XSS<sup>1</sup></a><a href="/tags/css/" style="font-size: 1.05rem;">css<sup>2</sup></a><a href="/tags/football/" style="font-size: 1.05rem;">football<sup>1</sup></a><a href="/tags/html/" style="font-size: 1.05rem;">html<sup>1</sup></a><a href="/tags/java/" style="font-size: 1.05rem;">java<sup>20</sup></a><a href="/tags/leetcode/" style="font-size: 1.05rem;">leetcode<sup>1</sup></a><a href="/tags/markdown/" style="font-size: 1.05rem;">markdown<sup>1</sup></a><a href="/tags/mysql/" style="font-size: 1.05rem;">mysql<sup>15</sup></a><a href="/tags/net/" style="font-size: 1.05rem;">net<sup>3</sup></a><a href="/tags/paper/" style="font-size: 1.05rem;">paper<sup>1</sup></a><a href="/tags/php/" style="font-size: 1.05rem;">php<sup>5</sup></a><a href="/tags/pip/" style="font-size: 1.05rem;">pip<sup>1</sup></a><a href="/tags/python/" style="font-size: 1.05rem;">python<sup>3</sup></a><a href="/tags/shell/" style="font-size: 1.05rem;">shell<sup>4</sup></a><a href="/tags/spring-boot/" style="font-size: 1.05rem;">spring boot<sup>3</sup></a><a href="/tags/springboot/" style="font-size: 1.05rem;">springboot<sup>1</sup></a><a href="/tags/sql/" style="font-size: 1.05rem;">sql<sup>3</sup></a><a href="/tags/web/" style="font-size: 1.05rem;">web<sup>3</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/" style="font-size: 1.05rem;">数据库原理<sup>3</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.05rem;">数据结构<sup>10</sup></a><a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 1.05rem;">正则表达式<sup>2</sup></a><a href="/tags/%E6%AF%9B%E9%80%89/" style="font-size: 1.05rem;">毛选<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>3</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">14</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">13</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/408/" itemprop="url">408</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/net/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>net</span></a></span></div></div><h1 class="post-title" itemprop="name headline">计算机网络基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-02-22T16:00:00.000Z" title="发表于 2025-02-23 00:00:00">2025-02-23</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-03-06T06:22:33.778Z" title="更新于 2025-03-06 14:22:33">2025-03-06</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">13.8k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>43分钟</span></span><span class="post-meta-separator"></span><span id="" data-flag-title="计算机网络基础"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="twikoo_visitors" title="访问量"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为济南"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>济南</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/20250126175712180.jpg?_r_=64b66b16-e3f7-451d-55f6-c6cfda765608"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://blog.tokenlen.top/2025/02/23/net2/"><header><a class="post-meta-categories" href="/categories/408/" itemprop="url">408</a><a href="/tags/net/" tabindex="-1" itemprop="url">net</a><h1 id="CrawlerTitle" itemprop="name headline">计算机网络基础</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">mengnankkzhou</span><time itemprop="dateCreated datePublished" datetime="2025-02-22T16:00:00.000Z" title="发表于 2025-02-23 00:00:00">2025-02-23</time><time itemprop="dateCreated datePublished" datetime="2025-03-06T06:22:33.778Z" title="更新于 2025-03-06 14:22:33">2025-03-06</time></header><h1>基本概念</h1>
<h2 id="传输方式">传输方式</h2>
<p>网络根据传输方式可以进行分类，一般分为<strong>面向连接型和面向无连接型</strong>。</p>
<ul>
<li>面向连接型中，在发送数据之前，需要在主机之间建立一条通信线路。</li>
<li>面向无连接型则不要求建立和断开连接，发送方可用于任何时候发送数据。接收端也不知道自己何时从哪里接收到数据。</li>
</ul>
<h2 id="分组交换">分组交换</h2>
<p>处在互联网边缘部分的机器，也就是互联网终端主机，它们官方一点的话术就是端系统。</p>
<p>在互联网应用中，每个终端系统都可以彼此交换信息，这种信息也被称为<code>报文(Message)</code>，报文是一个超集的概念，它可以包括你想要的任何东西，比如文字、数据、电子邮件、音频、视频等。为了从源目的地向端系统发送报文，需要把长报文切分为一个个小的数据块，这种数据块称为<code>分组(Packets)</code>，也就是说，报文是由一个个小块的分组组成。</p>
<p>这些分组其实就是<strong>包</strong></p>
<p>在分组的传输过程中，每个分组都要经过通信链路和分组交换机，分组要在端系统之间传输需要经过一定的时间，如果两个端系统之间需要传输的分组为 L 比特，链路的传输速率问 R 比特/秒，那么传输时间就是 L / R秒。</p>
<p>一个端系统需要经过交换机给其他端系统发送分组，当分组到达分组交换机时，交换机会如何操作？交换机会直接进行转发吗？不是的，交换机可没有这么无私，你想让我帮你转发分组？好，首先你需要先把整个分组数据都给我，我再考虑给你发送的问题，这就是<strong>存储转发传输</strong>。</p>
<h1>数据在不同层的称呼</h1>
<p>四层传输层数据被称作<strong>段</strong>（Segments）；</p>
<p>三层网络层数据被称做<strong>包</strong>（Packages）；</p>
<p>二层数据链路层时数据被称为<strong>帧</strong>（Frames）；</p>
<p>一层物理层时数据被称为<strong>比特流</strong>（Bits）。</p>
<h1>网络层</h1>
<h2 id="IP地址">IP地址</h2>
<p><strong>网络ip地址：</strong></p>
<p>IP地址由网络号（包括子网号）和主机号组成，网络地址的主机号为全0，网络地址代表着整个网络。</p>
<p><strong>广播地址：</strong></p>
<p>广播地址通常称为直接广播地址，是为了区分受限广播地址。</p>
<p>广播地址与网络地址的主机号正好相反，广播地址中，主机号为全1。当向某个网络的广播地址发送消息时，该网络内的所有主机都能收到该广播消息。</p>
<p><strong>组播地址：</strong></p>
<p>D类地址就是组播地址。</p>
<p><strong>A，B，C，D类地址</strong></p>
<p>A类地址以0开头，第一个字节作为网络号，地址范围为：0.0.0.0~127.255.255.255；</p>
<p>B类地址以10开头，前两个字节作为网络号，地址范围是：128.0.0.0~191.255.255.255;</p>
<p>C类地址以110开头，前三个字节作为网络号，地址范围是：192.0.0.0~223.255.255.255。</p>
<p>D类地址以1110开头，地址范围是224.0.0.0~239.255.255.255，D类地址作为组播地址（一对多的通信）；</p>
<p>E类地址以1111开头，地址范围是240.0.0.0~255.255.255.255，E类地址为保留地址，供以后使用。</p>
<p>注：只有A,B,C有网络号和主机号之分，D类地址和E类地址没有划分网络号和主机号。</p>
<p><strong>255.255.255.255</strong></p>
<p><strong>该IP地址指的是受限的广播地址</strong>。受限广播地址与一般广播地址（直接广播地址）的区别在于，<strong>受限广播地址只能用于本地网络</strong>，路由器不会转发以受限广播地址为目的地址的分组；一般广播地址既可在本地广播，也可跨网段广播。例如：主机192.168.1.1/30上的直接广播数据包后，另外一个网段192.168.1.5/30也能收到该数据报；若发送受限广播数据报，则不能收到。</p>
<p>注：一般的广播地址（直接广播地址）能够通过某些路由器（当然不是所有的路由器），而受限的广播地址不能通过路由器。</p>
<p><strong>0.0.0.0</strong></p>
<p><strong>常用于寻找自己的IP地址</strong>，例如在我们的RARP，BOOTP和DHCP协议中，若某个未知IP地址的无盘机想要知道自己的IP地址，它就以255.255.255.255为目的地址，向本地范围（具体而言是被各个路由器屏蔽的范围内）的服务器发送IP请求分组。</p>
<p>回环地址：</p>
<p>127.0.0.0/8被用作回环地址，回环地址表示本机的地址，常用于对本机的测试，用的最多的是<strong>127.0.0.1。</strong> 也可以用<strong>localhost</strong>来表示</p>
<p><strong>A、B、C类私有地址</strong></p>
<p>私有地址(private address)也叫专用地址，它们不会在全球使用，只具有本地意义。</p>
<p>A类私有地址：10.0.0.0/8，范围是：10.0.0.0~10.255.255.255</p>
<p>B类私有地址：172.16.0.0/12，范围是：172.16.0.0~172.31.255.255</p>
<p>C类私有地址：192.168.0.0/16，范围是：192.168.0.0~192.168.255.255</p>
<h2 id="子网掩码">子网掩码</h2>
<p>随着互连网应用的不断扩大，原先的IPv4的弊端也逐渐暴露出来，即网络号占位太多，而主机号位太少，所以其能提供的主机地址也越来越稀缺，目前除了使用NAT在企业内部利用保留地址自行分配以外，通常都对一个高类别的IP地址进行再划分，以形成多个子网，提供给不同规模的用户群使用。</p>
<p>这里主要是为了在网络分段情况下有效地利用IP地址，通过对主机号的高位部分取作为子网号，从通常的网络位界限中扩展或压缩子网掩码，用来创建某类地址的更多子网。但创建更多的子网时，在每个子网上的可用主机地址数目会比原先减少。</p>
<p>子网掩码是标志两个IP地址是否同属于一个子网的，也是32位二进制地址，其每一个为1代表该位是网络位，为0代表主机位。它和IP地址一样也是使用点式十进制来表示的。如果<strong>两个IP地址在子网掩码的按位与的计算下所得结果相同，即表明它们共属于同一子网中</strong>。</p>
<p><strong>在计算子网掩码时，我们要注意IP地址中的保留地址，即&quot; 0&quot;地址和广播地址，它们是指主机地址或网络地址全为&quot; 0&quot;或&quot; 1&quot;时的IP地址，它们代表着本网络地址和广播地址，一般是不能被计算在内的。</strong></p>
<h3 id="子网掩码的计算">子网掩码的计算</h3>
<p>无需划分：</p>
<p>在这个无须划分子网里面是按ip地址的类别决定的。比如A类地址占8个网络位，所以是255.0.0.0</p>
<p>B类地址占16个网络位，所以子网掩码就是255.255.0.0</p>
<p>C类地址占24个网络位，所以子网掩码就是255.255.255.0</p>
<p>固定大小的子网：</p>
<p>通常用于根据特定的网络需求（如特定数量的主机或子网）来划分。计算的关键是确定所需的网络位数和主机位数，并根据此来计算掩码。</p>
<ul>
<li>
<p>确定需要多少个子网，或者每个子网需要多少主机。</p>
</li>
<li>
<p>使用<strong>2的幂</strong>来推算所需的主机位数或子网位数。</p>
</li>
<li>
<p>将其与默认子网掩码结合，进行扩展。</p>
</li>
</ul>
<p>实例：</p>
<p>假设你有一个<strong>A类地址</strong><code>10.0.0.0</code>，默认子网掩码是<code>255.0.0.0</code>。你希望把这个地址划分为<strong>4个子网</strong>。</p>
<p>需要划分为4个子网，那么就需要2个子网位，然后又是A类地址，8个网络位。所以一共是10个网络位</p>
<p>所以新的子网掩码就是（前10位是1，其余是0）</p>
<p>11111111.11000000.00000000.00000000</p>
<p>转化为10进制就是</p>
<p><strong>255.192.0.0</strong></p>
<p>根据主机数来确定：</p>
<p>这种方法是通过需求来计算每个子网所能容纳的最大主机数，从而确定子网掩码。</p>
<ul>
<li>
<p>根据你想要的每个子网中的主机数，反推所需的主机位数。</p>
</li>
<li>
<p>用<strong>2的幂</strong>来计算能容纳的最大主机数。公式：<code>2^n - 2</code>（减去2是因为网络地址和广播地址不能用作主机地址）。</p>
</li>
<li>
<p>然后确定剩下的位数就是网络位数，从而确定子网掩码。</p>
</li>
</ul>
<p>实例：</p>
<p>假设你想要为每个子网容纳50个主机</p>
<p>2^n - 2 &gt;= 50</p>
<p><code>2^6 - 2 = 62</code>，所以需要6个主机位。</p>
<p>如果是C类地址，默认掩码是<code>255.255.255.0</code>，即24个网络位。</p>
<p>所以那么子网掩码用二进制表示就是</p>
<p>现在，给定6个主机位，网络位数是：<code>32 - 6 = 26</code></p>
<p>11111111.11111111.11111111.11000000</p>
<p>转化为10进制就是<strong>255.255.255.192</strong></p>
<p>CIDR表示法：</p>
<p>它允许你直接指定子网掩码的位数，而不是依赖于IP地址的类别。CIDR表示法用斜杠后跟数字的形式表示子网掩码。</p>
<ul>
<li>
<p>CIDR表示法是通过直接指明网络部分的位数来计算子网掩码。例如，<code>/24</code> 表示前24位是网络位，后8位是主机位。</p>
</li>
<li>
<p>你可以通过CIDR来指定任何IP地址和子网掩码，而不仅仅是A类、B类或C类地址。</p>
</li>
</ul>
<p><code>10.0.0.0/8</code>：表示A类地址 <code>10.0.0.0</code>，子网掩码为 <code>255.0.0.0</code>。</p>
<p><code>172.16.0.0/16</code>：表示B类地址 <code>172.16.0.0</code>，子网掩码为 <code>255.255.0.0</code>。</p>
<p><code>192.168.1.0/24</code>：表示C类地址 <code>192.168.1.0</code>，子网掩码为 <code>255.255.255.0</code>。</p>
<p>主机和子网的地址进行计算：</p>
<p>比如一个子网有10台主机，那么对于这个子网需要的IP地址是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10＋1＋1＋1＝13</span><br></pre></td></tr></table></figure>
<p><strong>注意：加的第一个1是指这个网络连接时所需的网关地址，接着的两个1分别是指网络地址和广播地址</strong></p>
<p>网关也是要占地址的</p>
<p>13小于16（2的四次方）所以主机位是4位。256-16=240</p>
<p>所以子网掩码是<strong>255.255.255.240</strong></p>
<h2 id="网关">网关</h2>
<p>网关实质上是一个网络通向其他网络的IP地址。</p>
<p>比如有网络A和网络B，网络A的IP地址范围为<code>192.168.1.1~192. 168.1.254</code>，子网掩码为<code>255.255.255.0</code>；</p>
<p>网络B的IP地址范围为<code>192.168.2.1~192.168.2.254</code>，子网掩码为<code>255.255.255.0</code>。</p>
<p>而要实现这两个网络之间的通信，则必须通过网关。</p>
<p><strong>所以说，只有设置好网关的IP地址，TCP/IP协议才能实现不同网络之间的相互通信。</strong></p>
<p>如果网络A中的主机发现数据包的目的主机不在本地网络中，就把数据包转发给它自己的网关，再由网关转发给网络B的网关，网络B的网关再转发给网络B的某个主机。网络B向网络A转发数据包的过程。</p>
<p>网关的IP地址是具有路由功能的设备的IP地址，具有路由功能的设备有路由器、启用了路由协议的服务器(实质上相当于一台路由器)、代理服务器(也相当于一台路由器)。</p>
<h1>网络协议</h1>
<p>核心作用：</p>
<ul>
<li>**标准化通信：**网络协议为设备之间的通信提供了统一的标准，确保不同厂商、不同操作系统的设备能够互联互通。</li>
<li>**数据可靠传输：**通过错误检测、数据重传等机制，网络协议确保数据在传输过程中不会丢失或损坏。</li>
<li>**高效路由与寻址：**网络协议定义了如何将数据从源设备发送到目标设备，包括地址分配、路由选择等。</li>
<li>**安全性：**现代网络协议通常包含加密和认证机制，保护数据免受窃听或篡改。</li>
</ul>
<p>关键组成部分：</p>
<ul>
<li><strong>语法:</strong> 定义数据的格式和结构。例如，数据包的头部和尾部如何组织。</li>
<li><strong>语义:</strong> 定义数据的含义。例如，某个字段表示源地址，另一个字段表示目标地址。</li>
<li><strong>时序:</strong> 定义数据发送和接收的顺序。例如，TCP协议的三次握手过程。</li>
<li><strong>网络协议的分层结构:</strong> 网络协议通常按照分层模型组织，最常见的模型是 OSI七层模型 和 TCP/IP四层模型。每一层都有特定的功能和协议。</li>
</ul>
<h2 id="网络通信">网络通信</h2>
<p>网络通信是指通过计算机网络（如互联网）<strong>在不同设备之间传输数据的过程。<strong>这些设备可以是计算机、智能手机、服务器等。网络通信的核心目标是</strong>实现信息的快速、准确和安全传输。</strong></p>
<p>基本要素：</p>
<ul>
<li><strong>发送方（Sender）</strong>：发送数据的设备或应用程序。</li>
<li><strong>接收方（Receiver）</strong>：接收数据的设备或应用程序。</li>
<li><strong>传输介质（Transmission Medium）</strong>：数据在网络中传输的物理路径，如光纤、电缆、无线信号等。</li>
<li><strong>协议（Protocol）</strong>：规定数据如何传输、如何被接收和处理的规则和标准。</li>
</ul>
<p>在网络通信中，数据通常以&quot;包&quot;（Packet）的形式传输。数据封装是指将原始数据按照特定的协议格式打包，添加必要的控制信息（如源地址、目标地址、校验和等）。解封装则是接收方将接收到的数据包还原为原始数据的过程。</p>
<p>传输过程：</p>
<ol>
<li><strong>数据分段</strong>：将大块数据分割成适合传输的小块。</li>
<li><strong>添加头部信息</strong>：在每个数据段前添加协议头部信息，如IP地址、端口号等。</li>
<li><strong>传输</strong>：通过网络传输介质将数据包发送到目标设备。</li>
<li><strong>接收与重组</strong>：接收方接收数据包，并根据头部信息将数据包重组为原始数据。</li>
</ol>
<p>在网络通信中，数据被分割成小块进行传输，这些小块被称为数据包、帧或报文，具体名称取决于所在的网络层次。</p>
<ul>
<li><strong>数据包（Packet）:</strong> 在网络层（如IP协议）中，数据被封装成数据包，包含源地址、目标地址和数据内容。</li>
<li><strong>帧（Frame）:</strong> 在数据链路层（如以太网协议）中，数据包被进一步封装成帧，包含MAC地址和错误检测信息。</li>
<li><strong>报文（Message）:</strong> 在应用层（如HTTP协议）中，数据以报文的形式传输，包含请求或响应的具体内容。</li>
</ul>
<p>网络通信的基本流程：</p>
<ol>
<li><strong>数据封装</strong>
<ul>
<li>应用层生成数据报文。</li>
<li>传输层添加端口号（TCP/UDP）。</li>
<li>网络层添加IP地址（IP）。</li>
<li>数据链路层添加MAC地址（帧）。</li>
<li>物理层将数据转换为比特流。</li>
</ul>
</li>
<li><strong>数据传输</strong>
<ul>
<li>数据通过物理介质（如电缆、光纤）传输。</li>
</ul>
</li>
<li><strong>数据解封装</strong>
<ul>
<li>接收设备逐层解析数据，最终将数据传递给目标应用程序。</li>
</ul>
</li>
</ol>
<h2 id="ARP-RARP协议">ARP/RARP协议</h2>
<p><strong>地址解析协议，即ARP（Address Resolution Protocol），是根据IP地址获取物理地址的一个TCP/IP协议</strong></p>
<p>ARP 把 IP 地址解析为硬件地址</p>
<p>主机发送信息时将包含目标IP地址的ARP请求广播到网络上的所有主机，并接收返回消息，以此确定目标的物理地址；收到返回消息后将该IP地址和物理地址存入本机ARP缓存中并保留一定时间，下次请求时直接查询ARP缓存以节约资源。地址解析协议是建立在网络中各个主机互相信任的基础上的，网络上的主机可以自主发送ARP应答消息，其他主机收到应答报文时不会检测该报文的真实性就会将其记入本机ARP缓存；由此攻击者就可以向某一主机发送伪ARP应答报文，使其发送的信息无法到达预期的主机或到达错误的主机，这就构成了一个ARP欺骗。</p>
<p><strong>ARP命令可用于查询本机ARP缓存中IP地址和MAC地址的对应关系、添加或删除静态对应关系等。</strong></p>
<p><strong>逆地址解析协议，即RARP，功能和ARP协议相对，其将局域网中某个主机的物理地址转换为IP地址</strong></p>
<p>ARP工作流程：</p>
<ul>
<li>
<p><strong>主机A查询ARP缓存</strong>：主机A检查是否有主机B的IP地址和MAC地址映射。如果有，直接使用该映射进行通信。</p>
</li>
<li>
<p><strong>ARP请求广播</strong>：如果ARP缓存中没有对应的映射，主机A会向网络广播ARP请求，询问目标IP（192.168.1.2）的MAC地址，ARP请求包括主机A的IP和MAC地址。</p>
</li>
<li>
<p><strong>主机B接收ARP请求</strong>：网络中的所有主机接收到ARP请求，检查IP地址是否匹配。如果匹配，则继续处理请求；否则丢弃请求。</p>
</li>
<li>
<p><strong>主机B发送ARP回复</strong>：主机B回复ARP请求，发送自己的MAC地址给主机A。</p>
</li>
<li>
<p><strong>主机A更新ARP缓存</strong>：主机A接收到主机B的ARP回复后，更新ARP缓存，并使用主机B的MAC地址进行通信。</p>
</li>
<li>
<p><strong>缓存生存期</strong>：ARP缓存的条目有生存期，生存期过后，主机A需要重新进行ARP过程以更新MAC地址映射。</p>
</li>
</ul>
<p>RARP工作流程：</p>
<ul>
<li>给主机发送一个本地的RARP广播，在此广播包中，声明自己的MAC地址并且请求任何收到此请求的RARP服务器分配一个IP地址；</li>
<li>本地网段上的RARP服务器收到此请求后，检查其RARP列表，查找该MAC地址对应的IP地址；</li>
<li>如果存在，RARP服务器就给源主机发送一个响应数据包并将此IP地址提供给对方主机使用；</li>
<li>如果不存在，RARP服务器对此不做任何的响应；</li>
</ul>
<h2 id="路由选择协议">路由选择协议</h2>
<p>常见的路由选择协议有：RIP协议、OSPF协议。</p>
<p>RIP协议 ：底层是<strong>贝尔曼福特算法</strong>，它选择路由的度量标准（metric)是跳数，最大跳数是<strong>15跳</strong>，如果大于15跳，它就会丢弃数据包。</p>
<p>OSPF协议 ：Open Shortest Path First开放式最短路径优先，底层是<strong>迪杰斯特拉算法</strong>，是链路状态路由选择协议，它选择路由的度量标准是<strong>带宽，延迟</strong>。</p>
<h2 id="tcp-ip">tcp/ip</h2>
<p>TCP/IP协议是Internet最基本的协议、Internet国际互联网络的基础，由网络层的IP协议和传输层的TCP协议组成。通俗而言：<strong>TCP负责发现传输的问题，一有问题就发出信号，要求重新传输，直到所有数据安全正确地传输到目的地。而IP是给因特网的每一台联网设备规定一个地址。</strong></p>
<p>IP层接收由更低层（网络接口层例如以太网设备驱动程序）发来的数据包，并把该数据包发送到更高层—TCP或UDP层；相反，IP层也把从TCP或UDP层接收来的数据包传送到更低层。IP数据包是不可靠的，因为IP并没有做任何事情来确认数据包是否按顺序发送的或者有没有被破坏，IP数据包中含有发送它的主机的地址（源地址）和接收它的主机的地址（目的地址）。</p>
<p>TCP是面向连接的通信协议，是一个<strong>传输层协议</strong>，是一个<strong>双工协议</strong>，这就意味着客户端和服务端可以平等地发送、接收信息。通过<strong>三次握手</strong>建立连接，通讯完成时要通过<strong>四次挥手</strong>拆除连接，这个连接就是一个通道，由于TCP是面向连接的所以只能用于<strong>端到端</strong>（套接字到套接字）的通讯。TCP提供的是一种可靠的<strong>数据流</strong>服务，采用&quot;带重传的肯定确认&quot;技术来实现传输的可靠性。TCP还采用一种称为&quot;滑动窗口&quot;的方式进行流量控制，所谓窗口实际表示接收能力，用以限制发送方的发送速度。<strong>面向字节流</strong>。虽然应用程序与TCP交互是一次一个大小不等的数据块，但<strong>TCP把这些数据看成一连串无结构的字节流，它不保证接收方收到的数据块和发送方发送的数据块具有对应大小关系</strong>，例如，发送方应用程序交给发送方的TCP10个数据块，接收方的TCP可能只用收到的4个数据块字节流交付给上层的应用程序</p>
<h3 id="tcp的可靠性原理">tcp的可靠性原理</h3>
<p>可靠传输有如下两个特点:</p>
<ol>
<li>传输信道无差错,保证传输数据正确;</li>
<li>不管发送方以多快的速度发送数据,接收方总是来得及处理收到的数据;</li>
</ol>
<p>首先，采用三次握手来建立TCP连接，四次握手来释放TCP连接，<strong>从而保证建立的传输信道是可靠的</strong>。</p>
<p>其次，TCP采用了连续ARQ协议（回退N(Go-back-N)；超时自动重传）来保证数据传输的正确性，使用<strong>滑动窗口协议</strong>来保证接方能够及时处理所接收到的数据，进行流量控制。</p>
<p>最后，TCP使用<strong>慢开始、拥塞避免、快重传和快恢复</strong>来进行拥塞控制，避免网络拥塞。</p>
<h3 id="TCP报文段"><strong>TCP报文段</strong></h3>
<p>TCP虽面向字节流，但传送的数据单元为报文段</p>
<p>报文段=首部+数据两部分</p>
<ol>
<li>首部前20个字符固定、后面有4n个字节是根据需而增加的选项</li>
<li>故 TCP首部最小长度 = 20字节</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/cs/wangluo-8011660d-24c8-460f-ac3d-b97ad9c99b13.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.runoob.com/wp-content/uploads/2018/09/1538030297-3779-20150904110054856-961661137.png" alt=""></p>
<p><strong>端口</strong>：</p>
<p>源端口号和目地端口各占16位两个字节，也就是端口的范围是<code>2^16=65535</code></p>
<p>另外1024以下是系统保留的，从1024-65535是用户使用的端口范围（一般常用的某些端口，比如5244,8080）</p>
<p><strong>seq序号</strong>：</p>
<p>占4字节，TCP连接中传送的字节流中的每个字节都按顺序编号。</p>
<p><strong>ack确认号</strong>：4个字节，是期望收到对方下一个报文段的第一个数据字节的序号。</p>
<p>B收到A发送的报文，其序号字段是301，数据长度是200字节，表明B正确收到A发送的到序号500为止的数据（301+200-1=500），B期望收到A下一个数据序号是501，B发送给A的确认报文段中把ack确认号置为501。</p>
<p><strong>数据偏移</strong>：</p>
<p>头部有可选字段，长度不固定，指出TCP报文段的数据起始处距离报文段的起始处有多远。</p>
<p><strong>保留</strong>：保留今后使用的，标记为1</p>
<p><strong>控制位</strong>：由8个标志位构成，每个标志位表示一个控制功能。</p>
<p>其中比较重要的6个：</p>
<ul>
<li><strong>URG紧急指针标志</strong>，为1表示紧急指针有效，为0忽略紧急指针。</li>
<li><strong>ACK确认序号标志</strong>，为1表示确认号有效，为0表示报文不含确认信息，忽略确认号字段，上面的确认号是否有效就是通过该标识控制的。</li>
<li><strong>PSH标志</strong>，为1表示带有push标志的数据，指示接收方在接收到该报文段以后，应尽快将该报文段交给应用程序，而不是在缓冲区排队。</li>
<li><strong>RST重置连接标志</strong>，重置因为主机崩溃或其他原因而出现错误的连接，或用于拒绝非法的报文段或非法的连接。</li>
<li><strong>SYN同步序号</strong>，同步序号，用于建立连接过程，在连接请求中，SYN=1和ACK=0表示该数据段没有使用捎带的确认域，而连接应答捎带一个确认，即SYN=1和ACK=1。。</li>
<li><strong>FIN终止标志</strong>，用于释放连接，为1时表示发送方没有发送了。</li>
</ul>
<p><strong>窗口</strong>：滑动窗口的大小，用来告知发送端接受端缓存大小，以此控制发送端发送数据的速率，从而达到流量控制。</p>
<p><strong>校验和</strong>：奇偶校验，此校验和是对整个的TCP报文段（包括TCP头部和TCP数据），以16位进行计算所得，由发送端计算和存储，接收端进行验证。</p>
<p><strong>紧急指针</strong>：只有控制位中的URG为1时才有效，指出本报文段中的紧急数据的字节数</p>
<p><strong>选项</strong>：其长度可变，定义其他的可选参数</p>
<h3 id="tcp的三次握手和三次挥手"><strong>tcp的三次握手和三次挥手</strong></h3>
<p><strong>三次握手</strong>：用来建立 TCP 连接，确保双方都准备好进行数据传输：</p>
<ol>
<li>客户端发送 SYN 请求，表示希望建立连接。</li>
<li>服务器回复 SYN-ACK，表示同意建立连接。</li>
<li>客户端发送 ACK 确认，连接建立成功。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/cs/wangluo-f6a9438e-4eb8-4573-9ef5-30e07b8c31df.png" alt=""></p>
<p>详细的过程</p>
<p>第一次握手：客户端将TCP报文标志位<code>SYN</code>置为1，随机产生一个序号值<code>seq=J</code>，保存在TCP首部的序列号字段里，指明客户端打算连接的服务器的端口，并将该数据包发送给服务器端，发送完毕后，客户端进入<code>SYN_SENT</code>状态，等待服务器端确认。</p>
<p>第二次握手：服务器端收到数据包后由标志位<code>SYN=1</code>知道客户端请求建立连接，服务器端将TCP报文标志位SYN和ACK都置为1，<code>ack=J+1</code>，随机产生一个序号值<code>seq=K</code>，并将该数据包发送给客户端以确认连接请求，服务器端进入<code>SYN_RCVD</code>状态。</p>
<p>服务器第一次收到客户端的 SYN 之后，就会处于 <code>SYN_RCVD</code>状态，此时双方还没有完全建立其连接，服务器会把此种状态下请求连接放在一个队列里，我们把这种队列称之为<strong>半连接队列</strong>。</p>
<p>服务器发送完<strong>SYN－ACK</strong>包，如果未收到客户确认包，服务器进行首次重传，等待一段时间仍未收到客户确认包，进行第二次重传，如果重传次数超过系统规定的<strong>最大重传次数</strong>，系统将该连接信息从<strong>半连接队列</strong>中删除。</p>
<p>第三次握手：客户端收到确认后，检查ack是否为<code>J+1</code>，ACK是否为1，如果正确则将标志位ACK置为1，<code>ack=K+1</code>，并将该数据包发送给服务器端，服务器端检查ack是否为<code>K+1</code>，ACK是否为1，如果正确则连接建立成功，客户端和服务器端进入<code>ESTABLISHED</code>状态，完成三次握手，随后客户端与服务器端之间可以开始传输数据了。</p>
<p><strong>全连接队列</strong>就是三次握手已经完成了，建立起的连接就会放到全连接队列里，队列满了就会出现丢包。</p>
<p>其实第三次握手的时候，是可以携带数据的，也就是说，第一次、第二次握手不可以携带数据，而<strong>第三次握手是可以携带数据</strong>的。</p>
<p>其中上面的ack和ACK不是同一个概念</p>
<ul>
<li>小写的ack代表的是头部的确认号Acknowledge number， 缩写ack，是对上一个包的序号进行确认的号，<code>ack=seq+1</code>。</li>
<li>大写的ACK，则是我们上面说的TCP首部的标志位，用于标志的TCP包是否对上一个包进行了确认操作，如果确认了，则把ACK标志位设置成1。</li>
</ul>
<p><strong>四次挥手</strong>：用来关闭连接，确保双方都完成数据的传输后才断开连接：</p>
<ol>
<li>客户端发送 FIN 请求，表示数据发送完毕，准备关闭连接。</li>
<li>服务器回复 ACK，确认收到客户端的关闭请求。</li>
<li>服务器发送 FIN 请求，表示服务器也准备关闭连接。</li>
<li>客户端回复 ACK，连接正式关闭。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/cs/wangluo-4a5e455f-5cf8-47a6-8fe4-a4c83a445f77.png" alt=""></p>
<p>挥手请求可以是Client端，也可以是Server端发起的，我们假设是Client端发起：</p>
<p>第一次挥手：Client端发起挥手请求，向Server端发送标志位是FIN报文段，设置序列号seq，此时，Client端进入<code>FIN_WAIT_1</code>状态，这表示Client端没有数据要发送给Server端了。</p>
<p>第二次挥手：Server端收到了Client端发送的FIN报文段，向Client端返回一个标志位是ACK的报文段，ack设为seq加1，Client端进入<code>FIN_WAIT_2</code>状态，Server端告诉Client端，我确认并同意你的关闭请求。</p>
<p>第三次挥手：Server端向Client端发送标志位是FIN的报文段，请求关闭连接，同时Client端进入<code>LAST_ACK</code>状态。</p>
<p>第四次挥手：Client端收到Server端发送的FIN报文段，向Server端发送标志位是ACK的报文段，然后Client端进入<code>TIME_WAIT</code>状态，Server端收到Client端的ACK报文段以后，就关闭连接，此时，Client端等待<strong>2MSL</strong>的时间后依然没有收到回复，则证明Server端已正常关闭，那好，Client端也可以关闭连接了。</p>
<p><strong>MSL</strong>：报文段最大生存时间，它是任何报文段被丢弃前在网络内的最长时间。</p>
<p>为什么要三次握手？</p>
<p>在只有两次&quot;握手&quot;的情形下，假设Client想跟Server建立连接，但是<strong>却因为中途连接请求的数据报丢失了</strong>，故Client端不得不重新发送一遍；这个时候Server端仅收到一个连接请求，因此可以正常的建立连接。但是，有时候Client端重新发送请求不是因为数据报丢失了，而是有可能数据传输过程因为网络并发量很大在某结点被<strong>阻塞</strong>了，这种情形下<strong>Server端将先后收到2次请求，并持续等待两个Client请求向他发送数据</strong>…问题就在这里，**Cient端实际上只有一次请求，而Server端却有2个响应，**极端的情况可能由于Client端多次重新发送请求数据而导致Server端最后建立了N多个响应在等待，<strong>因而造成极大的资源浪费</strong>！所以，&quot;三次握手&quot;很有必要！</p>
<p>为什么要四次挥手？</p>
<p>试想一下，假如现在你是客户端你想断开跟Server的所有连接该怎么做？第一步，你自己先停止向Server端发送数据，并等待Server的回复。但事情还没有完，虽然你自身不往Server发送数据了，但是因为你们之前已经建立好平等的连接了，所以此时他也有主动权向你发送数据；故Server端还得终止主动向你发送数据，并等待你的确认。其实，说白了就是<strong>保证双方的一个合约的完整执行</strong>！</p>
<p>使用TCP的协议：FTP（文件传输协议）、Telnet（远程登录协议）、SMTP（简单邮件传输协议）、POP3（和SMTP相对，用于接收邮件）、HTTP协议等。</p>
<h3 id="Socket">Socket</h3>
<p>即套接字，是应用层 与 <code>TCP/IP</code> 协议族通信的中间软件抽象层，表现为一个封装了 TCP / IP协议族 的编程接口（API）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/cs/wangluo-eff20ef6-9d35-4075-8c53-ab52c7a46ac7.png" alt=""></p>
<p><code>Socket</code>不是一种协议，而是一个编程调用接口（<code>API</code>），属于传输层（主要解决数据如何在网络中传输）</p>
<p>对用户来说，只需调用Socket去组织数据，以符合指定的协议，即可通信</p>
<h2 id="upd">upd</h2>
<p><strong>UDP用户数据报协议，是面向无连接的通讯协议，UDP数据包括目的端口号和源端口号信息，由于通讯不需要连接，所以可以实现广播发送。</strong></p>
<p>UDP通讯时不需要接收方确认，属于不可靠的传输，可能会出现丢包现象，实际应用中要求程序员编程验证。</p>
<p>UDP与TCP位于同一层，但它不管数据包的顺序、错误或重发。因此，UDP不被应用于那些使用虚电路的面向连接的服务，UDP主要用于那些面向查询—应答的服务，例如NFS。相对于FTP或Telnet，这些服务需要交换的信息量较小。</p>
<p>每个UDP报文分UDP报头和UDP数据区两部分。报头由<strong>四个16位长</strong>（2字节）字段组成，分别说明该报文的<strong>源端口、目的端口、报文长度以及校验值</strong>。UDP报头由4个域组成，其中每个域各占用2个字节，具体如下：</p>
<ul>
<li>（1）源端口号；</li>
<li>（2）目标端口号；</li>
<li>（3）数据报长度；</li>
<li>（4）校验值。</li>
</ul>
<p><strong>运输层提供应用进程之间的逻辑通信</strong>，运输层之间的通信并不是真正在两个运输层之间直接传输数据。是端对端之间的应用进程传输</p>
<p>使用UDP协议包括：TFTP（简单文件传输协议）、SNMP（简单网络管理协议）、DNS（域名解析协议）、NFS、BOOTP。</p>
<p>运输层的端口号分为服务器端使用的端口号（0˜1023 指派给熟知端口，1024˜49151 是登记端口号）和客户端暂时使用的端口号（49152˜65535）</p>
<h2 id="upd和tcp-ip协议的特点对比">upd和tcp/ip协议的特点对比</h2>
<p>UDP 的主要特点是 ① <strong>无连接</strong> ② 尽最大努力交付 ③ 面向报文 ④ 无拥塞控制 ⑤ 支持一对一，一对多，多对一和多对多的交互通信 ⑥ 首部开销小（只有四个字段：源端口，目的端口，长度和检验和）<strong>upd是不可靠的</strong></p>
<p>TCP 的主要特点是 ① <strong>面向连接</strong> ② 每一条 TCP 连接只能是一对一的 ③ 提供<strong>可靠</strong>交付 ④ 提供全双工通信 ⑤ 面向字节流</p>
<h2 id="dns">dns</h2>
<p>DNS是域名系统(DomainNameSystem)的缩写，该系统用于命名组织到域层次结构中的计算机和网络服务，<strong>可以简单地理解为将URL转换为IP地址</strong>。<strong>域名是由圆点分开一串单词或缩写组成的</strong>，每一个域名都对应一个惟一的IP地址，在Internet上域名与IP地址之间是一一对应的，DNS就是进行域名解析的服务器。DNS命名用于Internet等TCP/IP网络中，通过用户友好的名称查找计算机和服务。</p>
<p>我们可以通过windows的ping命令来查找域名所对应的ip地址</p>
<h3 id="dns解析">dns解析</h3>
<p>A记录:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">定义www.example.com的ip地址</span><br><span class="line">www.example.com.     IN     A     139.18.28.5;</span><br></pre></td></tr></table></figure>
<p><code>www.example.com</code> 是要解析的域名。</p>
<p>A 是记录的类型，A 记录代表着这是一条用于解析 IPv4 地址的记录。</p>
<p>从这条记录可知，<code>www.example.com</code>的 IP 地址是 139.18.28.5。</p>
<p>CNAME记录：</p>
<p>CNAME用于<strong>定义域名的别名</strong>，如下面这条 DNS 记录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">定义www.example.com的别名</span><br><span class="line">a.example.com.          IN     CNAME   b.example.com.</span><br></pre></td></tr></table></figure>
<p>这条 DNS 记录定义了 <code>a.example.com</code> 是 <code>b.example.com</code> 的别名。</p>
<p>用户在浏览器中输入 <code>a.example.com</code> 时候，通过 DNS 查询会知道 <code>a.example.com</code> 是 <code>b.example.com</code> 的别名，因此需要实际 IP 的时候，会去拿 <code>b.example.com</code> 的 A 记录。</p>
<p>当你想把一个网站迁移到新域名，旧域名仍然保留的时候；还有当你想将自己的静态资源放到 CDN 上的时候，CNAME 就非常有用。</p>
<p>AAAA记录：</p>
<p>A 记录是域名和 IPv4 地址的映射关系。和 A 记录类似，AAAA 记录则是域名和 IPv6 地址的映射关系。</p>
<p>MX记录：</p>
<p>MX 记录是邮件记录，用来描述邮件服务器的域名。</p>
<p>比如说，发送一封邮件到 <code>xiaoming@xiaoflyfish.com</code>，那么如何知道哪个 IP 地址是邮件服务器呢？</p>
<p>这个时候就可以用到下面这条 MX 记录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IN MX mail.xiaoflyfish.com</span><br></pre></td></tr></table></figure>
<p><code>mail.xiaoflyfish.com</code> 的 IP 地址可以通过查询 <code>mail.xiaoflyfishcom </code>的 A 记录和 AAAA 记录获得。</p>
<p>NS记录：</p>
<p>NS记录是描述 DNS 服务器网址。从 DNS 的存储结构上说，Name Server 中含有权威 DNS 服务的目录。</p>
<p>也就是说，NS 记录指定哪台 Server 是回答 DNS 查询的权威域名服务器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.com.     IN      NS      ns1.a.com.</span><br><span class="line">a.com.     IN      NS      ns2.a.com.</span><br></pre></td></tr></table></figure>
<p>当解析 <code>a.com</code> 地址时，我们看到 <code>a.com</code> 有两个 NS 记录，所以确定最终 <code>a.com</code> 的记录在 <code>ns1.a.com</code> 和 <code>ns2.a.com</code> 上。</p>
<p>从设计上看，ns1 和 ns2 是网站 <code>a.com</code> 提供的智能 DNS 服务器，可以提供负载均衡、分布式 Sharding 等服务。</p>
<p>比如当一个北京的用户想要访问 <code>a.com</code> 的时候，ns1 看到这是一个北京的 IP 就返回一个离北京最近的机房 IP。</p>
<p>上面代码中 <code>a.com</code> 配置了两个 NS 记录。</p>
<p>通常 NS 不会只有一个，这是为了保证高可用，一个挂了另一个还能继续服务。</p>
<p>通常数字小的 NS 记录优先级更高，也就是 ns1 会优先于 ns2 响应。</p>
<p>配置了上面的 NS 记录后，如果还配置了 <code>a.com</code> 的 A 记录，那么这个 A 记录会被 NS 记录覆盖。</p>
<h2 id="nat">nat</h2>
<p>NAT网络地址转换(Network Address Translation)属接入广域网(WAN)技术，是一种将<strong>私有</strong>（保留）地址转化为<strong>合法IP地址</strong>的转换技术，它被广泛应用于各种类型Internet接入方式和各种类型的网络中。原因很简单，NAT不仅完美地解决了lP地址不足的问题，而且还能够有效地避免来自网络外部的攻击，隐藏并保护网络内部的计算机。</p>
<h2 id="dhcp">dhcp</h2>
<p>DHCP动态主机设置协议（Dynamic Host Configuration Protocol）是一个局域网的网络协议，使用<strong>UDP协议工作</strong>，主要有两个用途：<strong>给内部网络或网络服务供应商自动分配IP地址</strong>，<strong>给用户或者内部网络管理员作为对所有计算机作中央管理的手段</strong>。</p>
<h2 id="http">http</h2>
<p>超文本传输协议（HTTP，HyperText Transfer Protocol)是互联网上应用最为广泛的一种网络协议。所有的WWW文件都必须遵守这个标准。</p>
<h3 id="常见的http方法">常见的http方法</h3>
<p><strong>GET</strong>：请求服务器返回指定的资源（例如网页）。是从服务器上获取资源，传送的数据量小，不能大于2kb。</p>
<p><strong>POST</strong>：向服务器提交数据（例如表单数据）。向服务器提交资源，传送的数据量较大，一般默认为不受限制。</p>
<p>GET请求与Post请求区别：</p>
<ol>
<li>GET 请求的请求参数是添加到 head 中，可以在 url 中可以看到；POST 请求的请求参数是添加到body中，在url 中不可见。</li>
<li>请求的url有长度限制，这个限制由浏览器和 web 服务器决定和设置的，例如IE浏览器对 URL的最大限制为<strong>2083</strong>个字符（2kb），如果超过这个数字，提交按钮没有任何反应，因为GET请求的参数是添加到URL中，所以GET请求的URL的长度限制需要将请求参数长度也考虑进去。而POST请求不用考虑请求参数的长度。</li>
<li><strong>GET</strong>请求产生<strong>一个</strong>数据包; <strong>POST</strong>请求产生<strong>2个</strong>数据包，在火狐浏览器中，产生一个数据包，这个区别点在于浏览器的请求机制，先发送请求头，再发送请求体，因为GET没有请求体，所以就发送一个数据包，而POST包含请求体，所以发送两次数据包，但是由于火狐机制不同，所以发送一个数据包。</li>
<li>GET 请求会被浏览器主动缓存下来，留下历史记录，而 POST 默认不会。</li>
<li>GET是幂等的，而POST不是(幂等表示执行相同的操作，结果也是相同的)</li>
<li>GET是获取数据，POST是修改数据</li>
</ol>
<p><strong>PUT</strong>：更新资源。</p>
<p><strong>DELETE</strong>：删除资源。</p>
<p><strong>CONNECT</strong>:HTTP/1.1 协议中预留给能够将连接改为管道方式的代理服务器。</p>
<p><strong>OPTIONS</strong>:允许客户端查看服务器的性能。</p>
<p><strong>TRACE</strong>:回显服务器收到的请求，主要用于测试或诊断。</p>
<p><strong>PATCH</strong>:是对 PUT 方法的补充，用来对已知资源进行局部更新 。</p>
<p>根据http规范,get用于信息获取，应该是<strong>安全的</strong>和<strong>幂等的</strong></p>
<ul>
<li>所谓 <strong>安全的</strong> 意味着该操作用于获取信息而非修改信息。换句话说，GET请求一般不应产生副作用。就是说，它仅仅是获取资源信息，就像数据库查询一样，不会修改，增加数据，不会影响资源的状态。</li>
<li><strong>幂等</strong> 的意味着对同一URL的多个请求应该返回同样的结果。</li>
</ul>
<h3 id="http状态码">http状态码</h3>
<p>状态码由三位数字构成，第一位定义响应的类别</p>
<p><strong>1xx</strong>：代表成功表示请求以接收，继续处理</p>
<p>HTTP/1.1加入了一个新的状态码100。</p>
<p>客户端事先发送一个只带头域的请求，<strong>如果服务器因为权限拒绝了请求，就回送响应码401</strong>（Unauthorized）；</p>
<p><strong>如果服务器接收此请求就回送响应码100</strong>，客户端就可以继续发送带实体的完整请求了。</p>
<p>100状态代码的使用，允许客户端在发request消息body之前先用request header试探一下server，看server要不要接收request body，再决定要不要发request body。</p>
<p><strong>2xx</strong>：成功，表示请求已经被成功接收、理解、接受，例如 200 OK 表示请求成功。</p>
<ul>
<li>200 OK 是最常见的成功状态码，表示一切正常。如果是非 HEAD 请求，服务器返回的响应头都会有 body 数据。</li>
<li>204 No Content 也是常见的成功状态码，与 200 OK 基本相同，<strong>但响应头没有 body 数据。</strong></li>
<li>206 Partial Content 是应用于 HTTP 分块下载或断电续传，表示<strong>响应返回的 body 数据并不是资源的全部</strong>，而是其中的一部分，也是服务器处理成功的状态。</li>
</ul>
<p><strong>3xx</strong>：重定向，例如 301 Moved Permanently 表示资源已永久移动。</p>
<ul>
<li>
<p>301 Moved Permanently 表示<strong>永久重定向</strong>，说明请求的资源已经不存在了，需改用新的 URL 再次访问，搜索引擎在抓取新内容的同时也将旧的网址交换为重定向之后的网址。</p>
</li>
<li>
<p>302 Moved Permanently 表示<strong>临时重定向</strong>，说明请求的资源还在，但暂时需要用另一个 URL 来访问，搜索引擎会抓取新的内容而保存旧的网址。</p>
<p>301 和 302 都会在响应头里使用字段 Location，指明后续要跳转的 URL，浏览器会自动重定向新的 URL。</p>
</li>
<li>
<p>304 Not Modified不具有跳转的含义，表示资源未修改，重定向已存在的缓冲文件，也称<strong>缓存重定向</strong>，用于缓存控制。</p>
</li>
</ul>
<p><strong>4xx</strong>：客户端发送的<strong>报文有误</strong>，例如 404 Not Found 表示请求的资源不存在。</p>
<ul>
<li>400 Bad Request表示客户端请求的报文有错误。</li>
<li>401 Unauthorized：缺失或错误的认证，这个状态代码必须和WWW-Authenticate报头域一起使用。</li>
<li>403 Forbidden表示<strong>服务器禁止访问资源</strong>，并不是客户端的请求出错。</li>
<li>404 Not Found表示请求的资源在服务器上不存在或未找到，所以无法提供给客户端。</li>
</ul>
<p><strong>5xx</strong>：状态码表示客户端请求报文正确，但是<strong>服务器处理时内部发生了错误</strong>，服务器错误，例如 500 Internal Server Error 表示服务器发生错误。</p>
<ul>
<li>501 Not Implemented 表示客户端请求的功能还不支持。</li>
<li>502 Bad Gateway 通常是服务器作为<strong>网关或代理</strong>时返回的错误码，表示服务器自身工作正常，访问<strong>后端服务器</strong>发生了错误。</li>
<li>503 Service Unavailable 表示服务器当前很忙，暂时无法响应服务器。</li>
<li>504 Gateway Timeout：<strong>网关超时</strong>，由作为代理或网关的服务器使用，表示不能及时地从远程服务器获得应答。</li>
</ul>
<h3 id="host字段">host字段</h3>
<p>在HTTP1.0中认为每台服务器都绑定一个唯一的IP地址，因此，请求消息中的URL并没有传递主机名，但随着虚拟主机技术的发展，在一台物理服务器上可以存在多个虚拟主机，并且它们共享一个IP地址。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /index.html HTTP/1.0</span><br></pre></td></tr></table></figure>
<p>HTTP1.1的请求消息和响应消息都应支持Host头域，且请求消息中如果没有Host头域会报告一个错误（400 Bad Request）。</p>
<p><strong>服务器应当支持 Host 头字段</strong>，用于处理多个虚拟主机共享同一 IP 地址的情况。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /index.html HTTP/1.1</span><br><span class="line">Host: www.example.com</span><br></pre></td></tr></table></figure>
<p>在这个请求中，<code>Host: www.example.com</code> 告诉服务器，该请求是针对 <code>www.example.com</code> 这个主机的，即便该服务器托管多个网站（如 <code>example.net</code>、<code>test.com</code>），它也可以正确解析请求。</p>
<p>此外，服务器应该接受以绝对路径标记的资源请求。</p>
<p>HTTP/1.1 允许请求中使用<strong>绝对 URI（absolute URI）</strong>，即完整 URL，包括协议、主机名和路径。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET http://www.example.com/index.html HTTP/1.1</span><br><span class="line">Host: www.example.com</span><br></pre></td></tr></table></figure>
<h3 id="https和http的区别">https和http的区别</h3>
<p>HTTPS 在 HTTP 上加入了 SSL/TLS 协议，通过<strong>加密保护数据的机密性和完整性</strong>，防止中间人攻击。</p>
<p>https更加安全，对搜索引擎更友好</p>
<p>其中http默认为80port，https默认443port</p>
<p>https基于<strong>传输层</strong>，http基于<strong>应用层</strong></p>
<p>https在浏览器显示绿色安全锁，http则没有</p>
<h3 id="请求报文">请求报文</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/cs/wangluo-3c00598c-43c2-44cd-96c6-ee4d40b97abd.png" alt=""></p>
<p>HTTP 请求报文由3部分组成(请求行+请求头+请求体)</p>
<p><strong>常见的HTTP报文头属性</strong></p>
<ul>
<li>
<p>Accpet</p>
<p>告诉服务端，客户端接收什么类型的响应</p>
</li>
<li>
<p>Referer</p>
<p>表示这是请求是从哪个URL进来的,比如想在网上购物，但是不知道选择哪家电商平台，你就去问度娘，说哪家电商的东西便宜啊，然后一堆东西弹出在你面前，第一给就是某宝，当你从这里进入某宝的时候，这个请求报文的Referer就是：<a target="_blank" rel="noopener" href="https://javabetter.cn/cs/www.baidu.com">www.baidu.com</a></p>
</li>
<li>
<p>Cache-Control</p>
<p>对缓存进行控制，如一个请求希望响应的内容在客户端缓存一年，或不被缓可以通过这个报文头设置</p>
</li>
<li>
<p>Accept-Encoding</p>
<p>这个属性是用来告诉服务器能接受什么编码格式，包括字符编码,压缩形式(一般都是压缩形式)</p>
<p>例如:<code>Accept-Encoding:gzip, deflate</code>(这两种都是压缩格式)</p>
</li>
<li>
<p>Host</p>
<p>指定要请求的资源所在的主机和端口</p>
</li>
<li>
<p>User-Agent：告诉服务器，客户端使用的操作系统、浏览器版本和名称</p>
</li>
<li>
<p>Connection</p>
</li>
</ul>
<p>​	决定当前事务（三次握手和四次挥手）完成后，是否关闭网络连接。</p>
<ul>
<li>
<p>持久连接，事务完成后不关闭网络连接 ：<code> Connection: keep-alive</code></p>
</li>
<li>
<p>非持久连接，事务完成后关闭网络连接： <code>Connection: close</code></p>
</li>
</ul>
<h3 id="响应报文">响应报文</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/cs/wangluo-58884113-14dc-4cca-a63e-3320f31a4da5.png" alt=""></p>
<p>响应报文与请求报文一样，由三个部分组成(响应行,响应头,响应体)</p>
<ul>
<li>
<p>Cache-Control</p>
<p>响应输出到客户端后，服务端通过该属性告诉客户端该怎么控制响应内容的缓存</p>
</li>
<li>
<p>ETag</p>
<p>表示你请求资源的版本，如果该资源发生啦变化，那么这个属性也会跟着变</p>
</li>
<li>
<p>Location</p>
<p>在重定向中或者创建新资源时使用</p>
</li>
<li>
<p>Set-Cookie</p>
<p>服务端可以设置客户端的cookie</p>
</li>
</ul>
<h2 id="ssl-tls">ssl/tls</h2>
<p>SSL（Secure Sockets Layer，安全套接字层）和 TLS（Transport Layer Security，传输层安全协议）是用于<strong>保障网络通信安全</strong>的加密协议。TLS 是 SSL 的后续版本，TLS 1.0 基于 SSL 3.0 发展而来，目前<strong>TLS 已经取代 SSL</strong>，最新版本是 <strong>TLS 1.3</strong>。</p>
<p>作用：</p>
<p><strong>加密</strong>：防止数据被窃听，确保传输的机密性。</p>
<p><strong>完整性</strong>：防止数据被篡改，确保数据完整性。</p>
<p><strong>身份验证</strong>：通过证书验证服务器（可选客户端）身份，防止中间人攻击。</p>
<h3 id="工作流程">工作流程</h3>
<p><strong>客户端hello</strong></p>
<p>客户端向服务器发送 <code>ClientHello</code> 消息，包含：</p>
<ul>
<li>支持的 TLS 版本（如 TLS 1.2、TLS 1.3）</li>
<li>支持的加密算法（如 AES、RSA、ECDHE 等）</li>
<li>一个随机数（用于后续密钥生成）</li>
</ul>
<p><strong>服务器hello</strong></p>
<ul>
<li>
<p>服务器响应</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerHello</span><br></pre></td></tr></table></figure>
<p>消息，包含：</p>
<ul>
<li>选定的 TLS 版本和加密算法</li>
<li>服务器证书（包含公钥）</li>
<li>一个随机数</li>
</ul>
</li>
</ul>
<p><strong>密钥交换</strong>：</p>
<ul>
<li>TLS 1.2 及更早版本：
<ul>
<li>服务器的证书中包含公钥，客户端使用该公钥加密一个随机密钥并发送给服务器（RSA 密钥交换）。</li>
<li>也可使用椭圆曲线 Diffie-Hellman（ECDHE）生成共享密钥。</li>
</ul>
</li>
<li>TLS 1.3（优化握手）：
<ul>
<li>直接使用 ECDHE 进行密钥交换，减少握手步骤，提高安全性。</li>
</ul>
</li>
</ul>
<p><strong>证书验证：</strong></p>
<p>客户端验证服务器证书是否合法（CA 颁发、未过期等）。</p>
<p>可选地，服务器也可以要求客户端提供证书进行身份验证（双向 TLS）。</p>
<p><strong>对称密钥生成：</strong></p>
<p>双方根据交换的随机数和密钥交换算法，生成会话密钥。</p>
<p>后续数据通信使用 <strong>对称加密算法</strong>（如 AES）加密，提高效率。</p>
<p><strong>安全通信：</strong></p>
<p>双方交换 <code>Finished</code> 消息，表示握手完成。</p>
<p>之后所有通信数据都使用协商出的密钥进行加密传输。</p>
<p><strong>使用场景</strong></p>
<p>HTTPS（安全网站访问）</p>
<p>邮件加密（SMTP、IMAP、POP3）</p>
<p>VPN 连接</p>
<p>安全的消息传输（如 WhatsApp、Telegram）</p>
<h2 id="ftp">ftp</h2>
<p>FTP（File Transfer Protocol，文件传输协议）是一种用于在网络上传输文件的协议。</p>
<p>FTP 允许用户从一台计算机（客户端）向另一台计算机（服务器）<strong>上传或下载文件</strong>。</p>
<p>流程：</p>
<ul>
<li>客户端连接到服务器的 <strong>21</strong> 端口（默认的控制连接端口）。</li>
<li>服务器返回状态码 220，表示服务已就绪。</li>
<li>客户端发送用户名（USER 命令），服务器返回 331，表示需要密码。</li>
<li>客户端发送密码（PASS 命令），服务器返回 230，表示登录成功。</li>
</ul>
<p>文件传输分为两个模式</p>
<p>一个是主动模式:服务器主动连接到客户端的数据端口。</p>
<ul>
<li>客户端发送 PORT 命令，告知服务器自己的 IP 地址和数据端口。</li>
<li>服务器连接到客户端的数据端口，开始传输文件。</li>
</ul>
<p>另一个是被动模式：客户端连接到服务器的数据端口。</p>
<ul>
<li>客户端发送 <strong>PASV</strong> 命令，请求进入被动模式。</li>
<li>服务器返回自己的 IP 地址和数据端口。</li>
<li>客户端连接到服务器的数据端口，开始传输文件。</li>
</ul>
<p>ftp自己本身是并不安全的，因为传输过程中使用明文传输用户名和密码等，所以出现了替代品</p>
<ul>
<li><strong>SFTP</strong>：基于 SSH 的文件传输协议，加密传输数据。</li>
<li><strong>FTPS</strong>：基于 SSL/TLS 的 FTP，加密传输数据。</li>
</ul>
<h2 id="ssh">ssh</h2>
<p>SSH（Secure Shell，安全外壳协议）是一种用于安全远程登录和其他网络服务的加密协议。</p>
<p>SSH 通过加密通信来保护数据在传输过程中的安全性，广泛应用于系统管理、文件传输和远程命令执行等场景。</p>
<p>流程：</p>
<ul>
<li>客户端连接到服务器的 <strong>22</strong> 端口（默认的 SSH 端口）。</li>
<li>服务器发送自己的公钥给客户端。</li>
<li>客户端验证服务器公钥（通常通过已知的主机密钥指纹）。</li>
<li>客户端和服务器协商加密算法（如 AES、RSA 等）。</li>
<li>客户端生成一个会话密钥，用服务器的公钥加密后发送给服务器。</li>
<li>双方使用会话密钥加密后续通信。</li>
</ul>
<h2 id="smtp">smtp</h2>
<p>SMTP（Simple Mail Transfer Protocol，简单邮件传输协议）是一种用于发送电子邮件的网络协议。</p>
<p>SMTP 是互联网上电子邮件传输的核心协议之一，负责将邮件从发送方传递到接收方的邮件服务器。</p>
<p><strong>发送邮件和传递邮件</strong></p>
<p>连接建立：</p>
<ul>
<li>户端连接到服务器的 25 端口（默认的 SMTP 端口）。</li>
<li>服务器返回状态码 220，表示服务已就绪。</li>
<li>客户端发送 HELO 或 EHLO 命令，告知服务器自己的域名。</li>
<li>服务器返回状态码 250，表示命令成功。</li>
</ul>
<p>smtp本身也是不安全的，因为使用过程中也是使用明文传输。可以使用下面的来代替</p>
<ul>
<li><strong>STARTTLS</strong>：将明文连接升级为加密连接，使用 TLS/SSL 加密数据。</li>
<li><strong>SMTP AUTH</strong>：通过身份验证机制（如 PLAIN、LOGIN）验证用户身份。</li>
</ul>
<h2 id="数字签名">数字签名</h2>
<p>网络传输过程中需要经过很多中间节点，虽然数据无法被解密，但可能被篡改</p>
<p>数字签名校验数据的完整性</p>
<p>数字签名有两种功效：</p>
<ul>
<li>能确定消息确实是由发送方签名并发出来的，因为别人假冒不了发送方的签名。</li>
<li>数字签名能确定消息的完整性，证明数据是否未被篡改过。</li>
</ul>
<p>将一段文本先用Hash函数生成消息摘要，然后用发送者的私钥加密生成数字签名，与原文文一起传送给接收者</p>
<p>接收者只有用发送者的公钥才能解密被加密的摘要信息，然后用HASH函数对收到的原文产生一个摘要信息，与上一步得到的摘要信息对比。</p>
<p>如果相同，则说明收到的信息是完整的，在传输过程中没有被修改，否则说明信息被修改过，因此数字签名能够验证信息的完整性。</p>
<h2 id="cookie和session">cookie和session</h2>
<p>Session 是<strong>基于Cookie 实现</strong>的另一种记录服务端和客户端会话状态的机制。</p>
<p>Session 是存储在服务端，而 SessionId 会被存储在客户端的 Cookie 中。</p>
<p>Session的认证过程：</p>
<ol>
<li>客户端第一次发送请求到服务端，服务端根据信息创建对应的 Session，并在响应头返回 SessionID</li>
<li>客户端接收到服务端返回的 SessionID 后，会将此信息存储在 Cookie 上，同时会记录这个 SessionID 属于哪个域名</li>
<li>当客户端再次访问服务端时，请求会自动判断该域名下是否存在 Cookie 信息，如果有则发送给服务端，服务端会从 Cookie 中拿到 SessionID，再根据 SessionID 找到对应的 Session，如果有对应的 Session 则通过，继续执行请求，否则就中断</li>
</ol>
<p><strong>Cookie和Session的区别</strong></p>
<ol>
<li>安全性，因为 Cookie 可以通过客户端修改，而 Session 只能在服务端设置，所以安全性比 Cookie 高，一般会用于验证用户登录状态</li>
<li>适用性，Cookie 只能存储字符串数据，而 Session 可以存储任意类型数据</li>
<li>有效期，Cookie 可以设置任意时间有效，而 Session 一般失效时间短</li>
</ol>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407230955363.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407230955363.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">mengnankkzhou</div><div class="post-copyright__author_desc">不要走捏</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.tokenlen.top/2025/02/23/net2/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://blog.tokenlen.top/2025/02/23/net2/')">计算机网络基础</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.tokenlen.top/2025/02/23/net2/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=计算机网络基础&amp;url=https://blog.tokenlen.top/2025/02/23/net2/&amp;pic=https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/20250126175712180.jpg?_r_=64b66b16-e3f7-451d-55f6-c6cfda765608" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.tokenlen.top" target="_blank">mengnankkのblog</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/408/"><span class="categoryes-punctuation"> <i class="anzhiyufont anzhiyu-icon-inbox"></i></span>408<span class="categoryesPageCount">23</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/net/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>net<span class="tagsPageCount">3</span></a></div></div><div class="post_share"><div class="social-share" data-image="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221837601.jpeg?_r_=f9c379c1-1009-af82-3eab-bedbd29a80d4" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/02/01/en6/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202410051722381.jpg?_r_=29c48c9a-5bb9-ff3c-2db2-a483707e522c" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">English二月篇</div></div></a></div><div class="next-post pull-right"><a href="/2025/02/25/sql2/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221837448.jpg?_r_=73040cb6-6f47-77e3-5bc8-7b40eb7ed144" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">sql原理基础概念</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/03/06/net3/" title="计算机网络重要问题总结"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221837447.jpg?_r_=2bf2c2f9-666a-fe0e-519f-9b2ba5114f3a" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-06</div><div class="title">计算机网络重要问题总结</div></div></a></div><div><a href="/2025/01/13/net1/" title="计算机网络-七层体系结构"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/20250126175712177.jpg?_r_=6bbd51c4-de23-1975-c494-5a6086b8502f" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-01-13</div><div class="title">计算机网络-七层体系结构</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-switch"><span class="first-comment">Twikoo</span><span id="switch-btn"></span><span class="second-comment">Valine</span></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div class="vcomment" id="vcomment"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407230955363.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description">清风拂柳影，碧水映花香。</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">mengnankkzhou</h1><div class="author-info__desc">不要走捏</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/mengnankkkk" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/440831872" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202410021212939.jpg) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E6%96%B9%E5%BC%8F"><span class="toc-number">1.1.</span> <span class="toc-text">传输方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.2.</span> <span class="toc-text">分组交换</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">数据在不同层的称呼</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80"><span class="toc-number">3.1.</span> <span class="toc-text">IP地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="toc-number">3.2.</span> <span class="toc-text">子网掩码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%E7%9A%84%E8%AE%A1%E7%AE%97"><span class="toc-number">3.2.1.</span> <span class="toc-text">子网掩码的计算</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E5%85%B3"><span class="toc-number">3.3.</span> <span class="toc-text">网关</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">网络协议</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1"><span class="toc-number">4.1.</span> <span class="toc-text">网络通信</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ARP-RARP%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.2.</span> <span class="toc-text">ARP&#x2F;RARP协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.3.</span> <span class="toc-text">路由选择协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tcp-ip"><span class="toc-number">4.4.</span> <span class="toc-text">tcp&#x2F;ip</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%80%A7%E5%8E%9F%E7%90%86"><span class="toc-number">4.4.1.</span> <span class="toc-text">tcp的可靠性原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E6%8A%A5%E6%96%87%E6%AE%B5"><span class="toc-number">4.4.2.</span> <span class="toc-text">TCP报文段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E7%9A%84%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%92%8C%E4%B8%89%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="toc-number">4.4.3.</span> <span class="toc-text">tcp的三次握手和三次挥手</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Socket"><span class="toc-number">4.4.4.</span> <span class="toc-text">Socket</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#upd"><span class="toc-number">4.5.</span> <span class="toc-text">upd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#upd%E5%92%8Ctcp-ip%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9%E5%AF%B9%E6%AF%94"><span class="toc-number">4.6.</span> <span class="toc-text">upd和tcp&#x2F;ip协议的特点对比</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dns"><span class="toc-number">4.7.</span> <span class="toc-text">dns</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dns%E8%A7%A3%E6%9E%90"><span class="toc-number">4.7.1.</span> <span class="toc-text">dns解析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nat"><span class="toc-number">4.8.</span> <span class="toc-text">nat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dhcp"><span class="toc-number">4.9.</span> <span class="toc-text">dhcp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#http"><span class="toc-number">4.10.</span> <span class="toc-text">http</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84http%E6%96%B9%E6%B3%95"><span class="toc-number">4.10.1.</span> <span class="toc-text">常见的http方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">4.10.2.</span> <span class="toc-text">http状态码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#host%E5%AD%97%E6%AE%B5"><span class="toc-number">4.10.3.</span> <span class="toc-text">host字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#https%E5%92%8Chttp%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">4.10.4.</span> <span class="toc-text">https和http的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-number">4.10.5.</span> <span class="toc-text">请求报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="toc-number">4.10.6.</span> <span class="toc-text">响应报文</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ssl-tls"><span class="toc-number">4.11.</span> <span class="toc-text">ssl&#x2F;tls</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">4.11.1.</span> <span class="toc-text">工作流程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ftp"><span class="toc-number">4.12.</span> <span class="toc-text">ftp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ssh"><span class="toc-number">4.13.</span> <span class="toc-text">ssh</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#smtp"><span class="toc-number">4.14.</span> <span class="toc-text">smtp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D"><span class="toc-number">4.15.</span> <span class="toc-text">数字签名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie%E5%92%8Csession"><span class="toc-number">4.16.</span> <span class="toc-text">cookie和session</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/03/15/mysql12/" title="Mysql面试题目"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221837601.jpeg?_r_=f9c379c1-1009-af82-3eab-bedbd29a80d4" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mysql面试题目"/></a><div class="content"><a class="title" href="/2025/03/15/mysql12/" title="Mysql面试题目">Mysql面试题目</a><time datetime="2025-03-14T16:00:00.000Z" title="发表于 2025-03-15 00:00:00">2025-03-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/07/sql3/" title="sql原理之索引"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221837602.jpg?_r_=462eae1e-4404-c485-cc01-eb10a657e06a" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="sql原理之索引"/></a><div class="content"><a class="title" href="/2025/03/07/sql3/" title="sql原理之索引">sql原理之索引</a><time datetime="2025-03-06T16:00:00.000Z" title="发表于 2025-03-07 00:00:00">2025-03-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/06/net3/" title="计算机网络重要问题总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221837447.jpg?_r_=2bf2c2f9-666a-fe0e-519f-9b2ba5114f3a" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机网络重要问题总结"/></a><div class="content"><a class="title" href="/2025/03/06/net3/" title="计算机网络重要问题总结">计算机网络重要问题总结</a><time datetime="2025-03-05T16:00:00.000Z" title="发表于 2025-03-06 00:00:00">2025-03-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/02/leetcodehot/" title="Leetcode HOT100题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202408081510095.jpg?_r_=4f05d300-0f4f-0f4a-9e81-a9bec6951782" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Leetcode HOT100题"/></a><div class="content"><a class="title" href="/2025/03/02/leetcodehot/" title="Leetcode HOT100题">Leetcode HOT100题</a><time datetime="2025-03-01T16:00:00.000Z" title="发表于 2025-03-02 00:00:00">2025-03-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/01/en7/" title="English三月篇"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221837601.jpeg?_r_=3d89a961-0989-4066-787b-4d3709b2e23e" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="English三月篇"/></a><div class="content"><a class="title" href="/2025/03/01/en7/" title="English三月篇">English三月篇</a><time datetime="2025-02-28T16:00:00.000Z" title="发表于 2025-03-01 00:00:00">2025-03-01</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text"><p><a style="margin-inline:5px" target="_blank" href="https://hexo.io/">
  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/Framework-Hexo-4e88f8?style=flat&logo=hexo" 
       title="博客框架为 Hexo" alt="Hexo">
</a>
<a style="margin-inline:5px" target="_blank" href="https://github.com/">
  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/Source-Github-24292f?style=flat&logo=github" 
       title="本站项目由 GitHub 托管" alt="GitHub">
</a>
<a style="margin-inline:5px" target="_blank" href="https://vercel.com/">
  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/Cloud-Vercel-000000?style=flat&logo=vercel" 
       title="使用 Vercel 部署" alt="Vercel">
</a>
<a style="margin-inline:5px" target="_blank" href="https://www.qlu.edu.cn/">
  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/University-齐鲁工业大学-0056a2?style=flat&logo=university" 
       title="齐鲁工业大学" alt="齐鲁工业大学">
</a>
<a style="margin-inline:5px" target="_blank" href="https://www.aliyun.com/">
  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/Cloud-阿里云-ff6a00?style=flat&logo=aliyun" 
       title="使用阿里云服务" alt="阿里云">
</a>
<a style="margin-inline:5px" target="_blank" href="https://cloud.tencent.com/">
  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/Cloud-腾讯云-0a73b8?style=flat&logo=tencent-cloud" 
       title="使用腾讯云服务" alt="腾讯云">
</a></p>
</div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2023 - 2025 By <a class="footer-bar-link" href="/" title="mengnankkzhou" target="_blank">mengnankkzhou</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" title="鲁ICP备2024110758号">鲁ICP备2024110758号</a><a class="footer-bar-link" href="https://blog.tokenlen.top/rss2.xml" title="Rss">Rss</a><a class="footer-bar-link cc" href="/pravite" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">97</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">32</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">15</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://blog.tokenlen.top/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://img.mengnankk.top:9001/" title="图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="图床"/><span class="back-menu-item-text">图床</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="http://img.mengnankk.top:9001/" title="mengnankk图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/13/64d8c2653332e.ico" alt="mengnankk图床"/><span class="back-menu-item-text">mengnankk图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 生活</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/Message/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 其他</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://home.tokenlen.top/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> home</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://status.mengnankk.asia/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 站点检测</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://home.tokenlen.top/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 心里话</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/BF/" style="font-size: 0.88rem;">BF<sup>1</sup></a><a href="/tags/BigData/" style="font-size: 0.88rem;">BigData<sup>1</sup></a><a href="/tags/C/" style="font-size: 0.88rem;">C<sup>4</sup></a><a href="/tags/CE/" style="font-size: 0.88rem;">CE<sup>1</sup></a><a href="/tags/CSRF/" style="font-size: 0.88rem;">CSRF<sup>1</sup></a><a href="/tags/English/" style="font-size: 0.88rem;">English<sup>7</sup></a><a href="/tags/FI/" style="font-size: 0.88rem;">FI<sup>1</sup></a><a href="/tags/Hadoop/" style="font-size: 0.88rem;">Hadoop<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>12</sup></a><a href="/tags/XSS/" style="font-size: 0.88rem;">XSS<sup>1</sup></a><a href="/tags/css/" style="font-size: 0.88rem;">css<sup>2</sup></a><a href="/tags/football/" style="font-size: 0.88rem;">football<sup>1</sup></a><a href="/tags/html/" style="font-size: 0.88rem;">html<sup>1</sup></a><a href="/tags/java/" style="font-size: 0.88rem;">java<sup>20</sup></a><a href="/tags/leetcode/" style="font-size: 0.88rem;">leetcode<sup>1</sup></a><a href="/tags/markdown/" style="font-size: 0.88rem;">markdown<sup>1</sup></a><a href="/tags/mysql/" style="font-size: 0.88rem;">mysql<sup>15</sup></a><a href="/tags/net/" style="font-size: 0.88rem;">net<sup>3</sup></a><a href="/tags/paper/" style="font-size: 0.88rem;">paper<sup>1</sup></a><a href="/tags/php/" style="font-size: 0.88rem;">php<sup>5</sup></a><a href="/tags/pip/" style="font-size: 0.88rem;">pip<sup>1</sup></a><a href="/tags/python/" style="font-size: 0.88rem;">python<sup>3</sup></a><a href="/tags/shell/" style="font-size: 0.88rem;">shell<sup>4</sup></a><a href="/tags/spring-boot/" style="font-size: 0.88rem;">spring boot<sup>3</sup></a><a href="/tags/springboot/" style="font-size: 0.88rem;">springboot<sup>1</sup></a><a href="/tags/sql/" style="font-size: 0.88rem;">sql<sup>3</sup></a><a href="/tags/web/" style="font-size: 0.88rem;">web<sup>3</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/" style="font-size: 0.88rem;">数据库原理<sup>3</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 0.88rem;">数据结构<sup>10</sup></a><a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 0.88rem;">正则表达式<sup>2</sup></a><a href="/tags/%E6%AF%9B%E9%80%89/" style="font-size: 0.88rem;">毛选<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>3</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2023 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 mengnankkzhou 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.cbd.int/mathjax@3.2.2/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://comment.tokenlen.top/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, "siu~~~~~"))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://comment.tokenlen.top/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '3ZpuzQHHKWfFH59QFYmcuCvr-gzGzoHsz',
      appKey: '8DIvljObQp853ueQMZzpb9Gx',
      avatar: 'mp',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.cbd.int/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Twikoo' === 'Valine' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://comment.tokenlen.top/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>