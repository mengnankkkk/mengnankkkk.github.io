<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>计算机网络-七层体系结构 | mengnankkのblog</title><meta name="keywords" content="net"><meta name="author" content="mengnankkzhou"><meta name="copyright" content="mengnankkzhou"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="计算机网络-七层体系结构"><meta name="application-name" content="计算机网络-七层体系结构"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="计算机网络-七层体系结构"><meta property="og:url" content="https://blog.tokenlen.top/2025/01/13/net1/index.html"><meta property="og:site_name" content="mengnankkのblog"><meta property="og:description" content="基础引入 两个计算机设备想要通信，可以用一根线连接起来，两台设备使用电信号传播数据 如果都是用一根线连接两台设备的话，所需要的线数C等于 $$ C&amp;#x3D;(n-1)n&amp;#x2F;2 $$ 但这样不太理想 所以我们可以使用一个hub就是一个集线器 比如 设备1可以通过hub然后转发给设备3，但这样的话是群发，不太安全"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221837602.jpg?_r_=7ba00fda-bb1b-f52b-ab64-45e8daf0927e"><meta property="article:author" content="mengnankkzhou"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221837602.jpg?_r_=7ba00fda-bb1b-f52b-ab64-45e8daf0927e"><meta name="description" content="基础引入 两个计算机设备想要通信，可以用一根线连接起来，两台设备使用电信号传播数据 如果都是用一根线连接两台设备的话，所需要的线数C等于 $$ C&amp;#x3D;(n-1)n&amp;#x2F;2 $$ 但这样不太理想 所以我们可以使用一个hub就是一个集线器 比如 设备1可以通过hub然后转发给设备3，但这样的话是群发，不太安全"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://blog.tokenlen.top/2025/01/13/net1/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走啊，那种事情不要啊","backTitle":"♪(^∇^*)欢迎回家！！！！"},
  LA51: undefined,
  greetingBox: {"enable":"ture","default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://comment.tokenlen.top/',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"\tbd9428de12b54b96b2f1b4e69aeee81f","mailMd5":"F37442226DA71492"},
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: mengnankkzhou","link":"链接: ","source":"来源: mengnankkのblog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'mengnankkのblog',
  title: '计算机网络-七层体系结构',
  postAI: '',
  pageFillDescription: '基础引入, 概述, 1.1基本术语, 1.2知识点总结, 对比总结, 物理层, 2.1基本术语, 2.2知识点总结, 数据链路层, 3.1基本术语, 3.2重要知识点总结, 3.3补充问题, 网络层, 4.1基本术语, 4.2重要知识总结, 传输层, 5.1基本术语, 5.2重要知识点总结, 5.3补充重要知识, 应用层, 6.1基本术语, 6.2重要知识点总结, 6.3补充重要知识, 其他层次基础引入两个计算机设备想要通信可以用一根线连接起来两台设备使用电信号传播数据如果都是用一根线连接两台设备的话所需要的线数等于但这样不太理想所以我们可以使用一个就是一个集线器比如设备可以通过然后转发给设备但这样的话是群发不太安全而且只能单向的交流也不太好所以使用了交换机使用值来区分设备这个是全球唯一的允许两台设备双向交流也可以两台交换机来交换数据这叫桥接网络内网这样是可以使用的但是不能使用很多因为交换机的存储地址的数量是有限的路由器可以适用于网络的转发不同网络连接到路由器的叫做默认网关只是一个过程使用最后还是使用地址来转发数据概述基本术语结点网络中的结点可以是计算机集线器交换机或路由器等链路从一个结点到另一个结点的一段物理线路中间没有任何其他交点主机连接在因特网上的计算机因特网服务提供者提供商互联网交换点的主要作用就是允许两个网络直接相连并交换分组而不需要再通过第三个网络来转发分组意思是请求评议包含了关于几乎所有的重要的文字资料广域网任务是通过长距离运送主机发送的数据城域网用来将多个局域网进行互连局域网学校或企业大多拥有多个互连的局域网个人区域网在个人工作的地方把属于个人使用的电子设备用无线技术连接起来的网络分组因特网中传送的数据单元由首部和数据段组成分组又称为包首部可称为包头存储转发路由器收到一个分组先检查分组是否正确并过滤掉冲突包错误确定包正确后取出目的地址通过查找表找到想要发送的输出端口地址然后将该包发送出去带宽在计算机网络中表示在单位时间内从网络中的某一点到另一点所能通过的最高数据率常用来表示网络的通信线路所能传送数据的能力单位是比特每秒记为吞吐量表示在单位时间内通过某个网络或信道接口的数据量吞吐量更经常地用于对现实世界中的网络的一种测量以便知道实际上到底有多少数据量能够通过网络吞吐量受网络的带宽或网络的额定速率的限制知识点总结计算机网络简称网络把许多计算机连接在一起而互联网把许多网络连接在一起是网络的网络小写字母开头的互联网是通用名词它泛指由多个计算机网络相互连接而成的网络在这些网络之间的通信协议即通信规则可以是任意的大写字母开头的互联网是专用名词它指全球最大的开放的由众多网络相互连接而成的特定的互联网并采用协议作为通信规则其前身为的推荐译名为因特网现在一般流行称为互联网路由器是实现分组交换的关键构件其任务是转发收到的分组这是网络核心部分最重要的功能分组交换采用存储转发技术表示把一个报文要发送的整块数据分为几个分组后再进行传送在发送报文之前先把较长的报文划分成为一个个更小的等长数据段在每个数据段的前面加上一些由必要的控制信息组成的首部后就构成了一个分组分组又称为包分组是在互联网中传送的数据单元正是由于分组的头部包含了诸如目的地址和源地址等重要控制信息每一个分组才能在互联网中独立的选择传输路径并正确地交付到分组传输的终点互联网按工作方式可划分为边缘部分和核心部分主机在网络的边缘部分其作用是进行信息处理由大量网络和连接这些网络的路由器组成核心部分其作用是提供连通性和交换计算机通信是计算机中进程即运行着的程序之间的通信计算机网络采用的通信方式是客户服务器方式方式和对等连接方式方式这里介绍一下模式和模式模式是一种计算机网络通信架构其中通信由客户端发起请求服务服务器响应并提供服务特点集中管理服务器通常拥有强大的计算和存储能力负责集中管理资源和处理请求固定角色客户端负责发送请求服务器负责响应角色明确典型应用浏览器和服务器通信数据库客户端与数据库服务器如服务器是里面的重中之重服务器承担着接发消息和处理消息的功能如果服务器瘫痪了这个功能就可以说是完蛋了模式是一种网络通信架构其中所有参与者节点既是服务的消费者又是服务的提供者特点分布式管理网络中的每个节点都可以直接通信无需中央服务器动态角色节点既能发送请求也能响应其他节点的请求典型应用文件共享系统如区块链网络如比特币以太坊模式可以说是点对点模式扩展性高但是不太安全对比总结特性模式模式架构特点集中式架构分布式架构节点角色固定客户端和服务器动态节点既是客户端又是服务器适用场景服务数据库查询文件共享区块链等分布式服务优势易管理高效率去中心化高扩展性劣势单点故障扩展性有限资源协调和安全性挑战计算机网络最常用的性能指标是速率带宽吞吐量时延发送时延处理时延排队时延时延带宽积往返时间和信道利用率网络协议即协议是为进行网络中的数据交换而建立的规则计算机网络的各层以及其协议集合称为网络的体系结构五层体系结构由应用层运输层网络层网际层数据链路层物理层组成运输层最主要的协议是和协议网络层最重要的协议是协议物理层基本术语数据运送消息的实体信号数据的电气的或电磁的表现或者说信号是适合在传输介质上传输的对象码元在使用时间域或简称为时域的波形来表示数字信号时代表不同离散数值的基本波形单工只能有一个方向的通信而没有反方向的交互半双工通信的双方都可以发送信息但不能双方同时发送当然也就不能同时接收全双工通信的双方可以同时发送和接收信息失真失去真实性主要是指接受到的信号和发送的信号不同有磨损和衰减影响失真程度的因素码元传输速率信号传输距离噪声干扰传输媒体质量奈氏准则在任何信道中码元的传输的效率是有上限的传输速率超过此上限就会出现严重的码间串扰问题使接收端对码元的判决即识别成为不可能香农定理在带宽受限且有噪声的信道中为了不产生误差信息的数据传输速率有上限值基带信号来自信源的信号指没有经过调制的数字信号或模拟信号带通频带信号把基带信号经过载波调制后把信号的频率范围搬移到较高的频段以便在信道中传输即仅在一段频率范围内能够通过信道这里调制过后的信号就是带通信号调制对信号源的信息进行处理后加到载波信号上使其变为适合在信道传输的形式的过程信噪比指信号的平均功率和噪声的平均功率之比记为信噪比信道复用指多个用户共享同一个信道并不一定是同时比特率单位时间每秒内传送的比特数波特率单位时间载波调制状态改变的次数针对数据信号对载波的调制速率复用共享信道的方法非对称数字用户线光纤同轴混合网网在目前覆盖范围很广的有线电视网的基础上开发的一种居民宽带接入网知识点总结物理层的主要任务就是确定与传输媒体接口有关的一些特性如机械特性电气特性功能特性过程特性一个数据通信系统可划分为三大部分即源系统传输系统目的系统源系统包括源点或源站信源和发送器目的系统包括接收器和终点通信的目的是传送消息如话音文字图像等都是消息数据是运送消息的实体信号则是数据的电气或电磁的表现根据信号中代表消息的参数的取值方式不同信号可分为模拟信号或连续信号和数字信号或离散信号在使用时间域简称时域的波形表示数字信号时代表不同离散数值的基本波形称为码元根据双方信息交互的方式通信可划分为单向通信或单工通信双向交替通信或半双工通信双向同时通信全双工通信来自信源的信号称为基带信号信号要在信道上传输就要经过调制调制有基带调制和带通调制之分最基本的带通调制方法有调幅调频和调相还有更复杂的调制方法如正交振幅调制要提高数据在信道上的传递速率可以使用更好的传输媒体或使用先进的调制技术但数据传输速率不可能任意被提高传输媒体可分为两大类即导引型传输媒体双绞线同轴电缆光纤和非导引型传输媒体无线红外大气激光为了有效利用光纤资源在光纤干线和用户之间广泛使用无源光网络无源光网络无需配备电源其长期运营成本和管理成本都很低最流行的无源光网络是以太网无源光网络和吉比特无源光网络物理层主要做的事情就是透明地传送比特流也可以将物理层的主要任务描述为确定与传输媒体的接口的一些特性即机械特性接口所用接线器的一些物理属性如形状和尺寸电气特性接口电缆的各条线上出现的电压的范围功能特性某条线上出现的某一电平的电压的意义过程特性对于不同功能的各种可能事件的出现顺序物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据比特流而不是指具体的传输媒体现有的计算机网络中的硬件设备和传输媒体的种类非常繁多而且通信手段也有许多不同的方式物理层的作用正是尽可能地屏蔽掉这些传输媒体和通信手段的差异使物理层上面的数据链路层感觉不到这些差异这样就可以使数据链路层只考虑完成本层的协议和服务而不必考虑网络的具体传输媒体和通信手段是什么常用的信道复用技术频分复用所有用户在同样的时间占用不同的带宽资源时分复用所有用户在不同的时间占用同样的频带宽度分时不分频统计时分复用改进的时分复用能够明显提高信道的利用率码分复用用户使用经过特殊挑选的不同码型因此各用户之间不会造成干扰这种系统发送的信号有很强的抗干扰能力其频谱类似于白噪声不易被敌人发现波分复用波分复用就是光的频分复用用户到互联网的宽带接入方法有非对称数字用户线用数字技术对现有的模拟电话线进行改造而不需要重新布线的快速版本是甚高速数字用户线光纤同轴混合网是在目前覆盖范围很广的有线电视网的基础上开发的一种居民宽带接入网和即光纤到数据链路层基本术语链路一个结点到相邻结点的一段物理链路数据链路把实现控制数据运输的协议的硬件和软件加到链路上就构成了数据链路循环冗余检验为了保证数据传输的可靠性是数据链路层广泛使用的一种检错技术帧一个数据链路层的传输单元由一个数据链路层首部和其携带的封包所组成协议数据单元最大传送单元帧的数据部分的的长度上限误码率在一段时间内传输错误的比特占所传输比特总数的比率点对点协议即用户计算机和进行通信时所使用的数据链路地址或者意译为媒体访问控制或称为物理地址硬件地址用来定义网络设备的位置在模型中第三层网络层负责地址第二层数据链路层则负责地址因此一个主机会有一个地址而每个网络位置会有一个专属于它的地址地址是识别某个系统的重要标识符名字指出我们所要寻找的资源地址指出资源所在的地方路由告诉我们如何到达该处网桥一种用于数据链路层实现中继连接两个或多个局域网的网络互连设备交换机广义的来说交换机指的是一种通信系统中完成信息交换的设备这里工作在数据链路层的交换机指的是交换式集线器其实质是一个多接口的网桥重要知识点总结链路是从一个结点到相邻结点的一段物理链路数据链路则在链路的基础上增加了一些必要的硬件如网络适配器和软件如协议的实现数据链路层使用的主要是点对点信道和广播信道两种数据链路层传输的协议数据单元是帧数据链路层的三个基本问题是封装成帧透明传输和差错检测循环冗余检验是一种检错方法而帧检验序列是添加在数据后面的冗余码点对点协议是数据链路层使用最多的一种协议它的特点是简单只检测差错而不去纠正差错不使用序号也不进行流量控制可同时支持多种网络层协议是为宽带上网的主机使用的链路层协议局域网的优点是具有广播功能从一个站点可方便地访问全网便于系统的扩展和逐渐演变提高了系统的可靠性可用性和生存性计算机与外接局域网通信需要通过通信适配器或网络适配器它又称为网络接口卡或网卡计算器的硬件地址就在适配器的中以太网采用的无连接的工作方式对发送的数据帧不进行编号也不要求对方发回确认目的站收到有差错帧就把它丢掉其他什么也不做以太网采用的协议是具有冲突检测的载波监听多点接入协议的特点是发送前先监听边发送边监听一旦发现总线上出现了碰撞就立即停止发送然后按照退避算法等待一段随机时间后再次发送因此每一个站点在自己发送数据之后的一小段时间内存在着遭遇碰撞的可能性以太网上的各站点平等地争用以太网信道以太网的适配器具有过滤功能它只接收单播帧广播帧和多播帧使用集线器可以在物理层扩展以太网扩展后的以太网仍然是一个网络补充问题数据链路层的点对点信道与广播信道的特点点对点信道特点数据在两个设备之间进行直接传输通常不涉及多设备之间的干扰信号只在发送端和接收端之间传输协议常用协议为是点对点协议支持多种网络层协议它提供了封装数据认证压缩以及错误检测功能广播信道特点信号在多个设备间广播所有连接到该信道的设备都能接收到传输的数据需要控制如何解决多设备争用信道的问题协议常用协议为用于以太网允许多个设备共享同一信道它通过侦测信道是否空闲避免冲突如果发生冲突设备会退避一段时间后重试数据链路层的三个基本问题封装成帧数据链路层将网络层传来的数据封装成帧添加头部和尾部信息如目标地址源地址帧校验序列等透明传输保证数据的传输不会受到链路中可能出现的特殊符号的影响如数据流中的帧分隔符通过位填充等技术确保数据在链路上传输时的完整性和正确性差错检测数据链路层通过循环冗余校验等技术对数据进行差错检测确保数据传输过程中没有发生错误如果检测到错误通常会丢弃该帧并要求重传以太网的层硬件地址地址媒体访问控制地址是网络适配器如网卡在局域网中的唯一标识符它通常是由硬件生产商分配的位地址表示网络接口设备地址通常以进制形式表示如适配器转发器集线器网桥以太网交换机的作用及适用场适配器网络适配器作用网络适配器如网卡用于连接计算机与网络通过物理层传输数据它提供了与网络进行数据通信的接口转发器作用转发器用于在不同的网络之间进行数据转发通常用于协议转换或将不同网络技术的设备连接起来集线器作用集线器是一个简单的网络设备能够将信号广播到所有端口适用于小型网络但它不具备智能仅用于物理层的信号传输网桥作用网桥用于连接不同的局域网能够根据地址转发数据帧从而分割流量提高网络效率网桥工作在数据链路层以太网交换机作用以太网交换机可以通过地址来转发数据包只将数据包发送到目标设备所在的端口相比集线器它能有效减少网络冲突并提高网络效率它工作在数据链路层具有一定的智能能动态学习和维护地址表网络层基本术语虚电路在两个终端设备的逻辑或物理端口之间通过建立的双向的透明传输通道虚电路表示这只是一条逻辑上的连接分组都沿着这条逻辑连接按照存储转发方式传送而并不是真正建立了一条物理连接网际协议是体系中两个最主要的协议之一是体系结构网际层的核心配套的有地址解析协议地址解析协议把地址解析为硬件地址网际控制报文协议允许主机或路由器报告差错情况和提供有关异常情况的报告子网掩码它是一种用来指明一个地址的哪些位标识的是主机所在的子网以及哪些位标识的是主机的位掩码子网掩码不能单独存在它必须结合地址一起使用无分类域间路由选择特点是消除了传统的类类和类地址以及划分子网的概念并使用各种长度的网络前缀来代替分类地址中的网络号和子网号默认路由当在路由表中查不到能到达目的地址的路由时路由器选择的路由默认路由还可以减小路由表所占用的空间和搜索路由表所用的时间路由选择算法路由选择协议的核心部分因特网采用自适应的分层次的路由选择协议重要知识总结协议中的网络层向上只提供简单灵活的无连接的尽最大努力交付的数据报服务网络层不提供服务质量的承诺不保证分组交付的时限所传送的分组可能出错丢失重复和失序进程之间通信的可靠性由运输层负责在互联网的交付有两种一是在本网络直接交付不用经过路由器另一种是和其他网络的间接交付至少经过一个路由器但最后一次一定是直接交付分类的地址由网络号字段指明网络和主机号字段指明主机组成网络号字段最前面的类别指明地址的类别地址是一种分等级的地址结构地址管理机构分配地址时只分配网络号主机号由得到该网络号的单位自行分配路由器根据目的主机所连接的网络号来转发分组一个路由器至少连接到两个网络所以一个路由器至少应当有两个不同的地址数据报分为首部和数据两部分首部的前一部分是固定长度共字节是所有数据包必须具有的源地址目的地址总长度等重要地段都固定在首部一些长度可变的可选字段固定在首部的后面首部中的生存时间给出了数据报在互联网中所能经过的最大路由器数可防止数据报在互联网中无限制的兜圈子地址解析协议把地址解析为硬件地址的高速缓存可以大大减少网络上的通信量因为这样可以使主机下次再与同样地址的主机通信时可以直接从高速缓存中找到所需要的硬件地址而不需要再去以广播方式发送请求分组无分类域间路由选择是解决目前地址紧缺的一个好办法记法在地址后面加上斜线然后写上前缀所占的位数前缀或网络前缀用来指明网络前缀后面的部分是后缀用来指明主机把前缀都相同的连续的地址组成一个地址块地址分配都以地址块为单位网际控制报文协议是层的协议报文作为数据报的数据加上首部后组成数据报发送出去使用数据报并不是为了实现可靠传输允许主机或路由器报告差错情况和提供有关异常情况的报告报文的种类有两种即差错报告报文和询问报文要解决地址耗尽的问题最根本的办法是采用具有更大地址空间的新版本协议所带来的变化有更大的地址空间采用位地址灵活的首部格式改进的选项支持即插即用支持资源的预分配的首部改为字节对齐虚拟专用网络利用公用的互联网作为本机构专用网之间的通信载体内使用互联网的专用地址一个至少要有一个路由器具有合法的全球地址这样才能和本系统的另一个通过互联网进行通信所有通过互联网传送的数据都需要加密的特点是支持面向连接的服务质量支持流量工程平衡网络负载有效的支持虚拟专用网在入口节点给每一个数据报打上固定长度的标记然后根据标记在第二层链路层用硬件进行转发在标记交换路由器中进行标记交换因而转发速率大大加快传输层基本术语进程指计算机中正在运行的程序实体应用进程互相通信一台主机的进程和另一台主机中的一个进程交换数据的过程另外注意通信真正的端点不是主机而是主机中的进程也就是说端到端的通信是应用进程之间的通信传输层的复用与分用复用指发送方不同的进程都可以通过同一个运输层协议传送数据分用指接收方的运输层在剥去报文的首部后能把这些数据正确的交付到目的应用进程传输控制协议用户数据报协议端口端口的目的是为了确认对方机器的哪个进程在与自己进行交互比如和的端口不同如果没有端口就可能出现进程和交互错误端口又称协议端口号停止等待协议指发送方每发送完一个分组就停止发送等待对方确认在收到确认之后在发送下一个分组流量控制就是让发送方的发送速率不要太快既要让接收方来得及接收也不要使网络发生拥塞拥塞控制防止过多的数据注入到网络中这样可以使网络中的路由器或链路不致过载拥塞控制所要做的都有一个前提就是网络能够承受现有的网络负荷重要知识点总结运输层提供应用进程之间的逻辑通信也就是说运输层之间的通信并不是真正在两个运输层之间直接传输数据运输层向应用层屏蔽了下面网络的细节如网络拓补所采用的路由选择协议等它使应用进程之间看起来好像两个运输层实体之间有一条端到端的逻辑通信信道网络层为主机提供逻辑通信而运输层为应用进程之间提供端到端的逻辑通信运输层的两个重要协议是用户数据报协议和传输控制协议按照的术语两个对等运输实体在通信时传送的数据单位叫做运输协议数据单元但在体系中则根据所使用的协议是或分别称之为报文段或用户数据报在传送数据之前不需要先建立连接远地主机在收到报文后不需要给出任何确认虽然不提供可靠交付但在某些情况下确是一种最有效的工作方式提供面向连接的服务在传送数据之前必须先建立连接数据传送结束后要释放连接不提供广播或多播服务由于要提供可靠的面向连接的传输服务难以避免地增加了许多开销如确认流量控制计时器以及连接管理等这不仅使协议数据单元的首部增大很多还要占用许多处理机资源硬件端口是不同硬件设备进行交互的接口而软件端口是应用层各种协议进程与运输实体进行层间交互的一种地址和的首部格式中都有源端口和目的端口这两个重要字段当运输层收到层交上来的运输层报文时就能够根据其首部中的目的端口号把数据交付应用层的目的应用层两个进程之间进行通信不光要知道对方地址而且要知道对方的端口号为了找到对方计算机中的应用进程运输层用一个位端口号标志一个端口端口号只有本地意义它只是为了标志计算机应用层中的各个进程在和运输层交互时的层间接口在互联网的不同计算机中相同的端口号是没有关联的协议端口号简称端口虽然通信的终点是应用进程但只要把所发送的报文交到目的主机的某个合适端口剩下的工作最后交付目的进程就由和来完成运输层的端口号分为服务器端使用的端口号指派给熟知端口是登记端口号和客户端暂时使用的端口号的主要特点是无连接尽最大努力交付面向报文无拥塞控制支持一对一一对多多对一和多对多的交互通信首部开销小只有四个字段源端口目的端口长度和检验和的主要特点是面向连接每一条连接只能是一对一的提供可靠交付提供全双工通信面向字节流用主机的地址加上主机上的端口号作为连接的端点这样的端点就叫做套接字或插口套接字用地址端口号来表示每一条连接唯一地被通信两端的两个端点所确定停止等待协议是为了实现可靠传输的它的基本原理就是每发完一个分组就停止发送等待对方确认在收到确认后再发下一个分组为了提高传输效率发送方可以不使用低效率的停止等待协议而是采用流水线传输流水线传输就是发送方可连续发送多个分组不必每发完一个分组就停下来等待对方确认这样可使信道上一直有数据不间断的在传送这种传输方式可以明显提高信道利用率停止等待协议中超时重传是指只要超过一段时间仍然没有收到确认就重传前面发送过的分组认为刚才发送过的分组丢失了因此每发送完一个分组需要设置一个超时计时器其重传时间应比数据在分组传输的平均往返时间更长一些这种自动重传方式常称为自动重传请求另外在停止等待协议中若收到重复分组就丢弃该分组但同时还要发送确认连续协议可提高信道利用率发送维持一个发送窗口凡位于发送窗口内的分组可连续发送出去而不需要等待对方确认接收方一般采用累积确认对按序到达的最后一个分组发送确认表明到这个分组位置的所有分组都已经正确收到了报文段的前个字节是固定的其后有字节长度的可选字段如果加入可选字段后首部长度不是的整数倍字节需要在再在之后用填充因此首部的长度取值为字节最长为字节使用滑动窗口机制发送窗口里面的序号表示允许发送的序号发送窗口后沿的后面部分表示已发送且已收到确认而发送窗口前沿的前面部分表示不允许发送发送窗口后沿的变化情况有两种可能即不动没有收到新的确认和前移收到了新的确认发送窗口的前沿通常是不断向前移动的一般来说我们总是希望数据传输更快一些但如果发送方把数据发送的过快接收方就可能来不及接收这就会造成数据的丢失所谓流量控制就是让发送方的发送速率不要太快要让接收方来得及接收为了进行拥塞控制发送方要维持一个拥塞窗口的状态变量拥塞控制窗口的大小取决于网络的拥塞程度并且动态变化发送方让自己的发送窗口取为拥塞窗口和接收方的接受窗口中较小的一个的拥塞控制采用了四种算法即慢开始拥塞避免快重传和快恢复在网络层也可以使路由器采用适当的分组丢弃策略如主动队列管理以减少网络拥塞的发生运输连接的三个阶段即连接建立数据传送和连接释放主动发起连接建立的应用进程叫做客户而被动等待连接建立的应用进程叫做服务器连接采用三报文握手机制服务器要确认用户的连接请求然后客户要对服务器的确认进行确认的连接释放采用四报文握手机制任何一方都可以在数据传送结束后发出连接释放的通知待对方确认后进入半关闭状态当另一方也没有数据再发送时则发送连接释放通知对方确认后就完全关闭了连接补充重要知识端口和套接字的意义端口端口是网络协议如或中用于标识特定应用进程的数字端口通常在到之间分为不同的范围知名端口通常分配给常见的服务例如用端口用端口注册端口用于不太常见的应用程序和服务动态或私有端口通常由操作系统分配给临时连接套接字套接字是操作系统提供的一种接口用于实现进程间的网络通信它是通过地址和端口号的组合来唯一标识网络中的一个通信端点可以通过套接字在应用程序间建立通信支持或协议和的区别可靠性是面向连接的协议确保数据按顺序到达且不会丢失如果丢包会进行重传流量控制使用流量控制滑动窗口来避免发送方过快地发送数据超出了接收方的处理能力拥塞控制会根据网络的负载情况动态调整数据传输速度以避免网络拥塞连接管理需要在通信前建立连接三次握手通信结束后需要关闭连接四次挥手不可靠性是无连接的协议不保证数据的可靠到达数据包可能会丢失重复或乱序无流量控制和拥塞控制不会进行流量控制或拥塞控制发送数据时不考虑接收方的处理能力轻量级由于其无连接简单的特性的开销较小适合实时传输等对时延要求高的应用应用场景适用于需要高可靠性顺序传输的场景比如文件传输网页浏览电子邮件等适用于对时延要求高容忍数据丢失的场景比如视频会议语音通信在线游戏等在不可靠网络上实现可靠传输的技术在不可靠的网络上实现可靠传输通常依赖于自动重传请求协议和确认机制就是通过协议来实现数据的可靠传输协议通过发送方和接收方之间的确认消息来确保数据的正确传输如果接收方未能成功接收到数据发送方会重新发送数据停止等待协议发送方发送一个数据包后等待接收方的确认消息如果收到确认则继续发送下一个数据包如果超时未收到确认重新发送该数据包滑动窗口协议相比停止等待协议滑动窗口协议允许发送方在等待确认的同时继续发送多个数据包提高了传输效率的三次握手和三次挥手三次握手用来建立连接确保双方都准备好进行数据传输客户端发送请求表示希望建立连接服务器回复表示同意建立连接客户端发送确认连接建立成功四次挥手用来关闭连接确保双方都完成数据的传输后才断开连接客户端发送请求表示数据发送完毕准备关闭连接服务器回复确认收到客户端的关闭请求服务器发送请求表示服务器也准备关闭连接客户端回复连接正式关闭应用层基本术语域名系统域名系统将人类可读的域名例如转换为机器可读的地址例如我们可以将其理解为专为互联网设计的电话薄说明白了就是一个解析的过程文件传输协议是文件传输协议的英文简称而中文简称为文传协议用于上的控制文件的双向传输同时它也是一个应用程序基于不同的操作系统有不同的应用程序而所有这些应用程序都遵守同一种协议以传输文件在的使用当中用户经常遇到两个概念下载和上传下载文件就是从远程主机拷贝文件至自己的计算机上上传文件就是将文件从自己的计算机中拷贝至远程主机上用语言来说用户可通过客户机程序向从远程主机上传下载文件简单文件传输协议简单文件传输协议是协议族中的一个用来在客户机与服务器之间进行简单文件传输的协议提供不复杂开销不大的文件传输服务端口号为远程终端协议协议是协议族中的一员是远程登陆服务的标准协议和主要方式它为用户提供了在本地计算机上完成远程主机工作的能力在终端使用者的电脑上使用程序用它连接到服务器终端使用者可以在程序中输入命令这些命令会在服务器上运行就像直接在服务器的控制台上输入一样可以在本地就能控制服务器要开始一个会话必须输入用户名和密码来登录服务器是常用的远程控制服务器的方法万维网是环球信息网的缩写亦作英文全称为中文名字为万维网环球网等常简称为分为客户端和服务器程序可以让客户端常用浏览器访问浏览服务器上的页面是一个由许多互相链接的超文本组成的系统通过互联网访问在这个系统中每个有用的事物称为一样资源并且由一个全局统一资源标识符标识这些资源通过超文本传输协议传送给用户而后者通过点击链接来获得资源万维网联盟英语简称又称理事会年月在麻省理工学院计算机科学实验室成立万维网联盟的创建者是万维网的发明者蒂姆伯纳斯李万维网并不等同互联网万维网只是互联网所能提供的服务其中之一是靠着互联网运行的一项服务统一资源定位符统一资源定位符是对可以从互联网上得到的资源的位置和访问方法的一种简洁的表示是互联网上标准资源的地址互联网上的每个文件都有一个唯一的它包含的信息指出文件的位置以及浏览器应该怎么处理它超文本传输协议超文本传输协议是互联网上应用最为广泛的一种网络协议所有的文件都必须遵守这个标准设计最初的目的是为了提供一种发布和接收页面的方法年美国人构思了一种通过计算机处理文本信息的方法并称之为超文本这成为了超文本传输协议标准架构的发展根基代理服务器代理服务器是一种网络实体它又称为万维网高速缓存代理服务器把最近的一些请求和响应暂存在本地磁盘中当新请求到达时若代理服务器发现这个请求与暂时存放的的请求相同就返回暂存的响应而不需要按的地址再次去互联网访问该资源代理服务器可在客户端或服务器工作也可以在中间系统工作简单邮件传输协议即简单邮件传输协议它是一组用于由源地址到目的地址传送邮件的规则由它来控制信件的中转方式协议属于协议簇它帮助每台计算机在发送或中转信件时找到下一个目的地通过协议所指定的服务器就可以把寄到收信人的服务器上了整个过程只要几分钟服务器则是遵循协议的发送邮件服务器用来发送或中转发出的电子邮件搜索引擎搜索引擎是指根据一定的策略运用特定的计算机程序从互联网上搜集信息在对信息进行组织和处理后为用户提供检索服务将用户检索相关的信息展示给用户的系统搜索引擎包括全文索引目录索引元搜索引擎垂直搜索引擎集合式搜索引擎门户搜索引擎与免费链接列表等垂直搜索引擎垂直搜索引擎是针对某一个行业的专业搜索引擎是搜索引擎的细分和延伸是对网页库中的某类专门的信息进行一次整合定向分字段抽取出需要的数据进行处理后再以某种形式返回给用户垂直搜索是相对通用搜索引擎的信息量大查询不准确深度不够等提出来的新的搜索引擎服务模式通过针对某一特定领域某一特定人群或某一特定需求提供的有一定价值的信息和相关服务其特点就是专精深且具有行业色彩相比较通用搜索引擎的海量信息无序化垂直搜索引擎则显得更加专注具体和深入全文索引全文索引技术是目前搜索引擎的关键技术试想在大小的文件中搜索一个词可能需要几秒在的文件中可能需要几十秒如果在更大的文件中搜索那么就需要更大的系统开销这样的开销是不现实的所以在这样的矛盾下出现了全文索引技术有时候有人叫倒排文档技术目录索引目录索引顾名思义就是将网站分门别类地存放在相应的目录中因此用户在查询信息时可选择关键词搜索也可按分类目录逐层查找重要知识点总结文件传输协议使用可靠的运输服务使用客户服务器方式一个服务器进程可以同时为多个用户提供服务在进行文件传输时的客户和服务器之间要先建立两个并行的连接控制连接和数据连接实际用于传输文件的是数据连接万维网客户程序与服务器之间进行交互使用的协议是超文本传输协议使用连接进行可靠传输但本身是无连接无状态的协议使用了持续连接分为非流水线方式和流水线方式电子邮件把邮件发送到收件人使用的邮件服务器并放在其中的收件人邮箱中收件人可随时上网到自己使用的邮件服务器读取相当于电子邮箱一个电子邮件系统有三个重要组成构件用户代理邮件服务器邮件协议包括邮件发送协议如和邮件读取协议如和用户代理和邮件服务器都要运行这些协议补充重要知识常见的方法请求服务器返回指定的资源例如网页向服务器提交数据例如表单数据更新资源删除资源状态码成功例如表示请求成功重定向例如表示资源已永久移动客户端错误例如表示请求的资源不存在服务器错误例如表示服务器发生错误和的区别在上加入了协议通过加密保护数据的机密性和完整性防止中间人攻击工作流程用户输入网址当你在浏览器中输入一个如时浏览器首先需要通过查找这个域名对应的地址查询服务器本地缓存浏览器或操作系统首先查看是否缓存了该域名的地址如果有缓存且未过期直接使用缓存的地址递归查询如果没有缓存客户端向服务器发送查询请求服务器将从根服务器顶级域名服务器权威域名服务器层层查询直到找到该域名的对应地址返回地址一旦找到服务器将域名对应的地址返回给浏览器建立连接浏览器使用获取到的地址向目标服务器发起请求开始页面加载过程访问一个网站的过程输入网址用户在浏览器中输入如解析浏览器通过将域名解析为对应的地址连接建立浏览器通过协议与服务器建立连接使用三次握手完成连接建立对于还涉及到握手以确保数据安全性发送请求浏览器向服务器发送请求获取网页资源如图片等服务器响应服务器处理请求后返回响应包括网页的内容和其他相关资源渲染页面浏览器接收到响应后解析并渲染网页显示给用户关闭连接使用持久连接通过但最终浏览器会关闭与服务器的连接其他层次除了常见的七层体系结构外还有四层协议和五层协议',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-02-26 21:08:32',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/rss2.xml" title="mengnankkのblog" type="application/rss+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407230955363.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://blog.tokenlen.top/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://img.mengnankk.top:9001/" title="图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="图床"/><span class="back-menu-item-text">图床</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="http://img.mengnankk.top:9001/" title="mengnankk图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/13/64d8c2653332e.ico" alt="mengnankk图床"/><span class="back-menu-item-text">mengnankk图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">mengnankkのblog</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 生活</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/Message/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 其他</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://home.tokenlen.top/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> home</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://status.mengnankk.asia/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 站点检测</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://home.tokenlen.top/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 心里话</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://imgbed.mengnankk.asia/202407021650088.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgbed.mengnankk.asia/202407021650088.jpg"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/BF/" style="font-size: 1.05rem;">BF<sup>1</sup></a><a href="/tags/BigData/" style="font-size: 1.05rem;">BigData<sup>1</sup></a><a href="/tags/C/" style="font-size: 1.05rem;">C<sup>4</sup></a><a href="/tags/CE/" style="font-size: 1.05rem;">CE<sup>1</sup></a><a href="/tags/CSRF/" style="font-size: 1.05rem;">CSRF<sup>1</sup></a><a href="/tags/English/" style="font-size: 1.05rem;">English<sup>8</sup></a><a href="/tags/FI/" style="font-size: 1.05rem;">FI<sup>1</sup></a><a href="/tags/Hadoop/" style="font-size: 1.05rem;">Hadoop<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>12</sup></a><a href="/tags/XSS/" style="font-size: 1.05rem;">XSS<sup>1</sup></a><a href="/tags/css/" style="font-size: 1.05rem;">css<sup>2</sup></a><a href="/tags/football/" style="font-size: 1.05rem;">football<sup>1</sup></a><a href="/tags/html/" style="font-size: 1.05rem;">html<sup>1</sup></a><a href="/tags/java/" style="font-size: 1.05rem;">java<sup>21</sup></a><a href="/tags/leetcode/" style="font-size: 1.05rem;">leetcode<sup>2</sup></a><a href="/tags/markdown/" style="font-size: 1.05rem;">markdown<sup>1</sup></a><a href="/tags/mysql/" style="font-size: 1.05rem;">mysql<sup>15</sup></a><a href="/tags/net/" style="font-size: 1.05rem;">net<sup>3</sup></a><a href="/tags/paper/" style="font-size: 1.05rem;">paper<sup>1</sup></a><a href="/tags/php/" style="font-size: 1.05rem;">php<sup>5</sup></a><a href="/tags/pip/" style="font-size: 1.05rem;">pip<sup>1</sup></a><a href="/tags/python/" style="font-size: 1.05rem;">python<sup>3</sup></a><a href="/tags/shell/" style="font-size: 1.05rem;">shell<sup>4</sup></a><a href="/tags/spring-boot/" style="font-size: 1.05rem;">spring boot<sup>3</sup></a><a href="/tags/springboot/" style="font-size: 1.05rem;">springboot<sup>1</sup></a><a href="/tags/sql/" style="font-size: 1.05rem;">sql<sup>3</sup></a><a href="/tags/web/" style="font-size: 1.05rem;">web<sup>3</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/" style="font-size: 1.05rem;">数据库原理<sup>3</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.05rem;">数据结构<sup>11</sup></a><a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 1.05rem;">正则表达式<sup>2</sup></a><a href="/tags/%E6%AF%9B%E9%80%89/" style="font-size: 1.05rem;">毛选<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>3</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">14</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/408/" itemprop="url">408</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/net/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>net</span></a></span></div></div><h1 class="post-title" itemprop="name headline">计算机网络-七层体系结构</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-01-12T16:00:00.000Z" title="发表于 2025-01-13 00:00:00">2025-01-13</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-02-26T13:08:32.812Z" title="更新于 2025-02-26 21:08:32">2025-02-26</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">13.5k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>41分钟</span></span><span class="post-meta-separator"></span><span id="" data-flag-title="计算机网络-七层体系结构"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="twikoo_visitors" title="访问量"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为济南"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>济南</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221837602.jpg?_r_=7ba00fda-bb1b-f52b-ab64-45e8daf0927e"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://blog.tokenlen.top/2025/01/13/net1/"><header><a class="post-meta-categories" href="/categories/408/" itemprop="url">408</a><a href="/tags/net/" tabindex="-1" itemprop="url">net</a><h1 id="CrawlerTitle" itemprop="name headline">计算机网络-七层体系结构</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">mengnankkzhou</span><time itemprop="dateCreated datePublished" datetime="2025-01-12T16:00:00.000Z" title="发表于 2025-01-13 00:00:00">2025-01-13</time><time itemprop="dateCreated datePublished" datetime="2025-02-26T13:08:32.812Z" title="更新于 2025-02-26 21:08:32">2025-02-26</time></header><h1>基础引入</h1>
<p>两个计算机设备想要通信，可以用一根线连接起来，两台设备使用电信号传播数据</p>
<p>如果都是用一根线连接两台设备的话，所需要的线数C等于<br>
$$<br>
C=(n-1)n/2<br>
$$<br>
但这样不太理想</p>
<p>所以我们可以使用一个hub就是一个集线器</p>
<p>比如</p>
<p>设备1可以通过<strong>hub</strong>然后转发给设备3，但这样的话是群发，不太安全</p>
<p>而且只能单向的交流，也不太好</p>
<p>所以使用了<strong>交换机</strong>，使用<strong>mac值</strong>来区分设备</p>
<p>这个是全球唯一的</p>
<p>允许两台设备双向交流，也可以两台交换机来交换数据，这叫<strong>桥接网络</strong></p>
<p>内网这样是可以使用的，但是不能使用很多，因为交换机的存储mac地址的数量是有限的。</p>
<p><strong>路由器</strong>可以适用于网络的转发</p>
<p><strong>不同网络连接到路由器的ip叫做默认网关</strong></p>
<p><strong>ip</strong>只是一个过程使用，最后还是使用<strong>mac地址</strong>来转发数据</p>
<h1>概述</h1>
<h2 id="1-1基本术语">1.1基本术语</h2>
<p><strong>结点 （node）</strong>：网络中的结点可以是计算机，集线器，交换机或路由器等。</p>
<p><strong>链路（link ）</strong> : 从一个结点到另一个结点的一段物理线路。中间没有任何其他交点。</p>
<p><strong>主机（host）</strong>：连接在因特网上的计算机。</p>
<p><strong>ISP（Internet Service Provider）</strong>：因特网服务提供者（提供商）。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.javaguide.cn/p3-juejin/e77e26123d404d438d0c5943e3c65893~tplv-k3u1fbpfcp-zoom-1.png" alt=""></p>
<p><strong>IXP（Internet eXchange Point）</strong>：互联网交换点 IXP 的主要作用就是允许两个网络直接相连并交换分组，而不需要再通过第三个网络来转发分组。</p>
<p><strong>RFC(Request For Comments)</strong>：意思是“请求评议”，包含了关于 Internet 几乎所有的重要的文字资料。</p>
<p><strong>广域网 WAN（Wide Area Network）</strong>：任务是通过长距离运送主机发送的数据。</p>
<p><strong>城域网 MAN（Metropolitan Area Network）</strong>：用来将多个局域网进行互连。</p>
<p><strong>局域网 LAN（Local Area Network）</strong>：学校或企业大多拥有多个互连的局域网。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.javaguide.cn/p3-juejin/eb48d21b2e984a63a26250010d7adac4~tplv-k3u1fbpfcp-zoom-1.png" alt=""></p>
<p><strong>个人区域网 PAN（Personal Area Network）</strong>：在个人工作的地方把属于个人使用的电子设备用无线技术连接起来的网络 。</p>
<p><strong>分组（packet ）</strong>：因特网中传送的数据单元。由首部 header 和数据段组成。分组又称为包，首部可称为包头。</p>
<p><strong>存储转发（store and forward ）</strong>：路由器收到一个分组，先检查分组是否正确，并过滤掉冲突包错误。确定包正确后，取出目的地址，通过查找表找到想要发 送的输出端口地址，然后将该包发送出去。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.javaguide.cn/p3-juejin/addb6b2211444a4da9e0ffc129dd444f~tplv-k3u1fbpfcp-zoom-1.gif" alt=""></p>
<p><strong>带宽（bandwidth）</strong>：在计算机网络中，表示在单位时间内从网络中的某一点到另一点所能通过的“最高数据率”。常用来表示网络的通信线路所能传送数据的能力。单位是“比特每秒”，记为 b/s。</p>
<p><strong>吞吐量（throughput ）</strong>：表示在单位时间内通过某个网络（或信道、接口）的数据量。吞吐量更经常地用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络。吞吐量受网络的带宽或网络的额定速率的限制。</p>
<h2 id="1-2知识点总结">1.2知识点总结</h2>
<p><strong>计算机网络（简称网络）把许多计算机连接在一起，而互联网把许多网络连接在一起，是网络的网络。</strong></p>
<p>小写字母 i 开头的 internet（互联网）是通用名词，它泛指由多个计算机网络相互连接而成的网络。在这些网络之间的通信协议（即通信规则）可以是任意的。大写字母 I 开头的 Internet（互联网）是专用名词，它指全球最大的，开放的，由众多网络相互连接而成的特定的互联网，并采用 TCP/IP 协议作为通信规则，其前身为 ARPANET。Internet 的推荐译名为因特网，现在一般流行称为互联网。</p>
<p>路由器是实现分组交换的关键构件，其任务是转发收到的分组，这是网络核心部分最重要的功能。分组交换采用存储转发技术，表示把一个报文（要发送的整块数据）分为几个分组后再进行传送。在发送报文之前，先把较长的报文划分成为一个个更小的等长数据段。在每个数据段的前面加上一些由必要的控制信息组成的首部后，就构成了一个分组。分组又称为包。分组是在互联网中传送的数据单元，正是由于分组的头部包含了诸如目的地址和源地址等重要控制信息，每一个分组才能在互联网中独立的选择传输路径，并正确地交付到分组传输的终点。</p>
<p>互联网按工作方式可划分为边缘部分和核心部分。主机在网络的边缘部分，其作用是进行信息处理。由大量网络和连接这些网络的路由器组成核心部分，其作用是提供连通性和交换。</p>
<p>计算机通信是计算机中进程（即运行着的程序）之间的通信。计算机网络采用的通信方式是客户-服务器方式（C/S 方式）和对等连接方式（P2P 方式）。</p>
<p>这里介绍一下C/S模式和P2P模式：</p>
<p>C/S 模式是一种计算机网络通信架构，其中通信由客户端（Client）发起，请求服务，服务器（Server）响应并提供服务。</p>
<p>特点：</p>
<p><strong>集中管理</strong>：服务器通常拥有强大的计算和存储能力，负责集中管理资源和处理请求。</p>
<p><strong>固定角色</strong>：客户端负责发送请求，服务器负责响应。角色明确。</p>
<p><strong>典型应用</strong>：</p>
<ul>
<li>Web浏览器和Web服务器（HTTP/HTTPS通信）</li>
<li>数据库客户端与数据库服务器（如MySQL）</li>
</ul>
<p>服务器是里面的重中之重，服务器承担着接发消息和处理消息的功能。如果服务器瘫痪了，这个功能就可以说是完蛋了。</p>
<p>P2P 模式是一种网络通信架构，其中所有参与者（节点）既是服务的消费者（Client），又是服务的提供者（Server）。</p>
<p>特点：</p>
<p><strong>分布式管理</strong>：网络中的每个节点都可以直接通信，无需中央服务器。</p>
<p><strong>动态角色</strong>：节点既能发送请求，也能响应其他节点的请求。</p>
<p><strong>典型应用</strong>：</p>
<ul>
<li>文件共享系统（如BitTorrent）</li>
<li>区块链网络（如比特币、以太坊）</li>
</ul>
<p>p2p模式可以说是点对点模式，扩展性高，但是不太安全。</p>
<h3 id="对比总结"><strong>对比总结</strong></h3>
<table>
<thead>
<tr>
<th><strong>特性</strong></th>
<th><strong>C/S 模式</strong></th>
<th><strong>P2P 模式</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>架构特点</strong></td>
<td>集中式架构</td>
<td>分布式架构</td>
</tr>
<tr>
<td><strong>节点角色</strong></td>
<td>固定（客户端和服务器）</td>
<td>动态（节点既是客户端又是服务器）</td>
</tr>
<tr>
<td><strong>适用场景</strong></td>
<td>Web服务、数据库查询</td>
<td>文件共享、区块链等分布式服务</td>
</tr>
<tr>
<td><strong>优势</strong></td>
<td>易管理、高效率</td>
<td>去中心化、高扩展性</td>
</tr>
<tr>
<td><strong>劣势</strong></td>
<td>单点故障、扩展性有限</td>
<td>资源协调和安全性挑战</td>
</tr>
</tbody>
</table>
<p><strong>计算机网络最常用的性能指标是：速率，带宽，吞吐量，时延（发送时延，处理时延，排队时延），时延带宽积，往返时间和信道利用率。</strong></p>
<p>网络协议即协议，是为进行网络中的数据交换而建立的规则。计算机网络的各层以及其协议集合，称为网络的体系结构。</p>
<p><strong>五层体系结构由应用层，运输层，网络层（网际层），数据链路层，物理层组成。运输层最主要的协议是 TCP 和 UDP 协议，网络层最重要的协议是 IP 协议。</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.javaguide.cn/p3-juejin/acec0fa44041449b8088872dcd7c0b3a~tplv-k3u1fbpfcp-zoom-1.gif" alt=""></p>
<h1>物理层</h1>
<h2 id="2-1基本术语">2.1基本术语</h2>
<ol>
<li><strong>数据（data）</strong>：运送消息的实体。</li>
<li><strong>信号（signal）</strong>：数据的电气的或电磁的表现。或者说信号是适合在传输介质上传输的对象。</li>
<li><strong>码元（ code）</strong>：在使用时间域（或简称为时域）的波形来表示数字信号时，代表不同离散数值的基本波形。</li>
<li><strong>单工（simplex ）</strong>：只能有一个方向的通信而没有反方向的交互。</li>
<li><strong>半双工（half duplex ）</strong>：通信的双方都可以发送信息，但不能双方同时发送(当然也就不能同时接收)</li>
<li><strong>全双工（full duplex）</strong>：通信的双方可以同时发送和接收信息。</li>
<li><strong>失真</strong>：失去真实性，主要是指接受到的信号和发送的信号不同，有磨损和衰减。影响失真程度的因素：1.码元传输速率 2.信号传输距离 3.噪声干扰 4.传输媒体质量</li>
<li><strong>奈氏准则</strong>：在任何信道中，码元的传输的效率是有上限的，传输速率超过此上限，就会出现严重的码间串扰问题，使接收端对码元的判决（即识别）成为不可能。</li>
<li><strong>香农定理</strong>：在带宽受限且有噪声的信道中，为了不产生误差，信息的数据传输速率有上限值。</li>
<li><strong>基带信号（baseband signal）</strong>：来自信源的信号。指没有经过调制的数字信号或模拟信号。</li>
<li><strong>带通（频带）信号（bandpass signal）</strong>：把基带信号经过载波调制后，把信号的频率范围搬移到较高的频段以便在信道中传输（即仅在一段频率范围内能够通过信道），这里调制过后的信号就是带通信号。</li>
<li><strong>调制（modulation ）</strong>：对信号源的信息进行处理后加到载波信号上，使其变为适合在信道传输的形式的过程。</li>
<li><strong>信噪比（signal-to-noise ratio ）</strong>：指信号的平均功率和噪声的平均功率之比，记为 S/N。信噪比（dB）=10*log10（S/N）。</li>
<li><strong>信道复用（channel multiplexing ）</strong>：指多个用户共享同一个信道。（并不一定是同时）。</li>
<li><strong>比特率（bit rate ）</strong>：单位时间（每秒）内传送的比特数</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.javaguide.cn/p3-juejin/5d9bf7b3db324ae7a88fcedcbace45d8~tplv-k3u1fbpfcp-zoom-1.png" alt=""></p>
<p><strong>波特率（baud rate）</strong>：单位时间载波调制状态改变的次数。针对数据信号对载波的调制速率。</p>
<p><strong>复用（multiplexing）</strong>：共享信道的方法。</p>
<p><strong>ADSL（Asymmetric Digital Subscriber Line ）</strong>：非对称数字用户线。</p>
<p><strong>光纤同轴混合网（HFC 网）</strong>：在目前覆盖范围很广的有线电视网的基础上开发的一种居民宽带接入网</p>
<h2 id="2-2知识点总结">2.2知识点总结</h2>
<p><strong>物理层的主要任务就是确定与传输媒体接口有关的一些特性，如机械特性，电气特性，功能特性，过程特性。</strong></p>
<ol>
<li>一个数据通信系统可划分为三大部分，即源系统，传输系统，目的系统。源系统包括源点（或源站，信源）和发送器，目的系统包括接收器和终点。</li>
<li><strong>通信的目的是传送消息。如话音，文字，图像等都是消息，数据是运送消息的实体。信号则是数据的电气或电磁的表现。</strong></li>
<li>根据信号中代表消息的参数的取值方式不同，信号可分为模拟信号（或连续信号）和数字信号（或离散信号）。在使用时间域（简称时域）的波形表示数字信号时，代表不同离散数值的基本波形称为码元。</li>
<li>根据双方信息交互的方式，通信可划分为单向通信（或单工通信），双向交替通信（或半双工通信），双向同时通信（全双工通信）。</li>
<li>来自信源的信号称为基带信号。信号要在信道上传输就要经过调制。调制有基带调制和带通调制之分。最基本的带通调制方法有调幅，调频和调相。还有更复杂的调制方法，如正交振幅调制。</li>
<li>要提高数据在信道上的传递速率，可以使用更好的传输媒体，或使用先进的调制技术。但数据传输速率不可能任意被提高。</li>
<li>传输媒体可分为两大类，即导引型传输媒体（双绞线，同轴电缆，光纤）和非导引型传输媒体（无线，红外，大气激光）。</li>
<li>为了有效利用光纤资源，在光纤干线和用户之间广泛使用无源光网络 PON。无源光网络无需配备电源，其长期运营成本和管理成本都很低。最流行的无源光网络是以太网无源光网络 EPON 和吉比特无源光网络 GPON。</li>
</ol>
<p>物理层主要做的事情就是 <strong>透明地传送比特流</strong>。也可以将物理层的主要任务描述为确定与传输媒体的接口的一些特性，即：机械特性（接口所用接线器的一些物理属性如形状和尺寸），电气特性（接口电缆的各条线上出现的电压的范围），功能特性（某条线上出现的某一电平的电压的意义），过程特性（对于不同功能的各种可能事件的出现顺序）。</p>
<p><strong>物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体。</strong> 现有的计算机网络中的硬件设备和传输媒体的种类非常繁多，而且通信手段也有许多不同的方式。物理层的作用正是尽可能地屏蔽掉这些传输媒体和通信手段的差异，使物理层上面的数据链路层感觉不到这些差异，这样就可以使数据链路层只考虑完成本层的协议和服务，而不必考虑网络的具体传输媒体和通信手段是什么。</p>
<p><strong>常用的信道复用技术</strong></p>
<ol>
<li><strong>频分复用(FDM)</strong>：所有用户在同样的时间占用不同的带宽资源。</li>
<li><strong>时分复用（TDM）</strong>：所有用户在不同的时间占用同样的频带宽度（分时不分频）。</li>
<li><strong>统计时分复用 (Statistic TDM)</strong>：改进的时分复用，能够明显提高信道的利用率。</li>
<li><strong>码分复用(CDM)</strong>：用户使用经过特殊挑选的不同码型，因此各用户之间不会造成干扰。这种系统发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现。</li>
<li><strong>波分复用( WDM)</strong>：波分复用就是光的频分复用。</li>
</ol>
<p>用户到互联网的宽带接入方法有非对称数字用户线 ADSL（用数字技术对现有的模拟电话线进行改造，而不需要重新布线。ADSL 的快速版本是甚高速数字用户线 VDSL。），光纤同轴混合网 HFC（是在目前覆盖范围很广的有线电视网的基础上开发的一种居民宽带接入网）和 FTTx（即光纤到······）。</p>
<h1>数据链路层</h1>
<h2 id="3-1基本术语">3.1基本术语</h2>
<p><strong>链路（link）</strong>：一个结点到相邻结点的一段物理链路。</p>
<p><strong>数据链路（data link）</strong>：把实现控制<strong>数据运输的协议</strong>的硬件和软件加到链路上就构成了数据链路。</p>
<p><strong>循环冗余检验 CRC（Cyclic Redundancy Check）</strong>：为了保证数据传输的可靠性，CRC 是数据链路层广泛使用的一种检错技术。</p>
<p><strong>帧（frame）</strong>：一个数据链路层的传输单元，由一个数据链路层首部和其携带的封包所组成协议数据单元。</p>
<p><strong>MTU（Maximum Transfer Uint ）</strong>：最大传送单元。帧的数据部分的的长度上限。</p>
<p><strong>误码率 BER（Bit Error Rate ）</strong>：在一段时间内，传输错误的比特占所传输比特总数的比率。</p>
<p><strong>PPP（Point-to-Point Protocol ）</strong>：点对点协议。即用户计算机和 ISP 进行通信时所使用的数据链路</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.javaguide.cn/p3-juejin/6b0310d3103c4149a725a28aaf001899~tplv-k3u1fbpfcp-zoom-1.jpeg" alt=""></p>
<p><strong>MAC 地址（Media Access Control 或者 Medium Access Control）</strong>：意译为媒体访问控制，或称为物理地址、硬件地址，用来定义网络设备的位置。在 OSI 模型中，第三层网络层负责 IP 地址，第二层数据链路层则负责 MAC 地址。因此一个主机会有一个 MAC 地址，而每个网络位置会有一个专属于它的 IP 地址 。地址是识别某个系统的重要标识符，“名字指出我们所要寻找的资源，地址指出资源所在的地方，路由告诉我们如何到达该处。”</p>
<p><strong>网桥（bridge）</strong>：一种用于数据链路层实现中继，连接两个或多个局域网的网络互连设备。</p>
<p><strong>交换机（switch ）</strong>：广义的来说，交换机指的是一种通信系统中完成信息交换的设备。这里工作在数据链路层的交换机指的是交换式集线器，其实质是一个多接口的网桥</p>
<h2 id="3-2重要知识点总结">3.2重要知识点总结</h2>
<p>链路是从一个结点到相邻结点的一段物理链路，数据链路则在链路的基础上增加了一些必要的硬件（如网络适配器）和软件（如协议的实现）</p>
<p>数据链路层使用的主要是<strong>点对点信道</strong>和<strong>广播信道</strong>两种。</p>
<p>数据链路层传输的协议数据单元是帧。数据链路层的三个基本问题是：<strong>封装成帧</strong>，<strong>透明传输</strong>和<strong>差错检测</strong></p>
<p><strong>循环冗余检验 CRC</strong> 是一种检错方法，而帧检验序列 FCS 是添加在数据后面的冗余码</p>
<p><strong>点对点协议 PPP</strong> 是数据链路层使用最多的一种协议，它的特点是：简单，只检测差错而不去纠正差错，不使用序号，也不进行流量控制，可同时支持多种网络层协议</p>
<p>PPPoE 是为宽带上网的主机使用的链路层协议</p>
<p><strong>局域网的优点是：具有广播功能，从一个站点可方便地访问全网；便于系统的扩展和逐渐演变；提高了系统的可靠性，可用性和生存性。</strong></p>
<p>计算机与外接局域网通信需要通过<strong>通信适配器</strong>（或网络适配器），它又称为网络接口卡或网卡。<strong>计算器的硬件地址就在适配器的 ROM 中</strong>。</p>
<p>以太网采用的无连接的工作方式，对发送的数据帧不进行编号，也不要求对方发回确认。目的站收到有差错帧就把它丢掉，其他什么也不做</p>
<p>以太网采用的协议是具有冲突检测的<strong>载波监听多点接入 CSMA/CD</strong>。协议的特点是：<strong>发送前先监听，边发送边监听，一旦发现总线上出现了碰撞，就立即停止发送。然后按照退避算法等待一段随机时间后再次发送。</strong> 因此，每一个站点在自己发送数据之后的一小段时间内，存在着遭遇碰撞的可能性。以太网上的各站点平等地争用以太网信道</p>
<p>以太网的适配器具有过滤功能，它只接收单播帧，广播帧和多播帧。</p>
<p>使用集线器可以在物理层扩展以太网（扩展后的以太网仍然是一个网络）</p>
<hr>
<h2 id="3-3补充问题">3.3补充问题</h2>
<p>数据链路层的点对点信道与广播信道的特点</p>
<ol>
<li><strong>点对点信道</strong>：
<ul>
<li><strong>特点</strong>：数据在两个设备之间进行直接传输，通常不涉及多设备之间的干扰。信号只在发送端和接收端之间传输。</li>
<li><strong>协议</strong>：常用协议为<strong>PPP（Point-to-Point Protocol）</strong>。PPP是点对点协议，支持多种网络层协议。它提供了封装数据、认证、压缩以及错误检测功能。</li>
</ul>
</li>
<li><strong>广播信道</strong>：
<ul>
<li><strong>特点</strong>：信号在多个设备间广播，所有连接到该信道的设备都能接收到传输的数据。需要控制如何解决多设备争用信道的问题。</li>
<li><strong>协议</strong>：常用协议为<strong>CSMA/CD（Carrier Sense Multiple Access with Collision Detection）</strong>。CSMA/CD用于以太网，允许多个设备共享同一信道。它通过侦测信道是否空闲，避免冲突；如果发生冲突，设备会退避一段时间后重试。</li>
</ul>
</li>
</ol>
<p>数据链路层的三个基本问题</p>
<ol>
<li><strong>封装成帧</strong>：
<ul>
<li>数据链路层将网络层传来的数据封装成帧，添加头部和尾部信息，如目标地址、源地址、帧校验序列（FCS）等。</li>
</ul>
</li>
<li><strong>透明传输</strong>：
<ul>
<li>保证数据的传输不会受到链路中可能出现的特殊符号的影响（如数据流中的帧分隔符）。通过位填充等技术确保数据在链路上传输时的完整性和正确性。</li>
</ul>
</li>
<li><strong>差错检测</strong>：
<ul>
<li>数据链路层通过CRC（循环冗余校验）等技术对数据进行差错检测，确保数据传输过程中没有发生错误。如果检测到错误，通常会丢弃该帧并要求重传。</li>
</ul>
</li>
</ol>
<hr>
<p>以太网的 MAC 层硬件地址</p>
<ul>
<li><strong>MAC地址</strong>（媒体访问控制地址）是网络适配器（如网卡）在局域网中的唯一标识符。它通常是由硬件生产商分配的 48 位地址，表示网络接口设备。MAC地址通常以16进制形式表示，如：<code>00:1A:2B:3C:4D:5E</code>。</li>
</ul>
<hr>
<p>适配器、转发器、集线器、网桥、以太网交换机的作用及适用场</p>
<ol>
<li><strong>适配器（网络适配器）</strong>：
<ul>
<li><strong>作用</strong>：网络适配器（如网卡）用于连接计算机与网络，通过物理层传输数据。它提供了与网络进行数据通信的接口。</li>
</ul>
</li>
<li><strong>转发器</strong>：
<ul>
<li><strong>作用</strong>：转发器用于在不同的网络之间进行数据转发，通常用于协议转换或将不同网络技术的设备连接起来。</li>
</ul>
</li>
<li><strong>集线器（Hub）</strong>：
<ul>
<li><strong>作用</strong>：集线器是一个简单的网络设备，能够将信号广播到所有端口，适用于小型网络。但它不具备智能，仅用于物理层的信号传输。</li>
</ul>
</li>
<li><strong>网桥（Bridge）</strong>：
<ul>
<li><strong>作用</strong>：网桥用于连接不同的局域网，能够根据MAC地址转发数据帧，从而分割流量，提高网络效率。网桥工作在数据链路层。</li>
</ul>
</li>
<li><strong>以太网交换机（Switch）</strong>：
<ul>
<li><strong>作用</strong>：以太网交换机可以通过MAC地址来转发数据包，只将数据包发送到目标设备所在的端口，相比集线器，它能有效减少网络冲突并提高网络效率。它工作在数据链路层，具有一定的智能，能动态学习和维护MAC地址表。</li>
</ul>
</li>
</ol>
<h1>网络层</h1>
<h2 id="4-1基本术语">4.1基本术语</h2>
<p><strong>虚电路（Virtual Circuit）</strong> : 在两个终端设备的逻辑或物理端口之间，通过建立的双向的透明传输通道。虚电路表示这只是一条逻辑上的连接，分组都沿着这条逻辑连接按照存储转发方式传送，而并不是真正建立了一条物理连接。</p>
<p><strong>IP（Internet Protocol ）</strong> : 网际协议 IP 是 TCP/IP 体系中两个最主要的协议之一，是 TCP/IP 体系结构网际层的核心。配套的有 ARP，RARP，ICMP，IGMP。</p>
<p><strong>ARP（Address Resolution Protocol）</strong> : 地址解析协议。地址解析协议 ARP 把 IP 地址解析为硬件地址。</p>
<p><strong>ICMP（Internet Control Message Protocol ）</strong>：网际控制报文协议 （ICMP 允许主机或路由器报告差错情况和提供有关异常情况的报告）。</p>
<p><strong>子网掩码（subnet mask ）</strong>：它是一种用来指明一个 IP 地址的哪些位标识的是主机所在的子网以及哪些位标识的是主机的位掩码。子网掩码不能单独存在，它必须结合 IP 地址一起使用。</p>
<p><strong>CIDR（ Classless Inter-Domain Routing ）</strong>：无分类域间路由选择 （特点是消除了传统的 A 类、B 类和 C 类地址以及划分子网的概念，并使用各种长度的“网络前缀”(network-prefix)来代替分类地址中的网络号和子网号）。</p>
<p><strong>默认路由（default route）</strong>：当在路由表中查不到能到达目的地址的路由时，路由器选择的路由。默认路由还可以减小路由表所占用的空间和搜索路由表所用的时间。</p>
<p><strong>路由选择算法（Virtual Circuit）</strong>：路由选择协议的核心部分。因特网采用自适应的，分层次的路由选择协议。</p>
<h2 id="4-2重要知识总结">4.2重要知识总结</h2>
<p><strong>TCP/IP 协议中的网络层向上只提供简单灵活的，无连接的，尽最大努力交付的数据报服务。网络层不提供服务质量的承诺，不保证分组交付的时限，所传送的分组可能出错、丢失、重复和失序。进程之间通信的可靠性由运输层负责</strong></p>
<p>在互联网的交付有两种，一是在本网络直接交付不用经过路由器，另一种是和其他网络的间接交付，至少经过一个路由器，但最后一次一定是直接交付</p>
<p>分类的 IP 地址由网络号字段（指明网络）和主机号字段（指明主机）组成。网络号字段最前面的类别指明 IP 地址的类别。IP 地址是一种分等级的地址结构。IP 地址管理机构分配 IP 地址时只分配网络号，主机号由得到该网络号的单位自行分配。路由器根据目的主机所连接的网络号来转发分组。一个路由器至少连接到两个网络，所以一个路由器至少应当有两个不同的 IP 地址</p>
<p>IP 数据报分为首部和数据两部分。首部的前一部分是固定长度，共 20 字节，是所有 IP 数据包必须具有的（源地址，目的地址，总长度等重要地段都固定在首部）。一些长度可变的可选字段固定在首部的后面。IP 首部中的生存时间给出了 IP 数据报在互联网中所能经过的最大路由器数。可防止 IP 数据报在互联网中无限制的兜圈子。</p>
<p><strong>地址解析协议 ARP 把 IP 地址解析为硬件地址。ARP 的高速缓存可以大大减少网络上的通信量。因为这样可以使主机下次再与同样地址的主机通信时，可以直接从高速缓存中找到所需要的硬件地址而不需要再去以广播方式发送 ARP 请求分组</strong></p>
<p>无分类域间路由选择 CIDR 是解决目前 IP 地址紧缺的一个好办法。CIDR 记法在 IP 地址后面加上斜线“/”，然后写上前缀所占的位数。前缀（或网络前缀）用来指明网络，前缀后面的部分是后缀，用来指明主机。CIDR 把前缀都相同的连续的 IP 地址组成一个“CIDR 地址块”，IP 地址分配都以 CIDR 地址块为单位。</p>
<p>网际控制报文协议是 IP 层的协议。ICMP 报文作为 IP 数据报的数据，加上首部后组成 IP 数据报发送出去。使用 ICMP 数据报并不是为了实现可靠传输。ICMP 允许主机或路由器报告差错情况和提供有关异常情况的报告。ICMP 报文的种类有两种，即 ICMP 差错报告报文和 ICMP 询问报文。</p>
<p><strong>要解决 IP 地址耗尽的问题，最根本的办法是采用具有更大地址空间的新版本 IP 协议-IPv6。</strong> IPv6 所带来的变化有 ① 更大的地址空间（采用 128 位地址）② 灵活的首部格式 ③ 改进的选项 ④ 支持即插即用 ⑤ 支持资源的预分配 ⑥IPv6 的首部改为 8 字节对齐。</p>
<p><strong>虚拟专用网络 VPN 利用公用的互联网作为本机构专用网之间的通信载体。VPN 内使用互联网的专用地址。一个 VPN 至少要有一个路由器具有合法的全球 IP 地址，这样才能和本系统的另一个 VPN 通过互联网进行通信。所有通过互联网传送的数据都需要加密。</strong></p>
<p>MPLS 的特点是：① 支持面向连接的服务质量 ② 支持流量工程，平衡网络负载 ③ 有效的支持虚拟专用网 VPN。MPLS 在入口节点给每一个 IP 数据报打上固定长度的“标记”，然后根据标记在第二层（链路层）用硬件进行转发（在标记交换路由器中进行标记交换），因而转发速率大大加快。</p>
<h1>传输层</h1>
<h2 id="5-1基本术语">5.1基本术语</h2>
<p><strong>进程（process）</strong>：指计算机中正在运行的程序实体。</p>
<p><strong>应用进程互相通信</strong>：一台主机的进程和另一台主机中的一个进程交换数据的过程（另外注意通信真正的端点不是主机而是主机中的进程，也就是说端到端的通信是应用进程之间的通信）。</p>
<p><strong>传输层的复用与分用</strong>：复用指发送方不同的进程都可以通过同一个运输层协议传送数据。分用指接收方的运输层在剥去报文的首部后能把这些数据正确的交付到目的应用进程。</p>
<p><strong>TCP（Transmission Control Protocol）</strong>：传输控制协议。</p>
<p><strong>UDP（User Datagram Protocol）</strong>：用户数据报协议</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.javaguide.cn/p3-juejin/b136e69e0b9b426782f77623dcf098bd~tplv-k3u1fbpfcp-zoom-1.png" alt=""></p>
<p><strong>端口（port）</strong>：端口的目的是为了确认对方机器的哪个进程在与自己进行交互，比如 MSN 和 QQ 的端口不同，如果没有端口就可能出现 QQ 进程和 MSN 交互错误。端口又称协议端口号。</p>
<p><strong>停止等待协议（stop-and-wait）</strong>：指发送方每发送完一个分组就停止发送，等待对方确认，在收到确认之后在发送下一个分组。</p>
<p><strong>流量控制</strong> : 就是让发送方的发送速率不要太快，既要让接收方来得及接收，也不要使网络发生拥塞。</p>
<p><strong>拥塞控制</strong>：防止过多的数据注入到网络中，这样可以使网络中的路由器或链路不致过载。拥塞控制所要做的都有一个前提，就是网络能够承受现有的网络负荷。</p>
<h2 id="5-2重要知识点总结">5.2重要知识点总结</h2>
<p><strong>运输层提供应用进程之间的逻辑通信，也就是说，运输层之间的通信并不是真正在两个运输层之间直接传输数据。运输层向应用层屏蔽了下面网络的细节（如网络拓补，所采用的路由选择协议等），它使应用进程之间看起来好像两个运输层实体之间有一条端到端的逻辑通信信道。</strong></p>
<p><strong>网络层为主机提供逻辑通信，而运输层为应用进程之间提供端到端的逻辑通信。</strong></p>
<p>运输层的两个重要协议是用户数据报协议 UDP 和传输控制协议 TCP。按照 OSI 的术语，两个对等运输实体在通信时传送的数据单位叫做运输协议数据单元 TPDU（Transport Protocol Data Unit）。但在 TCP/IP 体系中，则根据所使用的协议是 TCP 或 UDP，分别称之为 TCP 报文段或 UDP 用户数据报。</p>
<p>UDP 在传送数据之前不需要先建立连接，远地主机在收到 UDP 报文后，不需要给出任何确认。虽然 UDP 不提供可靠交付，但在某些情况下 UDP 确是一种最有效的工作方式。 TCP 提供<strong>面向连接的服务</strong>。在传送数据之前必须先建立连接，数据传送结束后要释放连接。TCP 不提供广播或多播服务。由于 TCP 要提供可靠的，面向连接的传输服务，难以避免地增加了许多开销，如确认，流量控制，计时器以及连接管理等。这不仅使协议数据单元的首部增大很多，还要占用许多处理机资源。</p>
<p>硬件端口是不同硬件设备进行交互的接口，而软件端口是应用层各种协议进程与运输实体进行层间交互的一种地址。UDP 和 TCP 的首部格式中都有源端口和目的端口这两个重要字段。当运输层收到 IP 层交上来的运输层报文时，就能够根据其首部中的目的端口号把数据交付应用层的目的应用层。（两个进程之间进行通信不光要知道对方 IP 地址而且要知道对方的端口号(为了找到对方计算机中的应用进程)）</p>
<p>运输层用一个 16 位端口号标志一个端口。端口号只有本地意义，它只是为了标志计算机应用层中的各个进程在和运输层交互时的层间接口。在互联网的不同计算机中，相同的端口号是没有关联的。协议端口号简称端口。虽然通信的终点是应用进程，但只要把所发送的报文交到目的主机的某个合适端口，剩下的工作（最后交付目的进程）就由 TCP 和 UDP 来完成。</p>
<p>运输层的端口号分为服务器端使用的端口号（0˜1023 指派给熟知端口，1024˜49151 是登记端口号）和客户端暂时使用的端口号（49152˜65535）</p>
<p><strong>UDP 的主要特点是 ① 无连接 ② 尽最大努力交付 ③ 面向报文 ④ 无拥塞控制 ⑤ 支持一对一，一对多，多对一和多对多的交互通信 ⑥ 首部开销小（只有四个字段：源端口，目的端口，长度和检验和）</strong></p>
<p><strong>TCP 的主要特点是 ① 面向连接 ② 每一条 TCP 连接只能是一对一的 ③ 提供可靠交付 ④ 提供全双工通信 ⑤ 面向字节流</strong></p>
<p><strong>TCP 用主机的 IP 地址加上主机上的端口号作为 TCP 连接的端点。这样的端点就叫做套接字（socket）或插口。套接字用（IP 地址：端口号）来表示。每一条 TCP 连接唯一地被通信两端的两个端点所确定。</strong></p>
<p>停止等待协议是为了实现可靠传输的，它的基本原理就是每发完一个分组就停止发送，等待对方确认。在收到确认后再发下一个分组。</p>
<p>为了提高传输效率，发送方可以不使用低效率的停止等待协议，而是采用流水线传输。流水线传输就是发送方可连续发送多个分组，不必每发完一个分组就停下来等待对方确认。这样可使信道上一直有数据不间断的在传送。这种传输方式可以明显提高信道利用率。</p>
<p>停止等待协议中超时重传是指只要超过一段时间仍然没有收到确认，就重传前面发送过的分组（认为刚才发送过的分组丢失了）。因此每发送完一个分组需要设置一个超时计时器，其重传时间应比数据在分组传输的平均往返时间更长一些。这种自动重传方式常称为自动重传请求 ARQ。另外在停止等待协议中若收到重复分组，就丢弃该分组，但同时还要发送确认。连续 ARQ 协议可提高信道利用率。发送维持一个发送窗口，凡位于发送窗口内的分组可连续发送出去，而不需要等待对方确认。接收方一般采用累积确认，对按序到达的最后一个分组发送确认，表明到这个分组位置的所有分组都已经正确收到了。</p>
<p>TCP 报文段的前 20 个字节是固定的，其后有 40 字节长度的可选字段。如果加入可选字段后首部长度不是 4 的整数倍字节，需要在再在之后用 0 填充。因此，TCP 首部的长度取值为 20+4n 字节,最长为 60 字节。</p>
<p><strong>TCP 使用滑动窗口机制。发送窗口里面的序号表示允许发送的序号。发送窗口后沿的后面部分表示已发送且已收到确认，而发送窗口前沿的前面部分表示不允许发送。发送窗口后沿的变化情况有两种可能，即不动（没有收到新的确认）和前移（收到了新的确认）。发送窗口的前沿通常是不断向前移动的。一般来说，我们总是希望数据传输更快一些。但如果发送方把数据发送的过快，接收方就可能来不及接收，这就会造成数据的丢失。所谓流量控制就是让发送方的发送速率不要太快，要让接收方来得及接收。</strong></p>
<ol>
<li><strong>为了进行拥塞控制，TCP 发送方要维持一个拥塞窗口 cwnd 的状态变量。拥塞控制窗口的大小取决于网络的拥塞程度，并且动态变化。发送方让自己的发送窗口取为拥塞窗口和接收方的接受窗口中较小的一个。</strong></li>
<li><strong>TCP 的拥塞控制采用了四种算法，即慢开始，拥塞避免，快重传和快恢复。在网络层也可以使路由器采用适当的分组丢弃策略（如主动队列管理 AQM），以减少网络拥塞的发生。</strong></li>
<li>运输连接的三个阶段，即：连接建立，数据传送和连接释放。</li>
<li><strong>主动发起 TCP 连接建立的应用进程叫做客户，而被动等待连接建立的应用进程叫做服务器。TCP 连接采用三报文握手机制。服务器要确认用户的连接请求，然后客户要对服务器的确认进行确认。</strong></li>
<li>TCP 的连接释放采用四报文握手机制。任何一方都可以在数据传送结束后发出连接释放的通知，待对方确认后进入半关闭状态。当另一方也没有数据再发送时，则发送连接释放通知，对方确认后就完全关闭了 TCP 连接</li>
</ol>
<h2 id="5-3补充重要知识">5.3补充重要知识</h2>
<p>端口和套接字的意义</p>
<p><strong>端口</strong>：端口是网络协议（如 TCP 或 UDP）中用于标识特定应用进程的数字。端口通常在 0 到 65535 之间，分为不同的范围：</p>
<p><strong>知名端口（0-1023）</strong>：通常分配给常见的服务（例如 HTTP 用端口 80，HTTPS 用端口 443）。</p>
<p><strong>注册端口（1024-49151）</strong>：用于不太常见的应用程序和服务。</p>
<p><strong>动态或私有端口（49152-65535）</strong>：通常由操作系统分配给临时连接。</p>
<p><strong>套接字</strong>：套接字（Socket）是操作系统提供的一种接口，用于实现进程间的网络通信。它是通过 IP 地址和端口号的组合来唯一标识网络中的一个通信端点。可以通过套接字在应用程序间建立通信，支持 TCP 或 UDP 协议。</p>
<p>tcp和udp的区别</p>
<p><strong>TCP（Transmission Control Protocol）</strong>：</p>
<ul>
<li><strong>可靠性</strong>：TCP 是面向连接的协议，确保数据按顺序到达，且不会丢失。如果丢包，TCP 会进行重传。</li>
<li><strong>流量控制</strong>：TCP 使用流量控制（滑动窗口）来避免发送方过快地发送数据，超出了接收方的处理能力。</li>
<li><strong>拥塞控制</strong>：TCP 会根据网络的负载情况动态调整数据传输速度，以避免网络拥塞。</li>
<li><strong>连接管理</strong>：需要在通信前建立连接（三次握手），通信结束后需要关闭连接（四次挥手）。</li>
</ul>
<p><strong>UDP（User Datagram Protocol）</strong>：</p>
<ul>
<li><strong>不可靠性</strong>：UDP 是无连接的协议，不保证数据的可靠到达。数据包可能会丢失、重复或乱序。</li>
<li><strong>无流量控制和拥塞控制</strong>：UDP 不会进行流量控制或拥塞控制，发送数据时不考虑接收方的处理能力。</li>
<li><strong>轻量级</strong>：由于其无连接、简单的特性，UDP 的开销较小，适合实时传输等对时延要求高的应用。</li>
</ul>
<p>应用场景：</p>
<p><strong>TCP</strong>：</p>
<ul>
<li>适用于需要高可靠性、顺序传输的场景，比如文件传输（FTP）、网页浏览（HTTP/HTTPS）、电子邮件等。</li>
</ul>
<p><strong>UDP</strong>：</p>
<ul>
<li>适用于对时延要求高、容忍数据丢失的场景，比如视频会议、VoIP（语音通信）、在线游戏等。</li>
</ul>
<p>在不可靠网络上实现可靠传输的技术</p>
<p>在不可靠的网络上实现可靠传输，通常依赖于<strong>自动重传请求（ARQ）协议</strong>和<strong>确认机制</strong>。TCP 就是通过 ARQ 协议来实现数据的可靠传输。</p>
<ul>
<li><strong>ARQ 协议</strong>：通过发送方和接收方之间的确认消息（ACK）来确保数据的正确传输。如果接收方未能成功接收到数据，发送方会重新发送数据。</li>
<li><strong>停止等待协议</strong>：发送方发送一个数据包后，等待接收方的确认消息（ACK）。如果收到确认，则继续发送下一个数据包。如果超时未收到确认，重新发送该数据包。</li>
<li><strong>滑动窗口协议</strong>：相比停止等待协议，滑动窗口协议允许发送方在等待确认的同时继续发送多个数据包，提高了传输效率。</li>
</ul>
<p><strong>tcp的三次握手和三次挥手</strong></p>
<p><strong>三次握手</strong>：用来建立 TCP 连接，确保双方都准备好进行数据传输：</p>
<ol>
<li>客户端发送 SYN 请求，表示希望建立连接。</li>
<li>服务器回复 SYN-ACK，表示同意建立连接。</li>
<li>客户端发送 ACK 确认，连接建立成功。</li>
</ol>
<p><strong>四次挥手</strong>：用来关闭连接，确保双方都完成数据的传输后才断开连接：</p>
<ol>
<li>客户端发送 FIN 请求，表示数据发送完毕，准备关闭连接。</li>
<li>服务器回复 ACK，确认收到客户端的关闭请求。</li>
<li>服务器发送 FIN 请求，表示服务器也准备关闭连接。</li>
<li>客户端回复 ACK，连接正式关闭。</li>
</ol>
<h1>应用层</h1>
<h2 id="6-1基本术语">6.1基本术语</h2>
<p><strong>域名系统（DNS）</strong>：域名系统（DNS，Domain Name System）将人类可读的域名 (例如，<a target="_blank" rel="noopener" href="http://www.baidu.com">www.baidu.com</a>) 转换为机器可读的 IP 地址 (例如，220.181.38.148)。我们可以将其理解为专为互联网设计的电话薄。</p>
<p>说明白了就是一个解析的过程</p>
<p><strong>文件传输协议（FTP）</strong>：FTP 是 File Transfer Protocol（文件传输协议）的英文简称，而中文简称为“文传协议”。用于 Internet 上的控制文件的双向传输。同时，它也是一个应用程序（Application）。基于不同的操作系统有不同的 FTP 应用程序，而所有这些应用程序都遵守同一种协议以传输文件。在 FTP 的使用当中，用户经常遇到两个概念：“下载”（Download）和&quot;上传&quot;（Upload）。 &quot;下载&quot;文件就是从远程主机拷贝文件至自己的计算机上；&quot;上传&quot;文件就是将文件从自己的计算机中拷贝至远程主机上。用 Internet 语言来说，用户可通过客户机程序向（从）远程主机上传（下载）文件。</p>
<p><strong>简单文件传输协议（TFTP）</strong>：TFTP（Trivial File Transfer Protocol,简单文件传输协议）是 TCP/IP 协议族中的一个用来在客户机与服务器之间进行简单文件传输的协议，提供不复杂、开销不大的文件传输服务。端口号为 69。</p>
<p><strong>远程终端协议（TELNET）</strong>：Telnet 协议是 TCP/IP 协议族中的一员，是 Internet 远程登陆服务的标准协议和主要方式。它为用户提供了在本地计算机上完成远程主机工作的能力。在终端使用者的电脑上使用 telnet 程序，用它连接到服务器。终端使用者可以在 telnet 程序中输入命令，这些命令会在服务器上运行，就像直接在服务器的控制台上输入一样。可以在本地就能控制服务器。要开始一个 telnet 会话，必须输入用户名和密码来登录服务器。Telnet 是常用的远程控制 Web 服务器的方法。</p>
<p><strong>万维网（WWW）</strong>：WWW 是环球信息网的缩写，（亦作“Web”、“WWW”、“‘W3’”，英文全称为“World Wide Web”），中文名字为“万维网”，&quot;环球网&quot;等，常简称为 Web。分为 Web 客户端和 Web 服务器程序。WWW 可以让 Web 客户端（常用浏览器）访问浏览 Web 服务器上的页面。是一个由许多互相链接的超文本组成的系统，通过互联网访问。在这个系统中，每个有用的事物，称为一样“资源”；并且由一个全局“统一资源标识符”（URI）标识；这些资源通过超文本传输协议（Hypertext Transfer Protocol）传送给用户，而后者通过点击链接来获得资源。万维网联盟（英语：World Wide Web Consortium，简称 W3C），又称 W3C 理事会。1994 年 10 月在麻省理工学院（MIT）计算机科学实验室成立。万维网联盟的创建者是万维网的发明者蒂姆·伯纳斯-李。万维网并不等同互联网，万维网只是互联网所能提供的服务其中之一，是靠着互联网运行的一项服务。</p>
<p><strong>统一资源定位符（URL）</strong>：统一资源定位符是对可以从互联网上得到的资源的位置和访问方法的一种简洁的表示，是互联网上标准资源的地址。互联网上的每个文件都有一个唯一的 URL，它包含的信息指出文件的位置以及浏览器应该怎么处理它。</p>
<p><strong>超文本传输协议（HTTP）</strong>：超文本传输协议（HTTP，HyperText Transfer Protocol)是互联网上应用最为广泛的一种网络协议。所有的 WWW 文件都必须遵守这个标准。设计 HTTP 最初的目的是为了提供一种发布和接收 HTML 页面的方法。1960 年美国人 Ted Nelson 构思了一种通过计算机处理文本信息的方法，并称之为超文本（hypertext）,这成为了 HTTP 超文本传输协议标准架构的发展根基。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.javaguide.cn/p3-juejin/8e3efca026654874bde8be88c96e1783~tplv-k3u1fbpfcp-zoom-1.jpeg" alt=""></p>
<p><strong>代理服务器（Proxy Server）</strong>：代理服务器（Proxy Server）是一种网络实体，它又称为万维网高速缓存。 代理服务器把最近的一些请求和响应暂存在本地磁盘中。当新请求到达时，若代理服务器发现这个请求与暂时存放的的请求相同，就返回暂存的响应，而不需要按 URL 的地址再次去互联网访问该资源。代理服务器可在客户端或服务器工作，也可以在中间系统工作。</p>
<p><strong>简单邮件传输协议(SMTP)</strong> : SMTP（Simple Mail Transfer Protocol）即简单邮件传输协议,它是一组用于由源地址到目的地址传送邮件的规则，由它来控制信件的中转方式。 SMTP 协议属于 TCP/IP 协议簇，它帮助每台计算机在发送或中转信件时找到下一个目的地。 通过 SMTP 协议所指定的服务器,就可以把 E-mail 寄到收信人的服务器上了，整个过程只要几分钟。SMTP 服务器则是遵循 SMTP 协议的发送邮件服务器，用来发送或中转发出的电子邮件。</p>
<p><strong>搜索引擎</strong> :搜索引擎（Search Engine）是指根据一定的策略、运用特定的计算机程序从互联网上搜集信息，在对信息进行组织和处理后，为用户提供检索服务，将用户检索相关的信息展示给用户的系统。搜索引擎包括全文索引、目录索引、元搜索引擎、垂直搜索引擎、集合式搜索引擎、门户搜索引擎与免费链接列表等。</p>
<p><strong>垂直搜索引擎</strong>：垂直搜索引擎是针对某一个行业的专业搜索引擎，是搜索引擎的细分和延伸，是对网页库中的某类专门的信息进行一次整合，定向分字段抽取出需要的数据进行处理后再以某种形式返回给用户。垂直搜索是相对通用搜索引擎的信息量大、查询不准确、深度不够等提出来的新的搜索引擎服务模式，通过针对某一特定领域、某一特定人群或某一特定需求提供的有一定价值的信息和相关服务。其特点就是“专、精、深”，且具有行业色彩，相比较通用搜索引擎的海量信息无序化，垂直搜索引擎则显得更加专注、具体和深入。</p>
<p><strong>全文索引</strong> :全文索引技术是目前搜索引擎的关键技术。试想在 1M 大小的文件中搜索一个词，可能需要几秒，在 100M 的文件中可能需要几十秒，如果在更大的文件中搜索那么就需要更大的系统开销，这样的开销是不现实的。所以在这样的矛盾下出现了全文索引技术，有时候有人叫倒排文档技术。</p>
<p><strong>目录索引</strong>：目录索引（ search index/directory)，顾名思义就是将网站分门别类地存放在相应的目录中，因此用户在查询信息时，可选择关键词搜索，也可按分类目录逐层查找。</p>
<h2 id="6-2重要知识点总结">6.2重要知识点总结</h2>
<p>文件传输协议（FTP）使用 TCP 可靠的运输服务。FTP 使用客户服务器方式。一个 FTP 服务器进程可以同时为多个用户提供服务。在进行文件传输时，FTP 的客户和服务器之间要先建立两个并行的 TCP 连接:控制连接和数据连接。实际用于传输文件的是数据连接。</p>
<p>万维网客户程序与服务器之间进行交互使用的协议是超文本传输协议 HTTP。HTTP 使用 TCP 连接进行可靠传输。但 HTTP 本身是无连接、无状态的。HTTP/1.1 协议使用了持续连接（分为非流水线方式和流水线方式）</p>
<p>电子邮件把邮件发送到收件人使用的邮件服务器，并放在其中的收件人邮箱中，收件人可随时上网到自己使用的邮件服务器读取，相当于电子邮箱。</p>
<p>一个电子邮件系统有三个重要组成构件：用户代理、邮件服务器、邮件协议（包括邮件发送协议，如 SMTP，和邮件读取协议，如 POP3 和 IMAP）。用户代理和邮件服务器都要运行这些协议。</p>
<h2 id="6-3补充重要知识">6.3补充重要知识</h2>
<p>常见的http方法</p>
<p><strong>GET</strong>：请求服务器返回指定的资源（例如网页）。</p>
<p><strong>POST</strong>：向服务器提交数据（例如表单数据）。</p>
<p><strong>PUT</strong>：更新资源。</p>
<p><strong>DELETE</strong>：删除资源。</p>
<p>http状态码</p>
<p><strong>2xx</strong>：成功，例如 200 OK 表示请求成功。</p>
<p><strong>3xx</strong>：重定向，例如 301 Moved Permanently 表示资源已永久移动。</p>
<p><strong>4xx</strong>：客户端错误，例如 404 Not Found 表示请求的资源不存在。</p>
<p><strong>5xx</strong>：服务器错误，例如 500 Internal Server Error 表示服务器发生错误。</p>
<p>https和http的区别</p>
<p>HTTPS 在 HTTP 上加入了 SSL/TLS 协议，通过加密保护数据的机密性和完整性，防止中间人攻击。</p>
<p>dns工作流程：</p>
<p><strong>用户输入网址</strong>：当你在浏览器中输入一个 URL（如 <code>www.example.com</code>）时，浏览器首先需要通过 DNS 查找这个域名对应的 IP 地址。</p>
<p><strong>查询 DNS 服务器</strong>：</p>
<ul>
<li><strong>本地缓存</strong>：浏览器或操作系统首先查看是否缓存了该域名的 IP 地址。如果有缓存且未过期，直接使用缓存的地址。</li>
<li><strong>递归查询</strong>：如果没有缓存，DNS 客户端向 DNS 服务器发送查询请求。DNS 服务器将从根服务器、顶级域名服务器、权威域名服务器层层查询，直到找到该域名的对应 IP 地址。</li>
</ul>
<p><strong>返回 IP 地址</strong>：一旦找到，DNS 服务器将域名对应的 IP 地址返回给浏览器。</p>
<p><strong>建立连接</strong>：浏览器使用获取到的 IP 地址向目标服务器发起 HTTP 请求，开始页面加载过程。</p>
<p>访问一个网站的过程：</p>
<p><strong>输入网址</strong>：用户在浏览器中输入 URL（如 <code>https://www.example.com</code>）。</p>
<p><strong>DNS 解析</strong>：浏览器通过 DNS 将域名解析为对应的 IP 地址。</p>
<p><strong>TCP 连接建立</strong>：</p>
<ul>
<li>浏览器通过 TCP 协议与服务器建立连接，使用三次握手完成连接建立（对于 HTTPS，还涉及到 TLS 握手以确保数据安全性）。</li>
</ul>
<p><strong>发送 HTTP 请求</strong>：浏览器向服务器发送 HTTP 请求，获取网页资源（如 HTML、CSS、JavaScript、图片等）。</p>
<p><strong>服务器响应</strong>：服务器处理请求后返回 HTTP 响应，包括网页的 HTML 内容和其他相关资源。</p>
<p><strong>渲染页面</strong>：浏览器接收到响应后，解析并渲染网页，显示给用户。</p>
<p><strong>关闭连接</strong>：HTTP/1.1 使用持久连接（通过 <code>Connection: keep-alive</code>），但最终浏览器会关闭与服务器的 TCP 连接。</p>
<h1>其他层次</h1>
<p>除了常见的OSI七层体系结构外，还有tcp/ip四层协议和tcp/ip五层协议</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.runoob.com/wp-content/uploads/2018/09/1538030296-7490-20150904094019903-1923900106.jpg" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.runoob.com/wp-content/uploads/2018/09/1538030296-8668-20150904095142060-1017190812.gif" alt=""></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407230955363.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407230955363.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">mengnankkzhou</div><div class="post-copyright__author_desc">不要走捏</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.tokenlen.top/2025/01/13/net1/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://blog.tokenlen.top/2025/01/13/net1/')">计算机网络-七层体系结构</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.tokenlen.top/2025/01/13/net1/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=计算机网络-七层体系结构&amp;url=https://blog.tokenlen.top/2025/01/13/net1/&amp;pic=https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221837602.jpg?_r_=7ba00fda-bb1b-f52b-ab64-45e8daf0927e" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.tokenlen.top" target="_blank">mengnankkのblog</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/408/"><span class="categoryes-punctuation"> <i class="anzhiyufont anzhiyu-icon-inbox"></i></span>408<span class="categoryesPageCount">23</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/net/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>net<span class="tagsPageCount">3</span></a></div></div><div class="post_share"><div class="social-share" data-image="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/20250126175712179.jpg?_r_=ad3ee456-43d6-cbe2-b8a8-2aba725582cd" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/01/12/markdown1/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202410051722379.jpg?_r_=b8b76de6-8253-3720-899a-ff709e4ebb3f" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Markdown语法</div></div></a></div><div class="next-post pull-right"><a href="/2025/01/26/mao1/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/20250126175712180.jpg?_r_=e7de8255-7348-9cda-e4fc-3fb92400c630" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">毛泽东选集阅读体会&amp;杂谈</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/03/06/net3/" title="计算机网络重要问题总结"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221818490.jpeg?_r_=8611286b-13b1-e3d9-7eef-753ccee36aa9" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-06</div><div class="title">计算机网络重要问题总结</div></div></a></div><div><a href="/2025/02/23/net2/" title="计算机网络基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221837602.jpg?_r_=448a515e-4430-3338-d407-aad3c7df4e19" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-23</div><div class="title">计算机网络基础</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-switch"><span class="first-comment">Twikoo</span><span id="switch-btn"></span><span class="second-comment">Valine</span></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div class="vcomment" id="vcomment"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407230955363.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description">清风拂柳影，碧水映花香。</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">mengnankkzhou</h1><div class="author-info__desc">不要走捏</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/mengnankkkk" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/440831872" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202410021212939.jpg) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">基础引入</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD"><span class="toc-number">2.1.</span> <span class="toc-text">1.1基本术语</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93"><span class="toc-number">2.2.</span> <span class="toc-text">1.2知识点总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94%E6%80%BB%E7%BB%93"><span class="toc-number">2.2.1.</span> <span class="toc-text">对比总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD"><span class="toc-number">3.1.</span> <span class="toc-text">2.1基本术语</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93"><span class="toc-number">3.2.</span> <span class="toc-text">2.2知识点总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD"><span class="toc-number">4.1.</span> <span class="toc-text">3.1基本术语</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93"><span class="toc-number">4.2.</span> <span class="toc-text">3.2重要知识点总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3%E8%A1%A5%E5%85%85%E9%97%AE%E9%A2%98"><span class="toc-number">4.3.</span> <span class="toc-text">3.3补充问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text">网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD"><span class="toc-number">5.1.</span> <span class="toc-text">4.1基本术语</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93"><span class="toc-number">5.2.</span> <span class="toc-text">4.2重要知识总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">6.</span> <span class="toc-text">传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD"><span class="toc-number">6.1.</span> <span class="toc-text">5.1基本术语</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93"><span class="toc-number">6.2.</span> <span class="toc-text">5.2重要知识点总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3%E8%A1%A5%E5%85%85%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86"><span class="toc-number">6.3.</span> <span class="toc-text">5.3补充重要知识</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">7.</span> <span class="toc-text">应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD"><span class="toc-number">7.1.</span> <span class="toc-text">6.1基本术语</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93"><span class="toc-number">7.2.</span> <span class="toc-text">6.2重要知识点总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3%E8%A1%A5%E5%85%85%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86"><span class="toc-number">7.3.</span> <span class="toc-text">6.3补充重要知识</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">8.</span> <span class="toc-text">其他层次</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/04/01/en8/" title="English四月篇"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/20250126175712179.jpg?_r_=ad3ee456-43d6-cbe2-b8a8-2aba725582cd" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="English四月篇"/></a><div class="content"><a class="title" href="/2025/04/01/en8/" title="English四月篇">English四月篇</a><time datetime="2025-03-31T16:00:00.000Z" title="发表于 2025-04-01 00:00:00">2025-04-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/01/leetcodedayone/" title="Leetcode 每日一题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202410051722377.jpg?_r_=de85c009-7aad-6b4f-6a9e-e6c2e4e93282" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Leetcode 每日一题"/></a><div class="content"><a class="title" href="/2025/04/01/leetcodedayone/" title="Leetcode 每日一题">Leetcode 每日一题</a><time datetime="2025-03-31T16:00:00.000Z" title="发表于 2025-04-01 00:00:00">2025-04-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/15/mysql12/" title="Mysql面试题目"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202410051722381.jpg?_r_=3ee66e39-f6e8-ec0f-5e98-a0b35d33eb09" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mysql面试题目"/></a><div class="content"><a class="title" href="/2025/03/15/mysql12/" title="Mysql面试题目">Mysql面试题目</a><time datetime="2025-03-14T16:00:00.000Z" title="发表于 2025-03-15 00:00:00">2025-03-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/07/sql3/" title="sql原理之索引"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202408081510494.jpg?_r_=88f20dae-80d5-66e1-5813-1af6b52fa5b9" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="sql原理之索引"/></a><div class="content"><a class="title" href="/2025/03/07/sql3/" title="sql原理之索引">sql原理之索引</a><time datetime="2025-03-06T16:00:00.000Z" title="发表于 2025-03-07 00:00:00">2025-03-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/06/net3/" title="计算机网络重要问题总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://skymirror-1322372781.cos.ap-beijing.myqcloud.com/202407221818490.jpeg?_r_=8611286b-13b1-e3d9-7eef-753ccee36aa9" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机网络重要问题总结"/></a><div class="content"><a class="title" href="/2025/03/06/net3/" title="计算机网络重要问题总结">计算机网络重要问题总结</a><time datetime="2025-03-05T16:00:00.000Z" title="发表于 2025-03-06 00:00:00">2025-03-06</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text"><p><a style="margin-inline:5px" target="_blank" href="https://hexo.io/">
  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/Framework-Hexo-4e88f8?style=flat&logo=hexo" 
       title="博客框架为 Hexo" alt="Hexo">
</a>
<a style="margin-inline:5px" target="_blank" href="https://github.com/">
  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/Source-Github-24292f?style=flat&logo=github" 
       title="本站项目由 GitHub 托管" alt="GitHub">
</a>
<a style="margin-inline:5px" target="_blank" href="https://vercel.com/">
  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/Cloud-Vercel-000000?style=flat&logo=vercel" 
       title="使用 Vercel 部署" alt="Vercel">
</a>
<a style="margin-inline:5px" target="_blank" href="https://www.qlu.edu.cn/">
  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/University-齐鲁工业大学-0056a2?style=flat&logo=university" 
       title="齐鲁工业大学" alt="齐鲁工业大学">
</a>
<a style="margin-inline:5px" target="_blank" href="https://www.aliyun.com/">
  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/Cloud-阿里云-ff6a00?style=flat&logo=aliyun" 
       title="使用阿里云服务" alt="阿里云">
</a>
<a style="margin-inline:5px" target="_blank" href="https://cloud.tencent.com/">
  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/Cloud-腾讯云-0a73b8?style=flat&logo=tencent-cloud" 
       title="使用腾讯云服务" alt="腾讯云">
</a></p>
</div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2023 - 2025 By <a class="footer-bar-link" href="/" title="mengnankkzhou" target="_blank">mengnankkzhou</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" title="鲁ICP备2024110758号">鲁ICP备2024110758号</a><a class="footer-bar-link" href="https://blog.tokenlen.top/rss2.xml" title="Rss">Rss</a><a class="footer-bar-link cc" href="/pravite" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">99</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">32</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">15</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://blog.tokenlen.top/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://img.mengnankk.top:9001/" title="图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="图床"/><span class="back-menu-item-text">图床</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="http://img.mengnankk.top:9001/" title="mengnankk图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/13/64d8c2653332e.ico" alt="mengnankk图床"/><span class="back-menu-item-text">mengnankk图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 生活</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/Message/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 其他</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://home.tokenlen.top/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> home</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://status.mengnankk.asia/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 站点检测</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://home.tokenlen.top/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 心里话</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/BF/" style="font-size: 0.88rem;">BF<sup>1</sup></a><a href="/tags/BigData/" style="font-size: 0.88rem;">BigData<sup>1</sup></a><a href="/tags/C/" style="font-size: 0.88rem;">C<sup>4</sup></a><a href="/tags/CE/" style="font-size: 0.88rem;">CE<sup>1</sup></a><a href="/tags/CSRF/" style="font-size: 0.88rem;">CSRF<sup>1</sup></a><a href="/tags/English/" style="font-size: 0.88rem;">English<sup>8</sup></a><a href="/tags/FI/" style="font-size: 0.88rem;">FI<sup>1</sup></a><a href="/tags/Hadoop/" style="font-size: 0.88rem;">Hadoop<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>12</sup></a><a href="/tags/XSS/" style="font-size: 0.88rem;">XSS<sup>1</sup></a><a href="/tags/css/" style="font-size: 0.88rem;">css<sup>2</sup></a><a href="/tags/football/" style="font-size: 0.88rem;">football<sup>1</sup></a><a href="/tags/html/" style="font-size: 0.88rem;">html<sup>1</sup></a><a href="/tags/java/" style="font-size: 0.88rem;">java<sup>21</sup></a><a href="/tags/leetcode/" style="font-size: 0.88rem;">leetcode<sup>2</sup></a><a href="/tags/markdown/" style="font-size: 0.88rem;">markdown<sup>1</sup></a><a href="/tags/mysql/" style="font-size: 0.88rem;">mysql<sup>15</sup></a><a href="/tags/net/" style="font-size: 0.88rem;">net<sup>3</sup></a><a href="/tags/paper/" style="font-size: 0.88rem;">paper<sup>1</sup></a><a href="/tags/php/" style="font-size: 0.88rem;">php<sup>5</sup></a><a href="/tags/pip/" style="font-size: 0.88rem;">pip<sup>1</sup></a><a href="/tags/python/" style="font-size: 0.88rem;">python<sup>3</sup></a><a href="/tags/shell/" style="font-size: 0.88rem;">shell<sup>4</sup></a><a href="/tags/spring-boot/" style="font-size: 0.88rem;">spring boot<sup>3</sup></a><a href="/tags/springboot/" style="font-size: 0.88rem;">springboot<sup>1</sup></a><a href="/tags/sql/" style="font-size: 0.88rem;">sql<sup>3</sup></a><a href="/tags/web/" style="font-size: 0.88rem;">web<sup>3</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/" style="font-size: 0.88rem;">数据库原理<sup>3</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 0.88rem;">数据结构<sup>11</sup></a><a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 0.88rem;">正则表达式<sup>2</sup></a><a href="/tags/%E6%AF%9B%E9%80%89/" style="font-size: 0.88rem;">毛选<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>3</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2023 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 mengnankkzhou 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.cbd.int/mathjax@3.2.2/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://comment.tokenlen.top/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, "siu~~~~~"))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://comment.tokenlen.top/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '3ZpuzQHHKWfFH59QFYmcuCvr-gzGzoHsz',
      appKey: '8DIvljObQp853ueQMZzpb9Gx',
      avatar: 'mp',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.cbd.int/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Twikoo' === 'Valine' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://comment.tokenlen.top/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>